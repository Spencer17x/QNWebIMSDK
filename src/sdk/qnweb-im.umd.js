!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).QNIM={})}(this,function(exports){"use strict";var version="1.0.4-beta.2",__assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var floo2_0_0={exports:{}};!function(module,exports){var l;l=function(){return m=[function(e,t,r){e.exports=r(120)},function(e,t,r){var n,o,i=e.exports=r(5),s=r(55);i.codegen=r(131),i.fetch=r(132),i.path=r(133),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},i.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],o=e[r++];void 0!==o&&(t[n]=o)}return t};var a=/\\/g,u=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(a,"\\\\").replace(u,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,function(e,t){return t.toUpperCase()})},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(i.decorateRoot.remove(e.$type),e.$type.name=t,i.decorateRoot.add(e.$type)),e.$type;t=new(n=n||r(57))(t||e.name);return i.decorateRoot.add(t),t.ctor=e,Object.defineProperty(e,"$type",{value:t,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:t,enumerable:!1}),t};var p=0;i.decorateEnum=function(e){if(e.$type)return e.$type;var t=new(o=o||r(6))("Enum"+p++,e);return i.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},i.setProperty=function(e,t,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var o=r.shift();return 0<r.length?t[o]=e(t[o]||{},r,n):((r=t[o])&&(n=[].concat(r).concat(n)),t[o]=n),t}(e,t=t.split("."),r)},Object.defineProperty(i,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(r(65)))}})},function(e,t,r){var n=[r(0)];void 0===(r="function"==typeof(r=function(e){return(e.roots.xsync||(e.roots.xsync=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{Frame:{fields:{vsn:{type:"VSN",id:1},compress_method:{type:"CompressMethod",id:2},command:{type:"Command",id:3},payload:{type:"bytes",id:4},encrypt_method:{type:"EncryptMethod",id:5},encrypt_key:{type:"bytes",id:6},check_sum:{type:"uint32",id:7},tag:{type:"string",id:8}},nested:{VSN:{values:{XSYNC_V1:0,XSYNC_V2:1}},Command:{values:{UNREAD:0,SYNC:1,NOTICE:2,PROVISION:3}},CompressMethod:{values:{NONE:0,ZLIB:1}},EncryptMethod:{values:{ENCRYPT_NONE:0,AES_CBC_128:1,AES_CBC_256:2,CUSTOM:3}}}},Status:{fields:{code:{type:"ErrorCode",id:1},reason:{type:"string",id:2}},nested:{ErrorCode:{values:{UNKNOWN:0,OK:1,FAIL:2,UNKNOWN_COMMAND:3,PB_PARSER_ERROR:4,DECRYPT_FAILURE:5,PUBLIC_KEY_CHANGED:6,INVALID_TOKEN:7,INVALID_PARAMETER:8,UNAUTHORIZED:9,USER_FROZEN:10,USER_BANNED:11,WORD_CENSORED:12,TOO_MANY_DEVICES:13,ENCRYPT_METHOD_UNSUPPORTED:14,DEVICE_GUID_CONFLICT:15,CHECK_SUM_FAILURE:16,INVALID_LICENSE:17,LICENSE_LIMIT:18,APP_FROZEN:19}}}},ConversationUnread:{fields:{xid:{type:"XID",id:1},n:{type:"uint32",id:2},type:{type:"ConvType",id:3}},nested:{ConvType:{values:{UNKNOWN:0,CHAT:1,GROUPCHAT:2}}}},UnreadUL:{fields:{}},UnreadDL:{fields:{status:{type:"Status",id:1},unread:{rule:"repeated",type:"ConversationUnread",id:2}}},SyncUL:{fields:{xid:{type:"XID",id:1},key:{type:"uint64",id:2},meta:{type:"Meta",id:3},is_full_sync:{type:"bool",id:4},full_sync_num:{type:"sint32",id:5}}},SyncDL:{fields:{status:{type:"Status",id:1},metas:{rule:"repeated",type:"Meta",id:2},next_key:{type:"uint64",id:3},xid:{type:"XID",id:4},client_mid:{type:"uint64",id:5},server_mid:{type:"uint64",id:6},server_time:{type:"uint64",id:7},is_full_sync:{type:"bool",id:8},prev_mid:{type:"uint64",id:9},is_eager_sync:{type:"bool",id:10}}},Notice:{fields:{xid:{type:"XID",id:1}}},Provision:{fields:{status:{type:"Status",id:1},xid:{type:"XID",id:2},password:{type:"string",id:5},token:{type:"string",id:6},os_type:{type:"OsType",id:7},sdk_vsn:{type:"string",id:8},is_manual_login:{type:"bool",id:9},device_guid:{type:"string",id:10},device_notifier:{type:"string",id:11},device_token:{type:"string",id:12},device_info:{type:"string",id:13},last_login_time:{type:"uint64",id:14}},nested:{OsType:{values:{UNKNOWN:0,IOS:1,ANDR:2,WIN:3,OSX:4,LINUX:5,WEB:6}}}},Meta:{fields:{id:{type:"uint64",id:1},from:{type:"XID",id:2},to:{type:"XID",id:3},timestamp:{type:"uint64",id:4},ns:{type:"NameSpace",id:5},payload:{type:"bytes",id:6}},nested:{NameSpace:{values:{UNKNOWN:0,MESSAGE:1,GROUP_NOTICE:2,ROSTER_NOTICE:3,USER_NOTICE:4,INFO:5,CONVERSATION:6,PUSH:7}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=r)},function(e,t,r){var o=r(44),n=Object.prototype.toString;function i(e){return"[object Array]"===n.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==n.call(e))return!1;e=Object.getPrototypeOf(e);return null===e||e===Object.prototype}function c(e){return"[object Function]"===n.call(e)}function p(e,t){if(null!=e)if(i(e="object"!=typeof e?[e]:e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:u,isUndefined:s,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:p,merge:function r(){var n={};function e(e,t){u(n[t])&&u(e)?n[t]=r(n[t],e):u(e)?n[t]=r({},e):i(e)?n[t]=e.slice():n[t]=e}for(var t=0,o=arguments.length;t<o;t++)p(arguments[t],e);return n},extend:function(r,e,n){return p(e,function(e,t){r[t]=n&&"function"==typeof e?o(e,n):e}),r},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return e=65279===e.charCodeAt(0)?e.slice(1):e}}},function(e,t){e.exports=n;var d=null;try{d=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function l(e){return!0===(e&&e.__isLong__)}Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=l;var i={},s={};function r(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=y(e,(0|e)<0?-1:0,!0),o&&(s[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=i[e])?n:(r=y(e,e<0?-1:0,!1),o&&(i[e]=r),r)}function h(e,t){if(isNaN(e))return t?f:v;if(t){if(e<0)return f;if(a<=e)return A}else{if(e<=-u)return C;if(u<=e+1)return w}return e<0?h(-e,t).neg():y(e%o|0,e/o|0,t)}function y(e,t,r){return new n(e,t,r)}n.fromInt=r,n.fromNumber=h,n.fromBits=y;var c=Math.pow;function p(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if(t="number"==typeof t?(r=t,!1):!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if(0<(n=e.indexOf("-")))throw Error("interior hyphen");if(0===n)return p(e.substring(1),t,r).neg();for(var o=h(c(r,8)),i=v,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),r);i=a<8?(a=h(c(r,a)),i.mul(a).add(h(u))):(i=i.mul(o)).add(h(u))}return i.unsigned=t,i}function g(e,t){return"number"==typeof e?h(e,t):"string"==typeof e?p(e,t):y(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=p,n.fromValue=g;var o=4294967296,a=o*o,u=a/2,m=r(1<<24),v=r(0);n.ZERO=v;var f=r(0,!0);n.UZERO=f;var b=r(1);n.ONE=b;var _=r(1,!0);n.UONE=_;var E=r(-1);n.NEG_ONE=E;var w=y(-1,2147483647,!1);n.MAX_VALUE=w;var A=y(-1,-1,!0);n.MAX_UNSIGNED_VALUE=A;var C=y(0,-2147483648,!1);n.MIN_VALUE=C;var N=n.prototype;N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*o+(this.low>>>0):this.high*o+(this.low>>>0)},N.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=h(e),r=this.div(t),t=r.mul(t).sub(this);return r.toString(e)+t.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=h(c(e,6),this.unsigned),o=this,i="";;){var s=o.div(n),a=(o.sub(s.mul(n)).toInt()>>>0).toString(e);if((o=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},N.isZero=function(){return 0===this.high&&0===this.low},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||0<=this.high},N.isOdd=function(){return 1==(1&this.low)},N.isEven=function(){return 0==(1&this.low)},N.equals=function(e){return l(e)||(e=g(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},N.eq=N.equals,N.notEquals=function(e){return!this.eq(e)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(e){return this.comp(e)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(e){return this.comp(e)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(e){return 0<this.comp(e)},N.gt=N.greaterThan,N.greaterThanOrEqual=function(e){return 0<=this.comp(e)},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(e){if(l(e)||(e=g(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(b)},N.neg=N.negate,N.add=function(e){l(e)||(e=g(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,u=0,c=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,c+=(p+=n+a)>>>16,u+=(c+=r+s)>>>16,u+=t+i,y((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},N.subtract=function(e){return l(e)||(e=g(e)),this.add(e.neg())},N.sub=N.subtract,N.multiply=function(e){if(this.isZero())return v;if(l(e)||(e=g(e)),d)return y(d.mul(this.low,this.high,e.low,e.high),d.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(C))return e.isOdd()?C:v;if(e.eq(C))return this.isOdd()?C:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return h(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,u=65535&e.low,c=0,p=0,f=0,e=0;return f+=(e+=o*u)>>>16,p+=(f+=n*u)>>>16,f&=65535,p+=(f+=o*a)>>>16,c+=(p+=r*u)>>>16,p&=65535,c+=(p+=n*a)>>>16,p&=65535,c+=(p+=o*s)>>>16,c+=t*u+r*a+n*s+o*i,y((f&=65535)<<16|(e&=65535),(c&=65535)<<16|(p&=65535),this.unsigned)},N.mul=N.multiply,N.divide=function(e){if((e=!l(e)?g(e):e).isZero())throw Error("division by zero");var t,r;if(d)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?y((this.unsigned?d.div_u:d.div_s)(this.low,this.high,e.low,e.high),d.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?f:v;if(this.unsigned){if((e=!e.unsigned?e.toUnsigned():e).gt(this))return f;if(e.gt(this.shru(1)))return _;r=f}else{if(this.eq(C))return e.eq(b)||e.eq(E)?C:e.eq(C)?b:(n=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?b:E:(t=this.sub(e.mul(n)),n.add(t.div(e)));if(e.eq(C))return this.unsigned?f:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=v}for(t=this;t.gte(e);){for(var n=Math.max(1,Math.floor(t.toNumber()/e.toNumber())),o=Math.ceil(Math.log(n)/Math.LN2),i=o<=48?1:c(2,o-48),s=h(n),a=s.mul(e);a.isNegative()||a.gt(t);)a=(s=h(n-=i,this.unsigned)).mul(e);s.isZero()&&(s=b),r=r.add(s),t=t.sub(a)}return r},N.div=N.divide,N.modulo=function(e){return l(e)||(e=g(e)),d?y((this.unsigned?d.rem_u:d.rem_s)(this.low,this.high,e.low,e.high),d.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return y(~this.low,~this.high,this.unsigned)},N.and=function(e){return l(e)||(e=g(e)),y(this.low&e.low,this.high&e.high,this.unsigned)},N.or=function(e){return l(e)||(e=g(e)),y(this.low|e.low,this.high|e.high,this.unsigned)},N.xor=function(e){return l(e)||(e=g(e)),y(this.low^e.low,this.high^e.high,this.unsigned)},N.shiftLeft=function(e){return l(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?y(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):y(0,this.low<<e-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(e){return l(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?y(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):y(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(e){if(l(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?y(this.low>>>e|t<<32-e,t>>>e,this.unsigned):y(32===e?t:t>>>e-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?y(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:y(this.low,this.high,!0)},N.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},N.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,r,i){!function(e){var n=r;function o(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function t(e){function r(e,t){if(!(this instanceof r))return new r(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&o(this,t)}return(r.prototype=Object.create(Error.prototype)).constructor=r,Object.defineProperty(r.prototype,"name",{get:function(){return e}}),r.prototype.toString=function(){return this.name+": "+this.message},r}n.asPromise=i(52),n.base64=i(122),n.EventEmitter=i(123),n.float=i(124),n.inquire=i(53),n.utf8=i(125),n.pool=i(126),n.LongBits=i(127),n.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),n.global=n.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||0<(Array.isArray(r)?r:Object.keys(r)).length)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){e=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(e.lo,e.hi,t):e.toNumber(Boolean(t))},n.merge=o,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=t,n.ProtocolError=t("ProtocolError"),n.oneOfGetter=function(e){for(var r={},t=0;t<e.length;++t)r[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===r[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},n.oneOfSetter=function(r){return function(e){for(var t=0;t<r.length;++t)r[t]!==e&&delete this[r[t]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var r=n.Buffer;r?(n._Buffer_from=r.from!==Uint8Array.from&&r.from||function(e,t){return new r(e,t)},n._Buffer_allocUnsafe=r.allocUnsafe||function(e){return new r(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}.call(this,i(34))},function(e,t,r){e.exports=i;var a=r(9);((i.prototype=Object.create(a.prototype)).constructor=i).className="Enum";var n=r(11),o=r(1);function i(e,t,r,n,o){if(a.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=o||{},this.reserved=void 0,t)for(var i=Object.keys(t),s=0;s<i.length;++s)"number"==typeof t[i[s]]&&(this.valuesById[this.values[i[s]]=t[i[s]]]=i[s])}i.fromJSON=function(e,t){e=new i(e,t.values,t.options,t.comment,t.comments);return e.reserved=t.reserved,e},i.prototype.toJSON=function(e){e=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},i.prototype.add=function(e,t,r){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},i.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},i.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},i.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}(e.exports=n).prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,d,t){var n,r=t(85),i=t(38),l=t(87),s=t(88),o=t(89);"undefined"!=typeof ArrayBuffer&&(n=t(90));var a="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),c=a||u;d.protocol=3;var p=d.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=r(p),h={type:"error",data:"parser error"},y=t(91);function g(e,t,r){for(var o=new Array(e.length),n=s(e.length,r),i=0;i<e.length;i++)!function(r,e,n){t(e,function(e,t){o[r]=t,n(e,o)})}(i,e[i],n)}d.encodePacket=function(e,s,t,r){"function"==typeof s&&(r=s,s=!1),"function"==typeof t&&(r=t,t=null);var n=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer)return function(e,t){if(!s)return d.encodeBase64Packet(e,t);var r=e.data,n=new Uint8Array(r),o=new Uint8Array(1+r.byteLength);o[0]=p[e.type];for(var i=0;i<n.length;i++)o[i+1]=n[i];return t(o.buffer)}(e,r);if(void 0!==y&&n instanceof y)return function(e,t,r){if(!t)return d.encodeBase64Packet(e,r);if(c)return function(e,t,r){if(!t)return d.encodeBase64Packet(e,r);var n=new FileReader;return n.onload=function(){d.encodePacket({type:e.type,data:n.result},t,!0,r)},n.readAsArrayBuffer(e.data)}(e,t,r);t=new Uint8Array(1);return t[0]=p[e.type],r(new y([t.buffer,e.data]))}(e,s,r);if(n&&n.base64)return r("b"+d.packets[e.type]+e.data.data);n=p[e.type];return void 0!==e.data&&(n+=t?o.encode(String(e.data),{strict:!1}):String(e.data)),r(""+n)},d.encodeBase64Packet=function(t,r){var n,o="b"+d.packets[t.type];if(void 0!==y&&t.data instanceof y){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];r(o+e)},i.readAsDataURL(t.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),a=new Array(s.length),u=0;u<s.length;u++)a[u]=s[u];n=String.fromCharCode.apply(null,a)}return o+=btoa(n),r(o)},d.decodePacket=function(e,t,r){if(void 0===e)return h;if("string"==typeof e){if("b"===e.charAt(0))return d.decodeBase64Packet(e.substr(1),t);if(r&&!1===(e=function(e){try{e=o.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return h;var n=e.charAt(0);return Number(n)==n&&f[n]?1<e.length?{type:f[n],data:e.substring(1)}:{type:f[n]}:h}n=new Uint8Array(e)[0],e=l(e,1);return y&&"blob"===t&&(e=new y([e])),{type:f[n],data:e}},d.decodeBase64Packet=function(e,t){var r=f[e.charAt(0)];if(!n)return{type:r,data:{base64:!0,data:e.substr(1)}};e=n.decode(e.substr(1));return{type:r,data:e="blob"===t&&y?new y([e]):e}},d.encodePayload=function(e,r,n){"function"==typeof r&&(n=r,r=null);var o=i(e);return r&&o?y&&!c?d.encodePayloadAsBlob(e,n):d.encodePayloadAsArrayBuffer(e,n):e.length?void g(e,function(e,t){d.encodePacket(e,!!o&&r,!1,function(e){t(null,e.length+":"+e)})},function(e,t){return n(t.join(""))}):n("0:")},d.decodePayload=function(e,t,r){if("string"!=typeof e)return d.decodePayloadAsBinary(e,t,r);if("function"==typeof t&&(r=t,t=null),""===e)return r(h,0,1);for(var n,o,i="",s=0,a=e.length;s<a;s++){var u=e.charAt(s);if(":"===u){if(""===i||i!=(n=Number(i)))return r(h,0,1);if(i!=(o=e.substr(s+1,n)).length)return r(h,0,1);if(o.length){if(o=d.decodePacket(o,t,!1),h.type===o.type&&h.data===o.data)return r(h,0,1);if(!1===r(o,s+n,a))return}s+=n,i=""}else i+=u}return""!==i?r(h,0,1):void 0},d.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));g(e,function(e,t){d.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,t){var r=t.reduce(function(e,t){return e+(t="string"==typeof t?t.length:t.byteLength).toString().length+t+2},0),s=new Uint8Array(r),a=0;return t.forEach(function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);r=n.buffer}s[a++]=t?0:1;for(var i=r.byteLength.toString(),o=0;o<i.length;o++)s[a++]=parseInt(i[o]);for(s[a++]=255,n=new Uint8Array(r),o=0;o<n.length;o++)s[a++]=n[o]}),n(s.buffer)})},d.encodePayloadAsBlob=function(e,r){g(e,function(e,s){d.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);e=r.buffer,t[0]=0}for(var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),i=new Uint8Array(o.length+1),n=0;n<o.length;n++)i[n]=parseInt(o[n]);i[o.length]=255,y&&(t=new y([t.buffer,i.buffer,e]),s(null,t))})},function(e,t){return r(new y(t))})},d.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var t=e,o=[];0<t.byteLength;){for(var i=new Uint8Array(t),s=0===i[0],a="",u=1;255!==i[u];u++){if(310<a.length)return n(h,0,1);a+=i[u]}var t=l(t,2+a.length),a=parseInt(a),c=l(t,0,a);if(s)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(e){for(var p=new Uint8Array(c),c="",u=0;u<p.length;u++)c+=String.fromCharCode(p[u])}o.push(c),t=l(t,a)}var f=o.length;o.forEach(function(e,t){n(d.decodePacket(e,r,!0),t,f)})}},function(e,t,r){(e.exports=o).className="ReflectionObject";var n,s=r(1);function o(e,t){if(!s.isString(e))throw TypeError("name must be a string");if(t&&!s.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;e=e.root;e instanceof n&&e._handleAdd(this)},o.prototype.onRemove=function(e){e=e.root;e instanceof n&&e._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(t,e,r){this.parsedOptions||(this.parsedOptions=[]);var n,o,i=this.parsedOptions;return r?(o=i.find(function(e){return Object.prototype.hasOwnProperty.call(e,t)}))?(n=o[t],s.setProperty(n,r,e)):((o={})[t]=s.setProperty({},r,e),i.push(o)):((o={})[t]=e,i.push(o)),this},o.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){n=e}},function(e,t,r){e.exports=s;var a=r(9);((s.prototype=Object.create(a.prototype)).constructor=s).className="Field";var n,o=r(6),u=r(12),c=r(1),p=/^required|optional|repeated$/;function s(e,t,r,n,o,i,s){if(c.isObject(n)?(s=o,i=n,n=o=void 0):c.isObject(o)&&(s=i,i=o,o=void 0),a.call(this,e,i),!c.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!c.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!p.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!c.isString(o))throw TypeError("extend must be a string");this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=o||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!c.Long&&void 0!==u.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=s}s.fromJSON=function(e,t){return new s(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(s.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),s.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),a.prototype.setOption.call(this,e,t,r)},s.prototype.toJSON=function(e){e=!!e&&Boolean(e.keepComments);return c.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},s.prototype.resolve=function(){return this.resolved?this:(void 0===(this.typeDefault=u.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long?(this.typeDefault=c.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(c.base64.test(this.typeDefault)?c.base64.decode(this.typeDefault,e=c.newBuffer(c.base64.length(this.typeDefault)),0):c.utf8.write(this.typeDefault,e=c.newBuffer(c.utf8.length(this.typeDefault)),0),this.typeDefault=e),this.map?this.defaultValue=c.emptyObject:this.repeated?this.defaultValue=c.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),a.prototype.resolve.call(this));var e},s.d=function(r,n,o,i){return"function"==typeof n?n=c.decorateType(n).name:n&&"object"==typeof n&&(n=c.decorateEnum(n).name),function(e,t){c.decorateType(e.constructor).add(new s(t,r,n,o,{default:i}))}},s._configure=function(e){n=e}},function(e,t,r){e.exports=p;var n=r(9);((p.prototype=Object.create(n.prototype)).constructor=p).className="Namespace";var o,i,s,a=r(10),u=r(1);function c(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function p(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null}function f(e){return e._nestedArray=null,e}p.fromJSON=function(e,t){return new p(e,t.options).addJSON(t.nested)},p.arrayToJSON=c,p.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},p.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(p.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),p.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},p.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?o:void 0!==t.values?s:void 0!==t.methods?i:void 0!==t.id?a:p).fromJSON(r[n],t));return this},p.prototype.get=function(e){return this.nested&&this.nested[e]||null},p.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},p.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof o||e instanceof s||e instanceof i||e instanceof p))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof p&&e instanceof p)||t instanceof o||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return(this.nested[e.name]=e).onAdd(this),f(this)},p.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),f(this)},p.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;0<e.length;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof p))throw Error("path conflicts with non-namespace objects")}else r.add(r=new p(n))}return t&&r.addJSON(t),r},p.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof p?e[t++].resolveAll():e[t++].resolve();return this.resolve()},p.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||-1<t.indexOf(n.constructor))return n}else if(n instanceof p&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof p&&(n=this._nestedArray[o].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},p.prototype.lookupType=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such type: "+e);return t},p.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},p.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[o,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},p.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},p._configure=function(e,t,r){o=e,i=t,s=r}},function(e,t,r){var t=t,r=r(1),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function n(e,t){var r=0,n={};for(t|=0;r<e.length;)n[o[r+t]]=e[r++];return n}t.basic=n([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),t.defaults=n([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",r.emptyArray,null]),t.long=n([0,0,0,1,1],7),t.mapKey=n([0,0,0,5,5,0,0,0,1,1,0,2],2),t.packed=n([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(e,t,r){e.exports=r(98)},function(r,o,n){!function(t){function e(){var e;try{e=o.storage.debug}catch(e){}return e=!e&&void 0!==t&&"env"in t?t.env.DEBUG:e}(o=r.exports=n(74)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t,r,n=this.useColors;e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+o.humanize(this.diff),n&&(n="color: "+this.color,e.splice(1,0,n,"color: inherit"),e[r=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(r=t))}),e.splice(r,0,n))},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=e,o.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(e())}.call(this,n(15))},function(e,t){var r,n,e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var a,u=[],c=!1,p=-1;function f(){c&&a&&(c=!1,a.length?u=a.concat(u):p=-1,u.length&&d())}function d(){if(!c){var e=s(f);c=!0;for(var t=u.length;t;){for(a=u,u=[];++p<t;)a&&a[p].run();p=-1,t=u.length}a=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function h(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new l(e,t)),1!==u.length||c||s(d)},l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=h,e.addListener=h,e.once=h,e.off=h,e.removeListener=h,e.removeAllListeners=h,e.emit=h,e.prependListener=h,e.prependOnceListener=h,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t){t.encode=function(e){var t,r="";for(t in e)e.hasOwnProperty(t)&&(r.length&&(r+="&"),r+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r},t.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(r,o,n){!function(t){function e(){var e;try{e=o.storage.debug}catch(e){}return e=!e&&void 0!==t&&"env"in t?t.env.DEBUG:e}(o=r.exports=n(92)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t,r,n=this.useColors;e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+o.humanize(this.diff),n&&(n="color: "+this.color,e.splice(1,0,n,"color: inherit"),e[r=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(r=t))}),e.splice(r,0,n))},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=e,o.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(e())}.call(this,n(15))},function(e,s,t){const r=t(116),n=t(117),a=t(118),i=t(119);function u(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?(t.strict?r:encodeURIComponent)(e):e}function p(e,t){return t.decode?n(e):e}function f(e){var t=e.indexOf("#");return e=-1!==t?e.slice(0,t):e}function o(e){var t=(e=f(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function d(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function l(e,r){u((r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r)).arrayFormatSeparator);const n=function(i){let n;switch(i.arrayFormat){case"index":return(e,t,r)=>{n=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),n?(void 0===r[e]&&(r[e]={}),r[e][n[1]]=t):r[e]=t};case"bracket":return(e,t,r)=>{n=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),n?void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=[t]:r[e]=t};case"comma":case"separator":return(e,t,r)=>{var n="string"==typeof t&&t.includes(i.arrayFormatSeparator),o="string"==typeof t&&!n&&p(t,i).includes(i.arrayFormatSeparator);t=o?p(t,i):t;t=n||o?t.split(i.arrayFormatSeparator).map(e=>p(e,i)):null===t?t:p(t,i);r[e]=t};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(r),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;for(const i of e.split("&"))if(""!==i){let[e,t]=a(r.decode?i.replace(/\+/g," "):i,"=");t=void 0===t?null:["comma","separator"].includes(r.arrayFormat)?t:p(t,r),n(p(e,r),t,o)}for(const e of Object.keys(o)){const n=o[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=d(n[e],r);else o[e]=d(n,r)}return!1===r.sort?o:(!0===r.sort?Object.keys(o).sort():Object.keys(o).sort(r.sort)).reduce((e,t)=>{var r=o[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}s.extract=o,s.parse=l,s.stringify=(r,n)=>{if(!r)return"";u((n=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},n)).arrayFormatSeparator);const e=e=>n.skipNull&&null==r[e]||n.skipEmptyString&&""===r[e],o=function(o){switch(o.arrayFormat){case"index":return n=>(e,t)=>{const r=e.length;return void 0===t||o.skipNull&&null===t||o.skipEmptyString&&""===t?e:null===t?[...e,[c(n,o),"[",r,"]"].join("")]:[...e,[c(n,o),"[",c(r,o),"]=",c(t,o)].join("")]};case"bracket":return r=>(e,t)=>void 0===t||o.skipNull&&null===t||o.skipEmptyString&&""===t?e:null===t?[...e,[c(r,o),"[]"].join("")]:[...e,[c(r,o),"[]=",c(t,o)].join("")];case"comma":case"separator":return r=>(e,t)=>null==t||0===t.length?e:0===e.length?[[c(r,o),"=",c(t,o)].join("")]:[[e,c(t,o)].join(o.arrayFormatSeparator)];default:return r=>(e,t)=>void 0===t||o.skipNull&&null===t||o.skipEmptyString&&""===t?e:null===t?[...e,c(r,o)]:[...e,[c(r,o),"=",c(t,o)].join("")]}}(n),t={};for(const n of Object.keys(r))e(n)||(t[n]=r[n]);const i=Object.keys(t);return!1!==n.sort&&i.sort(n.sort),i.map(e=>{const t=r[e];return void 0===t?"":null===t?c(e,n):Array.isArray(t)?t.reduce(o(e),[]).join("&"):c(e,n)+"="+c(t,n)}).filter(e=>0<e.length).join("&")},s.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=a(e,"#");return Object.assign({url:r.split("?")[0]||"",query:l(o(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:p(n,t)}:{})},s.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0},t);var r=f(e.url).split("?")[0]||"",n=s.extract(e.url),n=s.parse(n,{sort:!1}),n=Object.assign(n,e.query);let o=s.stringify(n,t);o=o&&"?"+o;let i=function(e){let t="";var r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(i="#"+c(e.fragmentIdentifier,t)),`${r}${o}${i}`},s.pick=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0},r);var{url:n,query:o,fragmentIdentifier:e}=s.parseUrl(e,r);return s.stringifyUrl({url:n,query:i(o,t),fragmentIdentifier:e},r)},s.exclude=(e,r,t)=>{var n=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return s.pick(e,n,t)}},function(e,t){var o=36e5,i=864e5;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(r,e){e=e||{};var t,n=typeof r;if("string"==n&&0<r.length)return function(e){if(!(100<(e=String(r)).length)){e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"days":case"day":case"d":return t*i;case"hours":case"hour":case"hrs":case"hr":case"h":return t*o;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}(r);if("number"==n&&!1===isNaN(r))return e.long?s(t=r,i,"day")||s(t,o,"hour")||s(t,6e4,"minute")||s(t,1e3,"second")||t+" ms":i<=(t=r)?Math.round(t/i)+"d":o<=t?Math.round(t/o)+"h":6e4<=t?Math.round(t/6e4)+"m":1e3<=t?Math.round(t/1e3)+"s":t+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},function(e,s,t){var a=t(75)("socket.io-parser"),r=t(7),n=t(77),u=t(32),o=t(33);function i(){}s.protocol=4,s.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],s.CONNECT=0,s.DISCONNECT=1,s.EVENT=2,s.ACK=3,s.ERROR=4,s.BINARY_EVENT=5,s.BINARY_ACK=6,s.Encoder=i,s.Decoder=f;var c=s.ERROR+'"encode error"';function p(e){var t=""+e.type;if(s.BINARY_EVENT!==e.type&&s.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var r=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===r)return c;t+=r}return a("encoded %j as %s",e,t),t}function f(){this.reconstructor=null}function d(e){this.reconPack=e,this.buffers=[]}function l(e){return{type:s.ERROR,data:"parser error: "+e}}i.prototype.encode=function(e,t){var r;a("encoding packet %j",e),s.BINARY_EVENT===e.type||s.BINARY_ACK===e.type?(r=t,n.removeBlobs(e,function(e){var t=n.deconstructPacket(e),e=p(t.packet),t=t.buffers;t.unshift(e),r(t)})):t([p(e)])},r(f.prototype),f.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t=0,r={type:Number(e.charAt(0))};if(null==s.types[r.type])return l("unknown packet type "+r.type);if(s.BINARY_EVENT===r.type||s.BINARY_ACK===r.type){for(var n=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(n,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(t+1)){for(n=t+1;++t&&","!==(i=e.charAt(t))&&t!==e.length;);r.nsp=e.substring(n,t)}else r.nsp="/";var i,o=e.charAt(t+1);if(""!==o&&Number(o)==o){for(n=t+1;++t;){if(null==(i=e.charAt(t))||Number(i)!=i){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){n=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!1===n||r.type!==s.ERROR&&!u(n))return l("invalid payload");r.data=n}return a("decoded %s as %j",e,r),r}(e),s.BINARY_EVENT===t.type||s.BINARY_ACK===t.type?(this.reconstructor=new d(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!o(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length!==this.reconPack.attachments)return null;e=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,T,I){!function(e){var a=I(78),i=I(79),s=I(80);function r(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=f.prototype:(e=null===e?new f(t):e).length=t,e}function f(e,t,r){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(e,t,r);if("number"!=typeof e)return n(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}function n(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),f.TYPED_ARRAY_SUPPORT?(e=t).__proto__=f.prototype:e=p(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if(!f.isEncoding(r="string"!=typeof r||""===r?"utf8":r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|l(t,r),r=(e=o(e,n)).write(t,r);return e=r!==n?e.slice(0,r):e}(e,t,r):function(e,t){if(f.isBuffer(t)){var r=0|d(t.length);return 0===(e=o(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?o(e,0):p(e,t);if("Buffer"===t.type&&s(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t){if(u(t),e=o(e,t<0?0:0|d(t)),!f.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|d(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function l(e,t){if(f.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var r=(e="string"!=typeof e?""+e:e).length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return O(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return S(e).length;default:if(n)return O(e).length;t=(""+t).toLowerCase(),n=!0}}function t(e,t,r){var n,o,i,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!r||r<0||n<r)&&(r=n);for(var o="",i=t=!t||t<0?0:t;i<r;++i)o+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[i]);return o}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}(this,t,r);case"base64":return n=this,i=r,0===(o=t)&&i===n.length?a.fromByteArray(n):a.fromByteArray(n.slice(o,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}(this,t,r);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function h(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?o?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,o);if("number"==typeof t)return t&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):g(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,o){var i=1,s=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,r/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,p=r;p<s;p++)if(u(e,p)===u(t,-1===c?0:p-c)){if(p-(c=-1===c?p:c)+1===a)return c*i}else-1!==c&&(p-=p-c),c=-1;else for(p=r=s<r+a?s-a:r;0<=p;p--){for(var f=!0,d=0;d<a;d++)if(u(e,p+d)!==u(t,d)){f=!1;break}if(f)return p}return-1}function m(e,t,r,n){return R(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function v(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,u,c=e[o],p=null,f=239<c?4:223<c?3:191<c?2:1;if(o+f<=r)switch(f){case 1:c<128&&(p=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(p=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(p=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(p=u)}null===p?(p=65533,f=1):65535<p&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),o+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function b(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,r,n,o,i){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function E(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function w(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function A(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(e,t,r,n,o){return o||A(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,o){return o||A(e,0,r,8),i.write(e,t,r,n,52,8),r+8}T.Buffer=f,T.SlowBuffer=function(e){return f.alloc(+(e=+e!=e?0:e))},T.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),T.kMaxLength=r(),f.poolSize=8192,f._augment=function(e){return e.__proto__=f.prototype,e},f.from=function(e,t,r){return n(null,e,t,r)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(e,t,r){return t=t,r=r,u(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?o(null,e).fill(t,r):o(null,e).fill(t):o(null,e)},f.allocUnsafe=function(e){return c(null,e)},f.allocUnsafeSlow=function(e){return c(null,e)},f.isBuffer=function(e){return!(null==e||!e._isBuffer)},f.compare=function(e,t){if(!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var r=f.allocUnsafe(t),n=0,o=0;o<e.length;++o){var i=e[o];if(!f.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n),n+=i.length}return r},f.byteLength=l,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},f.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?v(this,0,e):t.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",t=T.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},f.prototype.compare=function(e,t,r,n,o){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=t)return 0;if(o<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(n,o),c=e.slice(t,r),p=0;p<a;++p)if(u[p]!==c[p]){i=u[p],s=c[p];break}return i<s?-1:s<i?1:0},f.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||o<r)&&(r=o),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,a,u,c,p,f=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var o=e.length-r;if((!n||(n=Number(n))>o)&&(n=o),(o=t.length)%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[r+i]=s}return i}(this,e,t,r);case"utf8":case"utf-8":return c=t,p=r,R(O(e,(u=this).length-c),u,c,p);case"ascii":return m(this,e,t,r);case"latin1":case"binary":return m(this,e,t,r);case"base64":return i=this,s=t,a=r,R(S(e),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i=t,s=r,R(function(e,t){for(var r,n,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o.push(r%256),o.push(n);return o}(e,(a=this).length-i),a,i,s);default:if(f)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),f.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=f.prototype;else for(var n=t-e,o=new f(n,void 0),i=0;i<n;++i)o[i]=this[i+e];return o},f.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||b(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},f.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||b(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},f.prototype.readUInt8=function(e,t){return t||b(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return t||b(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return t||b(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return t||b(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||b(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||b(e,t,this.length);for(var n=t,o=1,i=this[e+--n];0<n&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},f.prototype.readInt8=function(e,t){return t||b(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){t||b(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(e,t){t||b(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(e,t){return t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return t||b(e,4,this.length),i.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return t||b(e,4,this.length),i.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return t||b(e,8,this.length),i.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return t||b(e,8,this.length),i.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||_(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},f.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||_(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+r},f.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,1,255,0),f.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},f.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},f.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):w(this,e,t,!0),t+4},f.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},f.prototype.writeIntLE=function(e,t,r,n){e=+e,t|=0,n||_(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){e=+e,t|=0,n||_(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,1,127,-128),f.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},f.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},f.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},f.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},f.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},f.prototype.writeFloatLE=function(e,t,r){return C(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return C(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o,i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&r<t&&t<n)for(o=i-1;0<=o;--o)e[o+t]=this[o+r];else if(i<1e3||!f.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},f.prototype.fill=function(e,t,r,n){if("string"==typeof e){var o;if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length&&(o=e.charCodeAt(0))<256&&(e=o),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=t;a<r;++a)this[a]=e;else for(var i=f.isBuffer(e)?e:O(new f(e,n).toString()),s=i.length,a=0;a<r-t;++a)this[a+t]=i[a%s];return this};var k=/[^+\/0-9A-Za-z-_]/g;function O(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,r<128){if(--t<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function S(e){return a.toByteArray(function(e){if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(k,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}.call(this,I(34))},function(e,t,r){var o=r(83),i=r(24);e.exports=function(e){var t=e.xdomain,r=e.xscheme,n=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||o))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!r&&n)return new XDomainRequest}catch(e){}if(!t)try{return new i[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,r){var n=r(8);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}r(7)((e.exports=o).prototype),o.prototype.onError=function(e,t){e=new Error(e);return e.type="TransportError",e.description=t,this.emit("error",e),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){e=n.decodePacket(e,this.socket.binaryType);this.onPacket(e)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(u,e,c){!function(e){var n=c(3),r=c(103),o=c(46),t={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s="undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e)?c(47):s,transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(i(t,"application/json"),function(e){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,t=t&&t.forcedJSONParsing,r=!r&&"json"===this.responseType;if(r||t&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(e){a.headers[e]={}}),n.forEach(["post","put","patch"],function(e){a.headers[e]=n.merge(t)}),u.exports=a}.call(this,c(15))},function(e,t,r){e.exports=f;var n,o=r(5),i=o.LongBits,s=o.base64,a=o.utf8;function u(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function p(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}function d(){return o.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}}function l(e,t,r){t[r]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}f.create=d(),f.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(e,t,r){return this.tail=this.tail.next=new u(e,t,r),this.len+=t,this},(h.prototype=Object.create(u.prototype)).fn=function(e,t,r){for(;127<e;)t[r++]=127&e|128,e>>>=7;t[r]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(y,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.int64=f.prototype.uint64=function(e){e=i.from(e);return this._push(y,e.length(),e)},f.prototype.sint64=function(e){e=i.from(e).zzEncode();return this._push(y,e.length(),e)},f.prototype.bool=function(e){return this._push(l,1,e?1:0)},f.prototype.sfixed32=f.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},f.prototype.sfixed64=f.prototype.fixed64=function(e){e=i.from(e);return this._push(g,4,e.lo)._push(g,4,e.hi)},f.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var m=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};f.prototype.bytes=function(e){var t,r=e.length>>>0;return r?(o.isString(e)&&(t=f.alloc(r=s.length(e)),s.decode(e,t,0),e=t),this.uint32(r)._push(m,r,e)):this._push(l,1,0)},f.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(l,1,0)},f.prototype.fork=function(){return this.states=new p(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},f._configure=function(e){n=e,f.create=d(),n._configure()}},function(e,t,r){e.exports=u;var n,o=r(5),i=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}function c(){return o.Buffer?function(e){return(u.create=function(e){return o.Buffer.isBuffer(e)?new n(e):f(e)})(e)}:f}var p,f="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")};function d(){var e=new i(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function l(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw a(this,8);return new i(l(this.buf,this.pos+=4),l(this.buf,this.pos+=4))}u.create=c(),u.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,u.prototype.uint32=(p=4294967295,function(){if(p=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return p;if(p=(p|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return p;if(p=(p|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return p;if(p=(p|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return p;if(p=(p|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return p;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return p}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return l(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|l(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){n=e,u.create=c(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(u.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},function(e,t,r){e.exports=s;var o=r(9);((s.prototype=Object.create(o.prototype)).constructor=s).className="OneOf";var n=r(10),i=r(1);function s(e,t,r,n){if(Array.isArray(t)||(r=t,t=void 0),o.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){e=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),a(e.partOf=this),this},s.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),-1<(t=this.oneof.indexOf(e.name))&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){o.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this).fieldsArray.push(r)}a(this)},s.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);o.prototype.onRemove.call(this,e)},s.d=function(){for(var r=new Array(arguments.length),e=0;e<arguments.length;)r[e]=arguments[e++];return function(e,t){i.decorateType(e.constructor).add(new s(t,r)),Object.defineProperty(e,t,{get:i.oneOfGetter(r),set:i.oneOfSetter(r)})}}},function(e,t,r){e.exports=o;var n=r(5);function o(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}o.create=function(e){return this.$type.create(e)},o.encode=function(e,t){return this.$type.encode(e,t)},o.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},o.decode=function(e){return this.$type.decode(e)},o.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},o.verify=function(e){return this.$type.verify(e)},o.fromObject=function(e){return this.$type.fromObject(e)},o.toObject=function(e,t){return this.$type.toObject(e,t)},o.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},function(e,t){var u=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));for(var o,i=u.exec(e||""),s={},a=14;a--;)s[c[a]]=i[a]||"";return-1!=r&&-1!=n&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=(n=s.path,t=n.replace(/\/{2,9}/g,"/").split("/"),"/"!=n.substr(0,1)&&0!==n.length||t.splice(0,1),"/"==n.substr(n.length-1,1)&&t.splice(t.length-1,1),t),s.queryKey=(t=s.query,o={},t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(o[t]=r)}),o),s}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){!function(t){e.exports=function(e){return r&&t.isBuffer(e)||n&&(e instanceof ArrayBuffer||(e=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer))};var r="function"==typeof t&&"function"==typeof t.isBuffer,n="function"==typeof ArrayBuffer}.call(this,r(22).Buffer)},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var u=r(81),i=r(41),n=r(7),o=r(21),c=r(42),s=r(43),p=r(14)("socket.io-client:manager"),a=r(40),f=r(97),d=Object.prototype.hasOwnProperty;function l(e,t){if(!(this instanceof l))return new l(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];e=t.parser||o;this.encoder=new e.Encoder,this.decoder=new e.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}(e.exports=l).prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},l.prototype.updateSocketIds=function(){for(var e in this.nsps)d.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},l.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},n(l.prototype),l.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},l.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},l.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},l.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},l.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},l.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},l.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},l.prototype.open=l.prototype.connect=function(r,e){if(p("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;p("opening %s",this.uri),this.engine=u(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o,i,s=c(t,"open",function(){n.onopen(),r&&r()}),a=c(t,"error",function(e){var t;p("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),r?((t=new Error("Connection error")).data=e,r(t)):n.maybeReconnectOnOpen()});return!1!==this._timeout&&(o=this._timeout,p("connect attempt will timeout after %d",o),0===o&&s.destroy(),i=setTimeout(function(){p("connect attempt timed out after %d",o),s.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",o)},o),this.subs.push({destroy:function(){clearTimeout(i)}})),this.subs.push(s),this.subs.push(a),this},l.prototype.onopen=function(){p("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",s(this,"ondata"))),this.subs.push(c(e,"ping",s(this,"onping"))),this.subs.push(c(e,"pong",s(this,"onpong"))),this.subs.push(c(e,"error",s(this,"onerror"))),this.subs.push(c(e,"close",s(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",s(this,"ondecoded")))},l.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},l.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},l.prototype.ondata=function(e){this.decoder.add(e)},l.prototype.ondecoded=function(e){this.emit("packet",e)},l.prototype.onerror=function(e){p("error",e),this.emitAll("error",e)},l.prototype.socket=function(e,t){var r,n=this.nsps[e];function o(){~a(r.connecting,n)||r.connecting.push(n)}return n||(n=new i(this,e,t),this.nsps[e]=n,r=this,n.on("connecting",o),n.on("connect",function(){n.id=r.generateId(e)}),this.autoConnect&&o()),n},l.prototype.destroy=function(e){e=a(this.connecting,e);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},l.prototype.packet=function(r){p("writing packet %j",r);var n=this;r.query&&0===r.type&&(r.nsp+="?"+r.query),n.encoding?n.packetBuffer.push(r):(n.encoding=!0,this.encoder.encode(r,function(e){for(var t=0;t<e.length;t++)n.engine.write(e[t],r.options);n.encoding=!1,n.processPacketQueue()}))},l.prototype.processPacketQueue=function(){var e;0<this.packetBuffer.length&&!this.encoding&&(e=this.packetBuffer.shift(),this.packet(e))},l.prototype.cleanup=function(){p("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},l.prototype.close=l.prototype.disconnect=function(){p("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},l.prototype.onclose=function(e){p("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},l.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e,t,r=this;this.backoff.attempts>=this._reconnectionAttempts?(p("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(e=this.backoff.duration(),p("will wait %dms before reconnect attempt",e),this.reconnecting=!0,t=setTimeout(function(){r.skipReconnect||(p("attempting reconnect"),r.emitAll("reconnect_attempt",r.backoff.attempts),r.emitAll("reconnecting",r.backoff.attempts),r.skipReconnect||r.open(function(e){e?(p("reconnect attempt error"),r.reconnecting=!1,r.reconnect(),r.emitAll("reconnect_error",e.data)):(p("reconnect success"),r.onreconnect())}))},e),this.subs.push({destroy:function(){clearTimeout(t)}}))},l.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,r){var s=r(23),a=r(84),u=r(93),r=r(94);t.polling=function(e){var t,r,n=!1,o=!1,i=!1!==e.jsonp;if("undefined"!=typeof location&&(t="https:"===location.protocol,r=(r=location.port)||(t?443:80),n=e.hostname!==location.hostname||r!==e.port,o=e.secure!==t),e.xdomain=n,e.xscheme=o,"open"in new s(e)&&!e.forceJSONP)return new a(e);if(!i)throw new Error("JSONP disabled");return new u(e)},t.websocket=r},function(e,t,r){var n=r(25),o=r(16),i=r(8),s=r(17),a=r(39),u=r(18)("engine.io-client:polling");e.exports=p;var c=null!=new(r(23))({xdomain:!1}).responseType;function p(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),n.call(this,e)}s(p,n),p.prototype.name="polling",p.prototype.doOpen=function(){this.poll()},p.prototype.pause=function(e){var t,r=this;function n(){u("paused"),r.readyState="paused",e()}this.readyState="pausing",this.polling||!this.writable?(t=0,this.polling&&(u("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){u("pre-pause polling complete"),--t||n()})),this.writable||(u("we are currently writing - waiting to pause"),t++,this.once("drain",function(){u("pre-pause writing complete"),--t||n()}))):n()},p.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},p.prototype.onData=function(e){var n=this;u("polling got data %s",e),i.decodePayload(e,this.socket.binaryType,function(e,t,r){return"opening"===n.readyState&&"open"===e.type&&n.onOpen(),"close"===e.type?(n.onClose(),!1):void n.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},p.prototype.doClose=function(){var e=this;function t(){u("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},p.prototype.write=function(e){var t=this;this.writable=!1;function r(){t.writable=!0,t.emit("drain")}i.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!==Number(this.port)||"http"==t&&80!==Number(this.port))&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e}},function(t,e,r){!function(i){var s=r(86),e=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===e.call(Blob),u="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===e.call(File);t.exports=function e(t){if(!t||"object"!=typeof t)return!1;if(s(t)){for(var r=0,n=t.length;r<n;r++)if(e(t[r]))return!0;return!1}if("function"==typeof i&&i.isBuffer&&i.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||a&&t instanceof Blob||u&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0;return!1}}.call(this,r(22).Buffer)},function(e,t,r){var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},s=0,a=0;function u(e){for(var t="";t=o[e%64]+t,0<(e=Math.floor(e/64)););return t}function c(){var e=u(+new Date);return e!==n?(s=0,n=e):e+"."+u(s++)}for(;a<64;a++)i[o[a]]=a;c.encode=u,c.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+i[e.charAt(a)];return t},e.exports=c},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,r){var o=r(21),n=r(7),i=r(96),s=r(42),a=r(43),u=r(14)("socket.io-client:socket"),c=r(16),p=r(38);e.exports=l;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=n.prototype.emit;function l(e,t,r){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}n(l.prototype),l.prototype.subEvents=function(){var e;this.subs||(e=this.io,this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))])},l.prototype.open=l.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},l.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},l.prototype.emit=function(e){if(f.hasOwnProperty(e))return d.apply(this,arguments),this;var t=i(arguments),e={type:(void 0!==this.flags.binary?this.flags.binary:p(t))?o.BINARY_EVENT:o.EVENT,data:t,options:{}};return e.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),e.id=this.ids++),this.connected?this.packet(e):this.sendBuffer.push(e),this.flags={},this},l.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},l.prototype.onopen=function(){var e;u("transport is open - connecting"),"/"!==this.nsp&&(this.query?(e="object"==typeof this.query?c.encode(this.query):this.query,u("sending connect packet with query %s",e),this.packet({type:o.CONNECT,query:e})):this.packet({type:o.CONNECT}))},l.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},l.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===o.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},l.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},l.prototype.ack=function(t){var r=this,n=!1;return function(){var e;n||(n=!0,e=i(arguments),u("sending ack %j",e),r.packet({type:p(e)?o.BINARY_ACK:o.ACK,id:t,data:e}))}},l.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},l.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},l.prototype.emitBuffered=function(){for(var e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},l.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},l.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},l.prototype.close=l.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},l.prototype.compress=function(e){return this.flags.compress=e,this},l.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("function"!=typeof(t="string"==typeof t?e[t]:t))throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,r){e.exports=function(r,n){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return r.apply(n,e)}}},function(e,t,r){var o=r(3);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var n,r=r?r(t):o.isURLSearchParams(t)?t.toString():(n=[],o.forEach(t,function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),n.push(i(t)+"="+i(e))}))}),n.join("&"));return r&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r),e}},function(e,t,r){e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){var f=r(3),d=r(104),l=r(105),h=r(45),y=r(106),g=r(109),m=r(110),v=r(48);e.exports=function(p){return new Promise(function(t,r){var n=p.data,o=p.headers,i=p.responseType;f.isFormData(n)&&delete o["Content-Type"];var e,s=new XMLHttpRequest;p.auth&&(e=p.auth.username||"",u=p.auth.password?unescape(encodeURIComponent(p.auth.password)):"",o.Authorization="Basic "+btoa(e+":"+u));var a,u=y(p.baseURL,p.url);function c(){var e;s&&(e="getAllResponseHeaders"in s?g(s.getAllResponseHeaders()):null,e={data:i&&"text"!==i&&"json"!==i?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:e,config:p,request:s},d(t,r,e),s=null)}s.open(p.method.toUpperCase(),h(u,p.params,p.paramsSerializer),!0),s.timeout=p.timeout,"onloadend"in s?s.onloadend=c:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(c)},s.onabort=function(){s&&(r(v("Request aborted",p,"ECONNABORTED",s)),s=null)},s.onerror=function(){r(v("Network Error",p,null,s)),s=null},s.ontimeout=function(){var e="timeout of "+p.timeout+"ms exceeded";p.timeoutErrorMessage&&(e=p.timeoutErrorMessage),r(v(e,p,p.transitional&&p.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",s)),s=null},f.isStandardBrowserEnv()&&(a=(p.withCredentials||m(u))&&p.xsrfCookieName?l.read(p.xsrfCookieName):void 0)&&(o[p.xsrfHeaderName]=a),"setRequestHeader"in s&&f.forEach(o,function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:s.setRequestHeader(t,e)}),f.isUndefined(p.withCredentials)||(s.withCredentials=!!p.withCredentials),i&&"json"!==i&&(s.responseType=p.responseType),"function"==typeof p.onDownloadProgress&&s.addEventListener("progress",p.onDownloadProgress),"function"==typeof p.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",p.onUploadProgress),p.cancelToken&&p.cancelToken.promise.then(function(e){s&&(s.abort(),r(e),s=null)}),n=n||null,s.send(n)})}},function(e,t,r){var i=r(46);e.exports=function(e,t,r,n,o){e=new Error(e);return i(e,t,r,n,o)}},function(e,t,r){e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){var p=r(3);e.exports=function(t,r){r=r||{};var n={},e=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return p.isPlainObject(e)&&p.isPlainObject(t)?p.merge(e,t):p.isPlainObject(t)?p.merge({},t):p.isArray(t)?t.slice():t}function u(e){p.isUndefined(r[e])?p.isUndefined(t[e])||(n[e]=a(void 0,t[e])):n[e]=a(t[e],r[e])}p.forEach(e,function(e){p.isUndefined(r[e])||(n[e]=a(void 0,r[e]))}),p.forEach(o,u),p.forEach(i,function(e){p.isUndefined(r[e])?p.isUndefined(t[e])||(n[e]=a(void 0,t[e])):n[e]=a(void 0,r[e])}),p.forEach(s,function(e){e in r?n[e]=a(t[e],r[e]):e in t&&(n[e]=a(void 0,t[e]))});var c=e.concat(o).concat(i).concat(s),s=Object.keys(t).concat(Object.keys(r)).filter(function(e){return-1===c.indexOf(e)});return p.forEach(s,u),n}},function(e,t,r){function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){e.exports=function(e,t){for(var r=new Array(arguments.length-1),i=0,n=2,s=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(n,o){r[i]=function(e){if(s)if(s=!1,e)o(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,o(e))}})}},function(module,exports,__webpack_require__){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){t.Service=r(130)},function(e,t,r){e.exports={}},function(e,t,r){e.exports=function(e){for(var t=f.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),r=e.fieldsArray.slice().sort(f.compareFieldsById),n=0;n<r.length;++n){var o=r[n].resolve(),i=e._fieldsArray.indexOf(o),s=o.resolvedType instanceof c?"int32":o.type,a=p.basic[s],u="m"+f.safeProp(o.name);o.map?(t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",u,o.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",u)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(o.id<<3|2)>>>0,8|p.mapKey[o.keyType],o.keyType),void 0===a?t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",i,u):t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|a,s,u),t("}")("}")):o.repeated?(t("if(%s!=null&&%s.length){",u,u),o.packed&&void 0!==p.packed[s]?t("w.uint32(%i).fork()",(o.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",u)("w.%s(%s[i])",s,u)("w.ldelim()"):(t("for(var i=0;i<%s.length;++i)",u),void 0===a?d(t,o,i,u+"[i]"):t("w.uint32(%i).%s(%s[i])",(o.id<<3|a)>>>0,s,u)),t("}")):(o.optional&&t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",u,o.name),void 0===a?d(t,o,i,u):t("w.uint32(%i).%s(%s)",(o.id<<3|a)>>>0,s,u))}return t("return w")};var c=r(6),p=r(12),f=r(1);function d(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}},function(e,t,r){e.exports=b;var s=r(11);((b.prototype=Object.create(s.prototype)).constructor=b).className="Type";var a=r(6),u=r(29),c=r(10),p=r(58),f=r(59),o=r(30),i=r(28),d=r(27),l=r(1),h=r(56),y=r(61),g=r(62),m=r(63),v=r(64);function b(e,t){s.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function n(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(b.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=l.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=l.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=b.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof o||((e.prototype=new o).constructor=e,l.merge(e.prototype,t)),e.$type=e.prototype.$type=this,l.merge(e,o,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();for(var n={},r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:l.oneOfGetter(this._oneofsArray[r].oneof),set:l.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),b.generateConstructor=function(e){for(var t,r=l.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",l.safeProp(t.name)):t.repeated&&r("this%s=[]",l.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},b.fromJSON=function(e,t){var r=new b(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var n=Object.keys(t.fields),o=0;o<n.length;++o)r.add((void 0!==t.fields[n[o]].keyType?p:c).fromJSON(n[o],t.fields[n[o]]));if(t.oneofs)for(n=Object.keys(t.oneofs),o=0;o<n.length;++o)r.add(u.fromJSON(n[o],t.oneofs[n[o]]));if(t.nested)for(n=Object.keys(t.nested),o=0;o<n.length;++o){var i=t.nested[n[o]];r.add((void 0!==i.id?c:void 0!==i.fields?b:void 0!==i.values?a:void 0!==i.methods?f:s).fromJSON(n[o],i))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},b.prototype.toJSON=function(e){var t=s.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return l.toObject(["options",t&&t.options||void 0,"oneofs",s.arrayToJSON(this.oneofsArray,e),"fields",s.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},b.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();for(var r=this.oneofsArray,t=0;t<r.length;)r[t++].resolve();return s.prototype.resolveAll.call(this)},b.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},b.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof c&&void 0===e.extend){if((this._fieldsById||this.fieldsById)[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),(this.fields[e.name]=e).message=this,e.onAdd(this),n(this)}return e instanceof u?(this.oneofs||(this.oneofs={}),(this.oneofs[e.name]=e).onAdd(this),n(this)):s.prototype.add.call(this,e)},b.prototype.remove=function(e){if(e instanceof c&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),n(this)}if(e instanceof u){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),n(this)}return s.prototype.remove.call(this,e)},b.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},b.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)},b.prototype.create=function(e){return new this.ctor(e)},b.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=h(this)({Writer:d,types:t,util:l}),this.decode=y(this)({Reader:i,types:t,util:l}),this.verify=g(this)({types:t,util:l}),this.fromObject=m.fromObject(this)({types:t,util:l}),this.toObject=m.toObject(this)({types:t,util:l});var n=v[e];return n&&((e=Object.create(this)).fromObject=this.fromObject,this.fromObject=n.fromObject.bind(e),e.toObject=this.toObject,this.toObject=n.toObject.bind(e)),this},b.prototype.encode=function(e,t){return this.setup().encode(e,t)},b.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},b.prototype.decode=function(e,t){return this.setup().decode(e,t)},b.prototype.decodeDelimited=function(e){return e instanceof i||(e=i.create(e)),this.decode(e,e.uint32())},b.prototype.verify=function(e){return this.setup().verify(e)},b.prototype.fromObject=function(e){return this.setup().fromObject(e)},b.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},b.d=function(t){return function(e){l.decorateType(e,t)}}},function(e,t,r){e.exports=i;var s=r(10);((i.prototype=Object.create(s.prototype)).constructor=i).className="MapField";var n=r(12),a=r(1);function i(e,t,r,n,o,i){if(s.call(this,e,t,n,void 0,void 0,o,i),!a.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}i.fromJSON=function(e,t){return new i(e,t.id,t.keyType,t.type,t.options,t.comment)},i.prototype.toJSON=function(e){e=!!e&&Boolean(e.keepComments);return a.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},i.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return s.prototype.resolve.call(this)},i.d=function(r,n,o){return"function"==typeof o?o=a.decorateType(o).name:o&&"object"==typeof o&&(o=a.decorateEnum(o).name),function(e,t){a.decorateType(e.constructor).add(new i(t,r,n,o))}}},function(e,t,r){e.exports=s;var n=r(11);((s.prototype=Object.create(n.prototype)).constructor=s).className="Service";var i=r(60),a=r(1),u=r(54);function s(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function o(e){return e._methodsArray=null,e}s.fromJSON=function(e,t){var r=new s(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),o=0;o<n.length;++o)r.add(i.fromJSON(n[o],t.methods[n[o]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},s.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return a.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=a.toArray(this.methods))}}),s.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},s.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?o((this.methods[e.name]=e).parent=this):n.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,o(this)}return n.prototype.remove.call(this,e)},s.prototype.create=function(e,t,r){for(var n,o=new u.Service(e,t,r),i=0;i<this.methodsArray.length;++i){var s=a.lcFirst((n=this._methodsArray[i]).resolve().name).replace(/[^$\w_]/g,"");o[s]=a.codegen(["r","c"],a.isReserved(s)?s+"_":s)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return o}},function(e,t,r){e.exports=n;var c=r(9);((n.prototype=Object.create(c.prototype)).constructor=n).className="Method";var p=r(1);function n(e,t,r,n,o,i,s,a,u){if(p.isObject(o)?(s=o,o=i=void 0):p.isObject(i)&&(s=i,i=void 0),void 0!==t&&!p.isString(t))throw TypeError("type must be a string");if(!p.isString(r))throw TypeError("requestType must be a string");if(!p.isString(n))throw TypeError("responseType must be a string");c.call(this,e,s),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||void 0,this.responseType=n,this.responseStream=!!i||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=u}n.fromJSON=function(e,t){return new n(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},n.prototype.toJSON=function(e){e=!!e&&Boolean(e.keepComments);return p.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),c.prototype.resolve.call(this))}},function(e,t,r){e.exports=function(e){var t=c.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var n=e._fieldsArray[r].resolve(),o=n.resolvedType instanceof a?"int32":n.type,i="m"+c.safeProp(n.name);t("case %i:",n.id),n.map?(t("if(%s===util.emptyObject)",i)("%s={}",i)("var c2 = r.uint32()+r.pos"),void 0!==u.defaults[n.keyType]?t("k=%j",u.defaults[n.keyType]):t("k=null"),void 0!==u.defaults[o]?t("value=%j",u.defaults[o]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),void 0===u.basic[o]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",o),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==u.long[n.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',i):t("%s[k]=value",i)):n.repeated?(t("if(!(%s&&%s.length))",i,i)("%s=[]",i),void 0!==u.packed[o]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",i,o)("}else"),void 0===u.basic[o]?t(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",i,r):t("%s.push(r.%s())",i,o)):void 0===u.basic[o]?t(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",i,r):t("%s=r.%s()",i,o),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var s=e._fieldsArray[r];s.required&&t("if(!m.hasOwnProperty(%j))",s.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+s.name+"'")}return t("return m")};var a=r(6),u=r(12),c=r(1)},function(e,t,r){e.exports=function(e){var t=a.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r={};e.oneofsArray.length&&t("var p={}");for(var n=0;n<e.fieldsArray.length;++n){var o,i=e._fieldsArray[n].resolve(),s="m"+a.safeProp(i.name);i.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",s,i.name),i.map?(t("if(!util.isObject(%s))",s)("return%j",u(i,"object"))("var k=Object.keys(%s)",s)("for(var i=0;i<k.length;++i){"),function(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",u(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",u(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",u(t,"boolean key"))}}(t,i,"k[i]"),c(t,i,n,s+"[k[i]]")("}")):i.repeated?(t("if(!Array.isArray(%s))",s)("return%j",u(i,"array"))("for(var i=0;i<%s.length;++i){",s),c(t,i,n,s+"[i]")("}")):(i.partOf&&(o=a.safeProp(i.partOf.name),1===r[i.partOf.name]&&t("if(p%s===1)",o)("return%j",i.partOf.name+": multiple values"),r[i.partOf.name]=1,t("p%s=1",o)),c(t,i,n,s)),i.optional&&t("}")}return t("return null")};var s=r(6),a=r(1);function u(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function c(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(%s){",n)("default:")("return%j",u(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),i=0;i<o.length;++i)e("case %i:",t.resolvedType.values[o[i]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",n)("return%j",u(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",u(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',n)("return%j",u(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',n)("return%j",u(t,"boolean"));break;case"string":e("if(!util.isString(%s))",n)("return%j",u(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",u(t,"buffer"))}return e}},function(e,t,r){var t=t,d=r(6),l=r(1);function s(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof d){e("switch(d%s){",n);for(var o=t.resolvedType.values,i=Object.keys(o),s=0;s<i.length;++s)t.repeated&&o[i[s]]===t.typeDefault&&e("default:"),e("case%j:",i[s])("case %i:",o[i[s]])("m%s=%j",n,o[i[s]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var a=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":a=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,a)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,a?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function h(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof d?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,o?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}t.fromObject=function(e){var t=e.fieldsArray,r=l.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),i=l.safeProp(o.name);o.map?(r("if(d%s){",i)('if(typeof d%s!=="object")',i)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",i)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",i),s(r,o,n,i+"[ks[i]]")("}")("}")):o.repeated?(r("if(d%s){",i)("if(!Array.isArray(d%s))",i)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",i)("for(var i=0;i<d%s.length;++i){",i),s(r,o,n,i+"[i]")("}")("}")):(o.resolvedType instanceof d||r("if(d%s!=null){",i),s(r,o,n,i),o.resolvedType instanceof d||r("}"))}return r("return m")},t.toObject=function(e){var t=e.fieldsArray.slice().sort(l.compareFieldsById);if(!t.length)return l.codegen()("return {}");for(var r=l.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],i=[],s=0;s<t.length;++s)t[s].partOf||(t[s].resolve().repeated?n:t[s].map?o:i).push(t[s]);if(n.length){for(r("if(o.arrays||o.defaults){"),s=0;s<n.length;++s)r("d%s=[]",l.safeProp(n[s].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),s=0;s<o.length;++s)r("d%s={}",l.safeProp(o[s].name));r("}")}if(i.length){for(r("if(o.defaults){"),s=0;s<i.length;++s){var a,u=i[s],c=l.safeProp(u.name);u.resolvedType instanceof d?r("d%s=o.enums===String?%j:%j",c,u.resolvedType.valuesById[u.typeDefault],u.typeDefault):u.long?r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,u.typeDefault.toString(),u.typeDefault.toNumber()):u.bytes?(a="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]",r("if(o.bytes===String)d%s=%j",c,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",c,a)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",c,c)("}")):r("d%s=%j",c,u.typeDefault)}r("}")}for(var p=!1,s=0;s<t.length;++s){var u=t[s],f=e._fieldsArray.indexOf(u),c=l.safeProp(u.name);u.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),h(r,u,f,c+"[ks2[j]]")("}")):u.repeated?(r("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),h(r,u,f,c+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",c,u.name),h(r,u,f,c),u.partOf&&r("if(o.oneofs)")("d%s=%j",l.safeProp(u.partOf.name),u.name)),r("}")}return r("return d")}},function(e,t,r){var t=t,i=r(30);t[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){t="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===t.indexOf("/")&&(t="/"+t),this.create({type_url:t,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r,n="",o="";if(t&&t.json&&e.type_url&&e.value&&(o=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1),(r=this.lookup(o))&&(e=r.decode(e.value))),e instanceof this.ctor||!(e instanceof i))return this.toObject(e,t);t=e.$type.toObject(e,t);return o=(n=""===n?"type.googleapis.com/":n)+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),t["@type"]=o,t}}},function(e,t,r){e.exports=u;var n=r(11);((u.prototype=Object.create(n.prototype)).constructor=u).className="Root";var o,l,h,i=r(10),s=r(6),a=r(29),y=r(1);function u(e){n.call(this,"",e),this.deferred=[],this.files=[]}function g(){}u.fromJSON=function(e,t){return t=t||new u,e.options&&t.setOptions(e.options),t.addJSON(e.nested)},u.prototype.resolvePath=y.path.resolve,u.prototype.fetch=y.fetch,u.prototype.load=function e(t,i,o){"function"==typeof i&&(o=i,i=void 0);var s=this;if(!o)return y.asPromise(e,s,t,i);var a=o===g;function u(e,t){if(o){var r=o;if(o=null,a)throw e;r(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");if(-1<t){t=e.substring(t);if(t in h)return t}return null}function p(e,t){try{if(y.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),y.isString(t)){l.filename=e;var r,n=l(t,s,i),o=0;if(n.imports)for(;o<n.imports.length;++o)(r=c(n.imports[o])||s.resolvePath(e,n.imports[o]))&&f(r);if(n.weakImports)for(o=0;o<n.weakImports.length;++o)(r=c(n.weakImports[o])||s.resolvePath(e,n.weakImports[o]))&&f(r,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){u(e)}a||d||u(null,s)}function f(r,n){if(!(-1<s.files.indexOf(r)))if(s.files.push(r),r in h)a?p(r,h[r]):(++d,setTimeout(function(){--d,p(r,h[r])}));else if(a){var e;try{e=y.fs.readFileSync(r).toString("utf8")}catch(r){return n||u(r),0}p(r,e)}else++d,s.fetch(r,function(e,t){--d,o&&(e?n?d||u(null,s):u(e):p(r,t))})}var d=0;y.isString(t)&&(t=[t]);for(var r,n=0;n<t.length;++n)(r=s.resolvePath("",t[n]))&&f(r);if(a)return s;d||u(null,s)},u.prototype.loadSync=function(e,t){if(!y.isNode)throw Error("not supported");return this.load(e,t,g)},u.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return n.prototype.resolveAll.call(this)};var c=/^[A-Z]/;function p(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new i(t.fullName,t.id,t.type,t.rule,void 0,t.options);return(n.declaringField=t).extensionField=n,r.add(n),1}}u.prototype._handleAdd=function(e){if(e instanceof i)void 0===e.extend||e.extensionField||p(0,e)||this.deferred.push(e);else if(e instanceof s)c.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof a)){if(e instanceof o)for(var t=0;t<this.deferred.length;)p(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);c.test(e.name)&&(e.parent[e.name]=e)}},u.prototype._handleRemove=function(e){var t;if(e instanceof i)void 0!==e.extend&&(e.extensionField?(e.extensionField.parent.remove(e.extensionField),e.extensionField=null):-1<(t=this.deferred.indexOf(e))&&this.deferred.splice(t,1));else if(e instanceof s)c.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);c.test(e.name)&&delete e.parent[e.name]}},u._configure=function(e,t,r){o=e,l=t,h=r}},function(e,t,r){var i=r(73),n=r(21),s=r(35),a=r(14)("socket.io-client");e.exports=t=o;var u=t.managers={};function o(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r=i(e),n=r.source,o=r.id,e=r.path,e=u[o]&&e in u[o].nsps,o=t.forceNew||t["force new connection"]||!1===t.multiplex||e?(a("ignoring socket cache for %s",n),s(n,t)):(u[o]||(a("new io instance for %s",n),u[o]=s(n,t)),u[o]);return r.query&&!t.query&&(t.query=r.query),o.socket(r.path,t)}t.protocol=n.protocol,t.connect=o,t.Manager=r(35),t.Socket=r(41)},function(e,t,r){var n=[r(0)];void 0===(r="function"==typeof(r=function(e){return(e.roots.messagebody||(e.roots.messagebody=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{MessageOperation:{fields:{type:{type:"OpType",id:1},mid:{type:"uint64",id:2},xid:{type:"XID",id:3}},nested:{OpType:{values:{UNKNOWN:0,READ_ACK:1,READ_ALL:2,READ_CANCEL:3,DELIVER_ACK:4,RECALL:5,DELETE:6,PLAY_ACK:7}}}},MessageBody:{fields:{type:{type:"Type",id:1},content:{type:"string",id:4},ctype:{type:"ContentType",id:5},operation:{type:"MessageOperation",id:6},config:{type:"string",id:7},attachment:{type:"string",id:8},ext:{type:"string",id:9},qos:{type:"QoS",id:10},sender_name:{type:"string",id:11},is_system:{type:"bool",id:12},priority:{type:"uint32",id:13},status:{type:"Status",id:14}},nested:{Type:{values:{NORMAL:0,OPER:1,CHAT:2,GROUPCHAT:3}},ContentType:{values:{TEXT:0,IMAGE:1,AUDIO:2,VIDEO:3,FILE:4,LOCATION:5,COMMAND:6,FORWARD:7}},QoS:{values:{AT_LEAST_ONCE:0,AT_MOST_ONCE:1,EXACTLY_ONCE:2}},Status:{values:{UNREAD:0,DELIVERED:1,READ:2}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=r)},function(e,t,r){var n=[r(0)];void 0===(r="function"==typeof(r=function(e){return(e.roots.groupnotice||(e.roots.groupnotice=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{GroupNotice:{fields:{type:{type:"Type",id:1},gid:{type:"XID",id:2},from:{type:"XID",id:3},to:{rule:"repeated",type:"XID",id:4},content:{type:"string",id:5}},nested:{Type:{values:{UNKNOWN:0,PRESENCE:1,ABSENCE:2,CREATED:3,DESTROYED:4,JOINED:5,LEAVED:6,APPLYED:7,APPLY_ACCEPTED:8,APPLY_DECLINED:9,INVITED:10,INVITE_ACCEPTED:11,INVITE_DECLINED:12,KICKED:13,BLOCKED:14,UNBLOCKED:15,OWNER_ASSIGNED:16,ADMIN_GRANTED:17,ADMIN_REVOKED:18,MUTED:19,UNMUTED:20,BANNED:21,UNBANNED:22,INFO_UPDATED:23,ANNOUNCEMENT_UPDATED:24,MESSAGE_SETTING:25,FILE_UPLOADED:26,FILE_DELETED:27,FILE_UPDATED:28}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=r)},function(e,t,r){var n=[r(0)];void 0===(r="function"==typeof(r=function(e){return(e.roots.rosternotice||(e.roots.rosternotice=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{RosterNotice:{fields:{type:{type:"Type",id:1},from:{type:"XID",id:2},to:{rule:"repeated",type:"XID",id:3},content:{type:"string",id:4},roster_vsn:{type:"string",id:5}},nested:{Type:{values:{UNKNOWN:0,ADDED:1,REMOVED:2,ACCEPTED:3,DECLINED:4,APPLIED:7,BLOCKED:5,UNBLOCKED:6,INFO_UPDATED:8,MUTED:9,UNMUTED:10}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=r)},function(e,t,r){var n=[r(0)];void 0===(r="function"==typeof(r=function(e){return(e.roots.usernotice||(e.roots.usernotice=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{UserNotice:{fields:{type:{type:"Type",id:1},content:{type:"string",id:2}},nested:{Type:{values:{UNKNOWN:0,PASSWORD_CHANGED:1,FROZEN:2,REMOVED:3,KICK_BY_SAME_DEVICE:4,KICKED_BY_OTHER_DEVICE:5,INFO_UPDATED:6,DEVICE_LOGIN:7,DEVICE_LOGOUT:8,DEVICE_ADDED:9,DEVICE_REMOVED:10,CLUSTER_CHANGED:11}}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=r)},function(e,t,r){var n=[r(0)];void 0===(r="function"==typeof(r=function(e){return(e.roots.info||(e.roots.info=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{Info:{fields:{sdk_vsn:{type:"string",id:1},network:{type:"Network",id:2},content:{type:"string",id:3}},nested:{Network:{values:{WIRE:0,WIFI:1,NET_2G:2,NET_3G:3,NET_4G:4,NET_5G:5,UNKNOWN:6}}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=r)},function(e,t,r){var n=[r(0)];void 0===(r="function"==typeof(r=function(e){return(e.roots.conversation||(e.roots.conversation=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{Conversation:{fields:{type:{type:"Type",id:1},operation:{type:"ConversationOperation",id:2}},nested:{Type:{values:{UNKNOWN:0,OPER:1}}}},ConversationOperation:{fields:{type:{type:"OpType",id:1},xid:{type:"XID",id:2}},nested:{OpType:{values:{UNKNOWN:0,DELETE:1,DELETE_EVERYWHERE:2}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=r)},function(e,t,r){var n=r(31),o=r(14)("socket.io-client:url");e.exports=function(e,t){var r=e;t=t||"undefined"!=typeof location&&location,"string"==typeof(e=null==e?t.protocol+"//"+t.host:e)&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),r=n(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";e=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+e+":"+r.port,r.href=r.protocol+"://"+e+(t&&t.port===r.port?"":":"+r.port),r}},function(e,u,t){function r(e){var s;function a(){if(a.enabled){var n=a,e=+new Date,t=e-(s||e);n.diff=t,n.prev=s,n.curr=e,s=e;for(var o=new Array(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];o[0]=u.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var i=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;i++;var r=u.formatters[t];return"function"==typeof r&&(t=o[i],e=r.call(n,t),o.splice(i,1),i--),e}),u.formatArgs.call(n,o),(a.log||u.log||console.log.bind(console)).apply(n,o)}}return a.namespace=e,a.enabled=u.enabled(e),a.useColors=u.useColors(),a.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return u.colors[Math.abs(r)%u.colors.length]}(e),a.destroy=n,"function"==typeof u.init&&u.init(a),u.instances.push(a),a}function n(){var e=u.instances.indexOf(this);return-1!==e&&(u.instances.splice(e,1),!0)}(u=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},u.disable=function(){u.enable("")},u.enable=function(e){u.save(e),u.names=[],u.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,n=0;n<r;n++)t[n]&&("-"===(e=t[n].replace(/\*/g,".*?"))[0]?u.skips.push(new RegExp("^"+e.substr(1)+"$")):u.names.push(new RegExp("^"+e+"$")));for(n=0;n<u.instances.length;n++){var o=u.instances[n];o.enabled=u.enabled(o.namespace)}},u.enabled=function(e){if("*"===e[e.length-1])return!0;for(var t=0,r=u.skips.length;t<r;t++)if(u.skips[t].test(e))return!1;for(t=0,r=u.names.length;t<r;t++)if(u.names[t].test(e))return!0;return!1},u.humanize=t(20),u.instances=[],u.names=[],u.skips=[],u.formatters={}},function(r,o,n){!function(t){function e(){var e;try{e=o.storage.debug}catch(e){}return e=!e&&void 0!==t&&"env"in t?t.env.DEBUG:e}(o=r.exports=n(76)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t,r,n=this.useColors;e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+o.humanize(this.diff),n&&(n="color: "+this.color,e.splice(1,0,n,"color: inherit"),e[r=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(r=t))}),e.splice(r,0,n))},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=e,o.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(e())}.call(this,n(15))},function(e,u,t){function r(e){var s;function a(){if(a.enabled){var n=a,e=+new Date,t=e-(s||e);n.diff=t,n.prev=s,n.curr=e,s=e;for(var o=new Array(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];o[0]=u.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var i=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;i++;var r=u.formatters[t];return"function"==typeof r&&(t=o[i],e=r.call(n,t),o.splice(i,1),i--),e}),u.formatArgs.call(n,o),(a.log||u.log||console.log.bind(console)).apply(n,o)}}return a.namespace=e,a.enabled=u.enabled(e),a.useColors=u.useColors(),a.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return u.colors[Math.abs(r)%u.colors.length]}(e),a.destroy=n,"function"==typeof u.init&&u.init(a),u.instances.push(a),a}function n(){var e=u.instances.indexOf(this);return-1!==e&&(u.instances.splice(e,1),!0)}(u=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},u.disable=function(){u.enable("")},u.enable=function(e){u.save(e),u.names=[],u.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,n=0;n<r;n++)t[n]&&("-"===(e=t[n].replace(/\*/g,".*?"))[0]?u.skips.push(new RegExp("^"+e.substr(1)+"$")):u.names.push(new RegExp("^"+e+"$")));for(n=0;n<u.instances.length;n++){var o=u.instances[n];o.enabled=u.enabled(o.namespace)}},u.enabled=function(e){if("*"===e[e.length-1])return!0;for(var t=0,r=u.skips.length;t<r;t++)if(u.skips[t].test(e))return!1;for(t=0,r=u.names.length;t<r;t++)if(u.names[t].test(e))return!0;return!1},u.humanize=t(20),u.instances=[],u.names=[],u.skips=[],u.formatters={}},function(e,t,r){var p=r(32),f=r(33),r=Object.prototype.toString,d="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),l="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);t.deconstructPacket=function(e){var t=[],r=e.data,e=e;return e.data=function e(t,r){if(!t)return t;if(f(t)){var n={_placeholder:!0,num:r.length};return r.push(t),n}if(p(t)){for(var o=new Array(t.length),i=0;i<t.length;i++)o[i]=e(t[i],r);return o}if("object"!=typeof t||t instanceof Date)return t;for(var s in o={},t)o[s]=e(t[s],r);return o}(r,t),e.attachments=t.length,{packet:e,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,r){if(!t)return t;if(t&&t._placeholder)return r[t.num];if(p(t))for(var n=0;n<t.length;n++)t[n]=e(t[n],r);else if("object"==typeof t)for(var o in t)t[o]=e(t[o],r);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,a){var u=0,c=e;!function e(t,r,n){if(!t)return t;if(d&&t instanceof Blob||l&&t instanceof File){u++;var o=new FileReader;o.onload=function(){n?n[r]=this.result:c=this.result,--u||a(c)},o.readAsArrayBuffer(t)}else if(p(t))for(var i=0;i<t.length;i++)e(t[i],i,t);else if("object"==typeof t&&!f(t))for(var s in t)e(t[s],s,t)}(c),u||a(c)}},function(e,t,r){t.byteLength=function(e){var t=p(e),e=t[0],t=t[1];return 3*(e+t)/4-t},t.toByteArray=function(e){for(var t,r=p(e),n=r[0],r=r[1],o=new c(3*(n+r)/4-r),i=0,s=0<r?n-4:n,a=0;a<s;a+=4)t=u[e.charCodeAt(a)]<<18|u[e.charCodeAt(a+1)]<<12|u[e.charCodeAt(a+2)]<<6|u[e.charCodeAt(a+3)],o[i++]=t>>16&255,o[i++]=t>>8&255,o[i++]=255&t;return 2===r&&(t=u[e.charCodeAt(a)]<<2|u[e.charCodeAt(a+1)]>>4,o[i++]=255&t),1===r&&(t=u[e.charCodeAt(a)]<<10|u[e.charCodeAt(a+1)]<<4|u[e.charCodeAt(a+2)]>>2,o[i++]=t>>8&255,o[i++]=255&t),o},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,o=[],i=0,s=r-n;i<s;i+=16383)o.push(function(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(a[(n=n)>>18&63]+a[n>>12&63]+a[n>>6&63]+a[63&n]);return o.join("")}(e,i,s<i+16383?s:i+16383));return 1==n?(t=e[r-1],o.push(a[t>>2]+a[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],o.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"=")),o.join("")};for(var a=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=n.length;o<i;++o)a[o]=n[o],u[n.charCodeAt(o)]=o;function p(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,p=-7,f=r?o-1:0,d=r?-1:1,r=e[t+f];for(f+=d,i=r&(1<<-p)-1,r>>=-p,p+=a;0<p;i=256*i+e[t+f],f+=d,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=n;0<p;s=256*s+e[t+f],f+=d,p-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,n),i-=c}return(r?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,u=8*i-o-1,c=(1<<u)-1,p=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,l=n?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+p?f/n:f*Math.pow(2,1-p))*n&&(s++,n/=2),c<=s+p?(a=0,s=c):1<=s+p?(a=(t*n-1)*Math.pow(2,o),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));8<=o;e[r+d]=255&a,d+=l,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;e[r+d]=255&s,d+=l,s/=256,u-=8);e[r+d-l]|=128*i}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports=r(82),e.exports.parser=r(8)},function(e,t,r){var n=r(36),o=r(7),f=r(18)("engine.io-client:socket"),i=r(40),s=r(8),a=r(31),u=r(16);function d(e,t){if(!(this instanceof d))return new d(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),"undefined"!=typeof self&&!this.isReactNative||(t.extraHeaders&&0<Object.keys(t.extraHeaders).length&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}(e.exports=d).priorWebsocketSuccess=!1,o(d.prototype),d.protocol=s.protocol,(d.Socket=d).Transport=r(25),d.transports=r(36),d.parser=r(8),d.prototype.createTransport=function(e){f('creating transport "%s"',e);var t=function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}(this.query);t.EIO=s.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new n[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},d.prototype.open=function(){var e;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},d.prototype.setTransport=function(e){f("setting transport %s",e.name);var t=this;this.transport&&(f("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=e).on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},d.prototype.probe=function(r){f('probing transport "%s"',r);var n=this.createTransport(r,{probe:1}),t=!1,o=this;function e(){var e;o.onlyBinaryUpgrades&&(e=!this.supportsBinary&&o.transport.supportsBinary,t=t||e),t||(f('probe transport "%s" opened',r),n.send([{type:"ping",data:"probe"}]),n.once("packet",function(e){t||("pong"===e.type&&"probe"===e.data?(f('probe transport "%s" pong',r),o.upgrading=!0,o.emit("upgrading",n),n&&(d.priorWebsocketSuccess="websocket"===n.name,f('pausing current transport "%s"',o.transport.name),o.transport.pause(function(){t||"closed"!==o.readyState&&(f("changing transport and sending upgrade packet"),p(),o.setTransport(n),n.send([{type:"upgrade"}]),o.emit("upgrade",n),n=null,o.upgrading=!1,o.flush())}))):(f('probe transport "%s" failed',r),(e=new Error("probe error")).transport=n.name,o.emit("upgradeError",e)))}))}function i(){t||(t=!0,p(),n.close(),n=null)}function s(e){var t=new Error("probe error: "+e);t.transport=n.name,i(),f('probe transport "%s" failed because of error: %s',r,e),o.emit("upgradeError",t)}function a(){s("transport closed")}function u(){s("socket closed")}function c(e){n&&e.name!==n.name&&(f('"%s" works - aborting "%s"',e.name,n.name),i())}function p(){n.removeListener("open",e),n.removeListener("error",s),n.removeListener("close",a),o.removeListener("close",u),o.removeListener("upgrading",c)}d.priorWebsocketSuccess=!1,n.once("open",e),n.once("error",s),n.once("close",a),this.once("close",u),this.once("upgrading",c),n.open()},d.prototype.onOpen=function(){if(f("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){f("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},d.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(f('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else f('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},d.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){f("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},d.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(f("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},d.prototype.sendPacket=function(e,t,r,n){"function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((r=r||{}).compress=!1!==r.compress,this.emit("packetCreate",r={type:e,data:t,options:r}),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush())},d.prototype.close=function(){var e;function t(){e.onClose("forced close"),f("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",(e=this).writeBuffer.length?this.once("drain",function(){(this.upgrading?n:t)()}):(this.upgrading?n:t)()),this},d.prototype.onError=function(e){f("socket error %j",e),d.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},d.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(f('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},d.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~i(this.transports,e[r])&&t.push(e[r]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,r){var o=r(23),n=r(37),i=r(7),s=r(17),a=r(18)("engine.io-client:polling-xhr"),r=r(24);function u(){}function c(e){var t,r;n.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location&&(t="https:"===location.protocol,r=(r=location.port)||(t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t)}function p(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function f(){for(var e in p.requests)p.requests.hasOwnProperty(e)&&p.requests[e].abort()}e.exports=c,e.exports.Request=p,s(c,n),c.prototype.supportsBinary=!0,c.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new p(e)},c.prototype.doWrite=function(e,t){var e=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e}),r=this;e.on("success",t),e.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=e},c.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},i(p.prototype),p.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new o(e),r=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(r.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout(function(){r.onError("number"==typeof t.status?t.status:0)},0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){r.onError(e)},0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},p.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},p.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},p.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},p.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},p.requestsCount=0,p.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",f):"function"==typeof addEventListener&&addEventListener("onpagehide"in r?"pagehide":"unload",f,!1))},function(e,t){e.exports=Object.keys||function(e){var t,r=[],n=Object.prototype.hasOwnProperty;for(t in e)n.call(e,t)&&r.push(t);return r}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),n<r&&(r=n),n<=t||r<=t||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(r-t),s=t,a=0;s<r;s++,a++)i[a]=o[s];return i.buffer}},function(e,t){function s(){}e.exports=function(e,r,n){var o=!1;return n=n||s,0===(i.count=e)?r():i;function i(e,t){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,r(e),r=n):0!==i.count||o||r(null,t)}}},function(e,t){var i,s,a,u=String.fromCharCode;function c(e){for(var t,r,n=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function p(e,t){if(!(55296<=e&&e<=57343))return 1;if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function f(e,t){return u(e>>t&63|128)}function d(){if(s<=a)throw Error("Invalid byte index");var e=255&i[a];if(a++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}e.exports={version:"2.1.2",encode:function(e,t){for(var r=!1!==(t=t||{}).strict,n=c(e),o=n.length,i=-1,s="";++i<o;)s+=function(e,t){if(0==(4294967168&e))return u(e);var r="";return 0==(4294965248&e)?r=u(e>>6&31|192):0==(4294901760&e)?(p(e,t)||(e=65533),r=u(e>>12&15|224),r+=f(e,6)):0==(4292870144&e)&&(r=u(e>>18&7|240),r+=f(e,12),r+=f(e,6)),r+u(63&e|128)}(n[i],r);return s},decode:function(e,t){var r=!1!==(t=t||{}).strict;i=c(e),s=i.length,a=0;for(var n,o=[];!1!==(n=function(e){var t,r;if(s<a)throw Error("Invalid byte index");if(a==s)return!1;if(t=255&i[a],a++,0==(128&t))return t;if(192==(224&t)){if(128<=(r=(31&t)<<6|d()))return r;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(r=(15&t)<<12|d()<<6|d()))return p(r,e)?r:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&65536<=(r=(7&t)<<18|d()<<12|d()<<6|d())&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}(r));)o.push(n);return function(e){for(var t,r=e.length,n=-1,o="";++n<r;)65535<(t=e[n])&&(o+=u((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=u(t);return o}(o)}}},function(e,t){var p;p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.encode=function(e){for(var t=new Uint8Array(e),r=t.length,n="",o=0;o<r;o+=3)n+=p[t[o]>>2],n+=p[(3&t[o])<<4|t[o+1]>>4],n+=p[(15&t[o+1])<<2|t[o+2]>>6],n+=p[63&t[o+2]];return r%3==2?n=n.substring(0,n.length-1)+"=":r%3==1&&(n=n.substring(0,n.length-2)+"=="),n},t.decode=function(e){var t,r,n,o,i=.75*e.length,s=e.length,a=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);for(var i=new ArrayBuffer(i),u=new Uint8Array(i),c=0;c<s;c+=4)t=p.indexOf(e[c]),r=p.indexOf(e[c+1]),n=p.indexOf(e[c+2]),o=p.indexOf(e[c+3]),u[a++]=t<<2|r>>4,u[a++]=(15&r)<<4|n>>2,u[a++]=(3&n)<<6|63&o;return i}},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),i=n&&n.prototype.append&&n.prototype.getBlob;function s(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t,r=e.buffer;return e.byteLength!==r.byteLength&&((t=new Uint8Array(e.byteLength)).set(new Uint8Array(r,e.byteOffset,e.byteLength)),r=t.buffer),r}return e})}function a(e,t){t=t||{};var r=new n;return s(e).forEach(function(e){r.append(e)}),t.type?r.getBlob(t.type):r.getBlob()}function u(e,t){return new Blob(s(e),t||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,u.prototype=Blob.prototype),e.exports=r?o?Blob:u:i?a:void 0},function(e,u,t){function r(e){var s;function a(){if(a.enabled){var n=a,e=+new Date,t=e-(s||e);n.diff=t,n.prev=s,n.curr=e,s=e;for(var o=new Array(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];o[0]=u.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var i=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;i++;var r=u.formatters[t];return"function"==typeof r&&(t=o[i],e=r.call(n,t),o.splice(i,1),i--),e}),u.formatArgs.call(n,o),(a.log||u.log||console.log.bind(console)).apply(n,o)}}return a.namespace=e,a.enabled=u.enabled(e),a.useColors=u.useColors(),a.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return u.colors[Math.abs(r)%u.colors.length]}(e),a.destroy=n,"function"==typeof u.init&&u.init(a),u.instances.push(a),a}function n(){var e=u.instances.indexOf(this);return-1!==e&&(u.instances.splice(e,1),!0)}(u=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},u.disable=function(){u.enable("")},u.enable=function(e){u.save(e),u.names=[],u.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,n=0;n<r;n++)t[n]&&("-"===(e=t[n].replace(/\*/g,".*?"))[0]?u.skips.push(new RegExp("^"+e.substr(1)+"$")):u.names.push(new RegExp("^"+e+"$")));for(n=0;n<u.instances.length;n++){var o=u.instances[n];o.enabled=u.enabled(o.namespace)}},u.enabled=function(e){if("*"===e[e.length-1])return!0;for(var t=0,r=u.skips.length;t<r;t++)if(u.skips[t].test(e))return!1;for(t=0,r=u.names.length;t<r;t++)if(u.names[t].test(e))return!0;return!1},u.humanize=t(20),u.instances=[],u.names=[],u.skips=[],u.formatters={}},function(e,t,r){var n=r(37),o=r(17),i=r(24);e.exports=u;var s,c=/\n/g,p=/\\n/g;function a(){}function u(e){n.call(this,e),this.query=this.query||{},s=s||(i.___eio=i.___eio||[]),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){t.script&&(t.script.onerror=a)},!1)}o(u,n),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},u.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},u.prototype.doWrite=function(e,t){var r,n,o,i,s=this;function a(){u(),t()}function u(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(e){s.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+s.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=s.iframeId,r.src="javascript:0"}r.id=s.iframeId,s.form.appendChild(r),s.iframe=r}this.form||(n=document.createElement("form"),o=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index,n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=i,n.method="POST",n.setAttribute("accept-charset","utf-8"),o.name="d",n.appendChild(o),document.body.appendChild(n),this.form=n,this.area=o),this.form.action=this.uri(),u(),e=e.replace(p,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===s.iframe.readyState&&a()}:this.iframe.onload=a}},function(f,e,d){!function(i){var t,r,n=d(25),s=d(8),o=d(16),e=d(17),a=d(39),u=d(18)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?t=WebSocket:"undefined"!=typeof self&&(t=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{r=d(95)}catch(e){}var c=t||r;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=t&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(c=r),n.call(this,e)}e(f.exports=p,n),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={};this.isReactNative||(r.agent=this.agent,r.perMessageDeflate=this.perMessageDeflate,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new c(e,t):new c(e):new c(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},p.prototype.write=function(e){var n=this;this.writable=!1;for(var o=e.length,t=0,r=o;t<r;t++)!function(r){s.encodePacket(r,n.supportsBinary,function(e){var t;n.usingBrowserWebSocket||(t={},r.options&&(t.compress=r.options.compress),!n.perMessageDeflate||("string"==typeof e?i.byteLength(e):e.length)<n.perMessageDeflate.threshold&&(t.compress=!1));try{n.usingBrowserWebSocket?n.ws.send(e):n.ws.send(e,t)}catch(e){u("websocket closed before onclose event")}--o||(n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0))})}(e[t])},p.prototype.onClose=function(){n.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"==t&&443!==Number(this.port)||"ws"==t&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e},p.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===p.prototype.name)}}.call(this,d(22).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}},function(e,t){function r(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}(e.exports=r).prototype.duration=function(){var e,t,r=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*r),r=0==(1&Math.floor(10*e))?r-t:r+t),0|Math.min(r,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},function(e,t,r){var n=r(3),o=r(44),i=r(99),s=r(50);function a(e){var t=new i(e),e=o(i.prototype.request,t);return n.extend(e,i.prototype,t),n.extend(e,t),e}var u=a(r(26));u.Axios=i,u.create=function(e){return a(s(u.defaults,e))},u.Cancel=r(51),u.CancelToken=r(113),u.isCancel=r(49),u.all=function(e){return Promise.all(e)},u.spread=r(114),u.isAxiosError=r(115),e.exports=u,e.exports.default=u},function(e,t,r){var n=r(3),o=r(45),i=r(100),p=r(101),f=r(50),d=r(111),l=d.validators;function s(e){this.defaults=e,this.interceptors={request:new i,response:new i}}s.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=f(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&d.assertOptions(e,{silentJSONParsing:l.transitional(l.boolean,"1.0.0"),forcedJSONParsing:l.transitional(l.boolean,"1.0.0"),clarifyTimeoutError:l.transitional(l.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(n=n&&e.synchronous,r.unshift(e.fulfilled,e.rejected))});var o,i=[];if(this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)}),!n){var s=[p,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(i),o=Promise.resolve(t);s.length;)o=o.then(s.shift(),s.shift());return o}for(var a=t;r.length;){var u=r.shift(),c=r.shift();try{a=u(a)}catch(t){c(t);break}}try{o=p(a)}catch(t){return Promise.reject(t)}for(;i.length;)o=o.then(i.shift(),i.shift());return o},s.prototype.getUri=function(e){return e=f(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(r){s.prototype[r]=function(e,t){return this.request(f(t||{},{method:r,url:e,data:(t||{}).data}))}}),n.forEach(["post","put","patch"],function(n){s.prototype[n]=function(e,t,r){return this.request(f(r||{},{method:n,url:e,data:t}))}}),e.exports=s},function(e,t,r){var n=r(3);function o(){this.handlers=[]}o.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=o},function(e,t,r){var n=r(3),o=r(102),i=r(49),s=r(26);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(t){return a(t),t.headers=t.headers||{},t.data=o.call(t,t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return a(t),e.data=o.call(t,e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(a(t),e&&e.response&&(e.response.data=o.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(e,t,r){var o=r(3),i=r(26);e.exports=function(t,r,e){var n=this||i;return o.forEach(e,function(e){t=e.call(n,t,r)}),t}},function(e,t,r){var o=r(3);e.exports=function(r,n){o.forEach(r,function(e,t){t!==n&&t.toUpperCase()===n.toUpperCase()&&(r[n]=e,delete r[t])})}},function(e,t,r){var o=r(48);e.exports=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(o("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){var a=r(3);e.exports=a.isStandardBrowserEnv()?{write:function(e,t,r,n,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),a.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),a.isString(n)&&s.push("path="+n),a.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){var n=r(107),o=r(108);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},function(e,t,r){e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){var o=r(3),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,n={};return e&&o.forEach(e.split("\n"),function(e){r=e.indexOf(":"),t=o.trim(e.substr(0,r)).toLowerCase(),r=o.trim(e.substr(r+1)),t&&(n[t]&&0<=i.indexOf(t)||(n[t]="set-cookie"===t?(n[t]||[]).concat([r]):n[t]?n[t]+", "+r:r))}),n}},function(e,t,r){var n,o,i,s=r(3);function a(e){return o&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}e.exports=s.isStandardBrowserEnv()?(o=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),n=a(window.location.href),function(e){e=s.isString(e)?a(e):e;return e.protocol===n.protocol&&e.host===n.host}):function(){return!0}},function(e,t,r){var a=r(112),n={};["object","boolean","number","function","string","symbol"].forEach(function(t,r){n[t]=function(e){return typeof e===t||"a"+(r<1?"n ":" ")+t}});var u={},i=a.version.split(".");function c(e,t){for(var r=t?t.split("."):i,n=e.split("."),o=0;o<3;o++){if(r[o]>n[o])return!0;if(r[o]<n[o])return!1}return!1}n.transitional=function(n,o,r){var i=o&&c(o);function s(e,t){return"[Axios v"+a.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(e,t,r){if(!1===n)throw new Error(s(t," has been removed in "+o));return i&&!u[t]&&(u[t]=!0,console.warn(s(t," has been deprecated since v"+o+" and will be removed in the near future"))),!n||n(e,t,r)}},e.exports={isOlderVersion:c,assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;0<o--;){var i=n[o],s=t[i];if(s){var a=e[i],a=void 0===a||s(a,i,e);if(!0!==a)throw new TypeError("option "+i+" must be "+a)}else if(!0!==r)throw Error("Unknown option "+i)}},validators:n}},function(e){e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(e,t,r){var n=r(51);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},e.exports=o},function(e,t,r){e.exports=function(t){return function(e){return t.apply(null,e)}}},function(e,t,r){e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,r){e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())},function(e,t,r){var o=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");function u(t){try{return decodeURIComponent(t)}catch(e){for(var r=t.match(o),n=1;n<r.length;n++)r=(t=function e(t,r){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;var n=t.slice(0,r=r||1),r=t.slice(r);return Array.prototype.concat.call([],e(n),e(r))}(r,n).join("")).match(o);return t}}e.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=a.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=u(r[0]);n!==r[0]&&(t[r[0]]=n)}r=a.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),i=0;i<o.length;i++){var s=o[i];e=e.replace(new RegExp(s,"g"),t[s])}return e}(t)}}},function(e,t,r){e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},function(e,t,r){e.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var s=n[i],a=e[s];(o?-1!==t.indexOf(s):t(s,a,e))&&(r[s]=a)}return r}},function(e,t,r){var n=e.exports=r(121);n.build="light",n.load=function(e,t,r){return(t="function"==typeof t?(r=t,new n.Root):t||new n.Root).load(e,r)},n.loadSync=function(e,t){return(t=t||new n.Root).loadSync(e)},n.encoder=r(56),n.decoder=r(61),n.verifier=r(62),n.converter=r(63),n.ReflectionObject=r(9),n.Namespace=r(11),n.Root=r(65),n.Enum=r(6),n.Type=r(57),n.Field=r(10),n.OneOf=r(29),n.MapField=r(58),n.Service=r(59),n.Method=r(60),n.Message=r(30),n.wrappers=r(64),n.types=r(12),n.util=r(1),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},function(e,t,r){var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(27),n.BufferWriter=r(128),n.Reader=r(28),n.BufferReader=r(129),n.util=r(5),n.rpc=r(54),n.roots=r(55),n.configure=o,o()},function(e,t,r){t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;1<--t%4&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var c=new Array(64),u=new Array(123),n=0;n<64;)u[c[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;t.encode=function(e,t,r){for(var n,o=null,i=[],s=0,a=0;t<r;){var u=e[t++];switch(a){case 0:i[s++]=c[u>>2],n=(3&u)<<4,a=1;break;case 1:i[s++]=c[n|u>>4],n=(15&u)<<2,a=2;break;case 2:i[s++]=c[n|u>>6],i[s++]=c[63&u],a=0}8191<s&&((o=o||[]).push(String.fromCharCode.apply(String,i)),s=0)}return a&&(i[s++]=c[n],i[s++]=61,1===a&&(i[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},t.decode=function(e,t,r){for(var n,o=r,i=0,s=0;s<e.length;){var a=e.charCodeAt(s++);if(61===a&&1<i)break;if(void 0===(a=u[a]))throw Error("invalid encoding");switch(i){case 0:n=a,i=1;break;case 1:t[r++]=n<<2|(48&a)>>4,n=a,i=2;break;case 2:t[r++]=(15&n)<<4|(60&a)>>2,n=a,i=3;break;case 3:t[r++]=(3&n)<<6|a,i=0}}if(1===i)throw Error("invalid encoding");return r-o},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,r){function n(){this._listeners={}}(e.exports=n).prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},n.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},function(e,t,r){function n(e){return"undefined"!=typeof Float32Array?(c=new Float32Array([-0]),p=new Uint8Array(c.buffer),f=128===p[3],e.writeFloatLE=f?h:y,e.writeFloatBE=f?y:h,e.readFloatLE=f?g:m,e.readFloatBE=f?m:g):(e.writeFloatLE=d.bind(null,v),e.writeFloatBE=d.bind(null,b),e.readFloatLE=l.bind(null,_),e.readFloatBE=l.bind(null,E)),"undefined"!=typeof Float64Array?(a=new Float64Array([-0]),u=new Uint8Array(a.buffer),f=128===u[7],e.writeDoubleLE=f?n:o,e.writeDoubleBE=f?o:n,e.readDoubleLE=f?i:s,e.readDoubleBE=f?s:i):(e.writeDoubleLE=t.bind(null,v,0,4),e.writeDoubleBE=t.bind(null,b,4,0),e.readDoubleLE=r.bind(null,_,0,4),e.readDoubleBE=r.bind(null,E,4,0)),e;function t(e,t,r,n,o,i){var s,a,u=n<0?1:0;0===(n=u?-n:n)?(e(0,o,i+t),e(0<1/n?0:2147483648,o,i+r)):isNaN(n)?(e(0,o,i+t),e(2146959360,o,i+r)):17976931348623157e292<n?(e(0,o,i+t),e((u<<31|2146435072)>>>0,o,i+r)):n<22250738585072014e-324?(e((s=n/5e-324)>>>0,o,i+t),e((u<<31|s/4294967296)>>>0,o,i+r)):(1024===(a=Math.floor(Math.log(n)/Math.LN2))&&(a=1023),e(4503599627370496*(s=n*Math.pow(2,-a))>>>0,o,i+t),e((u<<31|a+1023<<20|1048576*s&1048575)>>>0,o,i+r))}function r(e,t,r,n,o){t=e(n,o+t),n=e(n,o+r),o=2*(n>>31)+1,r=n>>>20&2047,t=4294967296*(1048575&n)+t;return 2047==r?t?NaN:1/0*o:0==r?5e-324*o*t:o*Math.pow(2,r-1075)*(t+4503599627370496)}function n(e,t,r){a[0]=e,t[r]=u[0],t[r+1]=u[1],t[r+2]=u[2],t[r+3]=u[3],t[r+4]=u[4],t[r+5]=u[5],t[r+6]=u[6],t[r+7]=u[7]}function o(e,t,r){a[0]=e,t[r]=u[7],t[r+1]=u[6],t[r+2]=u[5],t[r+3]=u[4],t[r+4]=u[3],t[r+5]=u[2],t[r+6]=u[1],t[r+7]=u[0]}function i(e,t){return u[0]=e[t],u[1]=e[t+1],u[2]=e[t+2],u[3]=e[t+3],u[4]=e[t+4],u[5]=e[t+5],u[6]=e[t+6],u[7]=e[t+7],a[0]}function s(e,t){return u[7]=e[t],u[6]=e[t+1],u[5]=e[t+2],u[4]=e[t+3],u[3]=e[t+4],u[2]=e[t+5],u[1]=e[t+6],u[0]=e[t+7],a[0]}var a,u,c,p,f;function d(e,t,r,n){var o=t<0?1:0;0===(t=o?-t:t)?e(0<1/t?0:2147483648,r,n):isNaN(t)?e(2143289344,r,n):e(34028234663852886e22<t?(o<<31|2139095040)>>>0:t<11754943508222875e-54?(o<<31|Math.round(t/1401298464324817e-60))>>>0:(o<<31|(o=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n)}function l(e,t,r){e=e(t,r),t=2*(e>>31)+1,r=e>>>23&255,e&=8388607;return 255==r?e?NaN:1/0*t:0==r?1401298464324817e-60*t*e:t*Math.pow(2,r-150)*(8388608+e)}function h(e,t,r){c[0]=e,t[r]=p[0],t[r+1]=p[1],t[r+2]=p[2],t[r+3]=p[3]}function y(e,t,r){c[0]=e,t[r]=p[3],t[r+1]=p[2],t[r+2]=p[1],t[r+3]=p[0]}function g(e,t){return p[0]=e[t],p[1]=e[t+1],p[2]=e[t+2],p[3]=e[t+3],c[0]}function m(e,t){return p[3]=e[t],p[2]=e[t+1],p[1]=e[t+2],p[0]=e[t+3],c[0]}}function v(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function b(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function _(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function E(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=n(n)},function(e,t,r){t.length=function(e){for(var t,r=0,n=0;n<e.length;++n)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(n+1))?(++n,r+=4):r+=3;return r},t.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],s=0;t<r;)(n=e[t++])<128?i[s++]=n:191<n&&n<224?i[s++]=(31&n)<<6|63&e[t++]:239<n&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(n>>10),i[s++]=56320+(1023&n)):i[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],8191<s&&((o=o||[]).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},t.write=function(e,t,r){for(var n,o,i=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(s+1)))?(++s,t[r++]=(n=65536+((1023&n)<<10)+(1023&o))>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-i}},function(e,t,r){e.exports=function(t,r,e){var n=e||8192,o=n>>>1,i=null,s=n;return function(e){if(e<1||o<e)return t(e);n<s+e&&(i=t(n),s=0);e=r.call(i,s,s+=e);return 7&s&&(s=1+(7|s)),e}}},function(e,t,r){e.exports=o;var n=r(5);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0,r=(e=t?-e:e)>>>0,e=(e-r)/4294967296>>>0;return t&&(e=~e>>>0,r=~r>>>0,4294967295<++r&&(r=0,4294967295<++e&&(e=0))),new o(r,e)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,e=~this.hi>>>0;return-(t+4294967296*(e=!t?e+1>>>0:e))}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;o.fromHash=function(e){return"\0\0\0\0\0\0\0\0"===e?i:new o((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0==r?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){e.exports=i;var n=r(27);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(5);function i(){n.call(this)}function s(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){var t=(e=o.isString(e)?o._Buffer_from(e,"base64"):e).length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},function(e,t,r){e.exports=i;var n=r(28);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(5);function i(e){n.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,r){e.exports=n;var a=r(5);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");a.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}((n.prototype=Object.create(a.EventEmitter.prototype)).constructor=n).prototype.rpcCall=function e(r,t,n,o,i){if(!o)throw TypeError("request must be specified");var s=this;if(!i)return a.asPromise(e,s,r,t,n,o);if(s.rpcImpl)try{return s.rpcImpl(r,t[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,t){if(e)return s.emit("error",e,r),i(e);if(null!==t){if(!(t instanceof n))try{t=n[s.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return s.emit("error",e,r),i(e)}return s.emit("data",t,r),i(null,t)}s.end(!0)})}catch(e){return s.emit("error",e,r),void setTimeout(function(){i(e)},0)}else setTimeout(function(){i(Error("already ended"))},0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){function f(t,r){"string"==typeof t&&(r=t,t=void 0);var u=[];function c(e){if("string"!=typeof e){var t=p();if(f.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var r=Object.keys(e),n=new Array(r.length+1),o=new Array(r.length),i=0;i<r.length;)n[i]=r[i],o[i]=e[r[i++]];return n[i]=t,Function.apply(null,n).apply(null,o)}return Function(t)()}for(var s=new Array(arguments.length-1),a=0;a<s.length;)s[a]=arguments[++a];if(a=0,e=e.replace(/%([%dfijs])/g,function(e,t){var r=s[a++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),a!==s.length)throw Error("parameter count mismatch");return u.push(e),c}function p(e){return"function "+(e||r||"")+"("+(t&&t.join(",")||"")+"){\n  "+u.join("\n  ")+"\n}"}return c.toString=p,c}(e.exports=f).verbose=!1},function(e,t,r){e.exports=a;var i=r(52),s=r(53)("fs");function a(r,n,o){return n="function"==typeof n?(o=n,{}):n||{},o?!n.xhr&&s&&s.readFile?s.readFile(r,function(e,t){return e&&"undefined"!=typeof XMLHttpRequest?a.xhr(r,n,o):e?o(e):o(null,n.binary?t:t.toString("utf8"))}):a.xhr(r,n,o):i(a,this,r,n)}a.xhr=function(e,r,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(0!==o.status&&200!==o.status)return n(Error("status "+o.status));if(r.binary){if(!(e=o.response))for(var e=[],t=0;t<o.responseText.length;++t)e.push(255&o.responseText.charCodeAt(t));return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,o.responseText)}},r.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}},function(e,t,r){var t=t,o=t.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},n=t.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=o(e),e="";r&&(e=t.shift()+"/");for(var n=0;n<t.length;)".."===t[n]?0<n&&".."!==t[n-1]?t.splice(--n,2):r?t.splice(n,1):++n:"."===t[n]?t.splice(n,1):++n;return e+t.join("/")};t.resolve=function(e,t,r){return r||(t=n(t)),o(t)?t:(e=(e=!r?n(e):e).replace(/(?:\/|^)[^/]+$/,"")).length?n(e+"/"+t):t}},function(e,t,r){r.r(t),r.d(t,"flooim",function(){return po});var n={};r.r(n),r.d(n,"STATIC_FRAME_VSN",function(){return h}),r.d(n,"STATIC_FRAME_COMMAND",function(){return y}),r.d(n,"STATIC_FRAME_COMPRESS_METHOD",function(){return g}),r.d(n,"STATIC_FRAME_ERROR_STATUS",function(){return m}),r.d(n,"STATIC_FRAME_OSTYPE",function(){return v}),r.d(n,"STATIC_FRAME_ENCRYPTMETHOD",function(){return b}),r.d(n,"STATIC_META_NAMESPACE",function(){return _}),r.d(n,"STATIC_MESSAGE_OPTYPE",function(){return w}),r.d(n,"STATIC_MESSAGE_TYPE",function(){return E}),r.d(n,"STATIC_MESSAGE_CONTENT_TYPE",function(){return A}),r.d(n,"STATIC_MESSAGE_QOS",function(){return C}),r.d(n,"STATIC_GROUPNOTICE_TYPE",function(){return N}),r.d(n,"STATIC_INFO_NETWORK",function(){return k}),r.d(n,"STATIC_USERNOTICE_TYPE",function(){return S}),r.d(n,"STATIC_ROSTERNONTICE_TYPE",function(){return O}),r.d(n,"STATIC_CONVERSATION_TYPE",function(){return R}),r.d(n,"STATIC_CONVERSATION_OPTYPE",function(){return T}),r.d(n,"STATIC_MESSAGE_STATUS",function(){return I});var o={};r.r(o),r.d(o,"getServers",function(){return ge}),r.d(o,"tokenUser",function(){return me}),r.d(o,"tokenId",function(){return ve}),r.d(o,"userRegister",function(){return be}),r.d(o,"userBindMobile",function(){return _e}),r.d(o,"userSendSms",function(){return we}),r.d(o,"userNameCheck",function(){return Ae}),r.d(o,"userMobileBind",function(){return Ce}),r.d(o,"userMobileBindSign",function(){return Ne}),r.d(o,"userMobileLogin",function(){return ke}),r.d(o,"userUpdateMobile",function(){return Ee}),r.d(o,"captchaImagePost",function(){return Oe}),r.d(o,"captchaSms",function(){return Se}),r.d(o,"rosterAccept",function(){return Re}),r.d(o,"rosterApply",function(){return Te}),r.d(o,"rosterDecline",function(){return Ie}),r.d(o,"rosterDelete",function(){return xe}),r.d(o,"rosterExt",function(){return De}),r.d(o,"rosterId",function(){return Ue}),r.d(o,"rosterList",function(){return Me}),r.d(o,"rosterListPost",function(){return Be}),r.d(o,"rosterName",function(){return Pe}),r.d(o,"rosterApplylist",function(){return je}),r.d(o,"rosterBlockedlist",function(){return Le}),r.d(o,"rosterBlockedAdd",function(){return Fe}),r.d(o,"rosterBlockeRemove",function(){return Ge}),r.d(o,"groupAdminAdd",function(){return qe}),r.d(o,"groupAdminList",function(){return Je}),r.d(o,"groupAdminRemove",function(){return Ye}),r.d(o,"groupAnnouncement",function(){return Ke}),r.d(o,"groupAnnouncementDelete",function(){return Ve}),r.d(o,"groupAnnouncementEdit",function(){return He}),r.d(o,"groupAnnouncementList",function(){return We}),r.d(o,"groupCreate",function(){return ze}),r.d(o,"groupDestroy",function(){return Xe}),r.d(o,"groupInfo",function(){return $e}),r.d(o,"groupInfoAvatar",function(){return Ze}),r.d(o,"groupInfoDdscription",function(){return Qe}),r.d(o,"groupInfoExt",function(){return et}),r.d(o,"groupInfoName",function(){return tt}),r.d(o,"groupMemberlist",function(){return rt}),r.d(o,"groupMsgMutemode",function(){return nt}),r.d(o,"groupMsgNotdisturb",function(){return ot}),r.d(o,"groupPubliclist",function(){return it}),r.d(o,"groupBannedList",function(){return st}),r.d(o,"groupBab",function(){return at}),r.d(o,"groupUnban",function(){return ut}),r.d(o,"groupSettings",function(){return ct}),r.d(o,"groupSettingsAllowmemberinvitation",function(){return pt}),r.d(o,"groupSettingsAllowmembermodify",function(){return ft}),r.d(o,"groupSettingsEnablereadack",function(){return dt}),r.d(o,"groupSettingsHistoryvisible",function(){return lt}),r.d(o,"groupSettingsRequireadminapproval",function(){return ht}),r.d(o,"groupSettingsBanAll",function(){return yt}),r.d(o,"groupSettingsUnBanAll",function(){return gt}),r.d(o,"groupTransfer",function(){return mt}),r.d(o,"groupUserjoined",function(){return vt}),r.d(o,"groupApply",function(){return bt}),r.d(o,"groupApplicationlist",function(){return It}),r.d(o,"groupInvitationlist",function(){return xt}),r.d(o,"groupApplyHandle",function(){return _t}),r.d(o,"groupBockedlist",function(){return Et}),r.d(o,"groupBlock",function(){return wt}),r.d(o,"groupUnblock",function(){return At}),r.d(o,"groupKick",function(){return Ct}),r.d(o,"groupInvite",function(){return Nt}),r.d(o,"groupInviteHandle",function(){return kt}),r.d(o,"groupInfoBatch",function(){return Ot}),r.d(o,"groupMembersDidpayname",function(){return St}),r.d(o,"groupLeave",function(){return Rt}),r.d(o,"groupDisplayname",function(){return Tt}),r.d(o,"groupFilelist",function(){return Dt}),r.d(o,"groupFiledelete",function(){return Ut}),r.d(o,"groupFileupload",function(){return Mt}),r.d(o,"userAuthmode",function(){return Bt}),r.d(o,"userAvatar",function(){return Pt}),r.d(o,"userMobile",function(){return jt}),r.d(o,"userNickname",function(){return Lt}),r.d(o,"userProfile",function(){return Ft}),r.d(o,"userProfilePost",function(){return Gt}),r.d(o,"userPush",function(){return qt}),r.d(o,"userPushDetail",function(){return Jt}),r.d(o,"userPushLimit",function(){return Yt}),r.d(o,"userPushNickname",function(){return Kt}),r.d(o,"userSettings",function(){return Vt}),r.d(o,"userSettingsPost",function(){return Ht}),r.d(o,"userSounds",function(){return Wt}),r.d(o,"userVibratory",function(){return zt}),r.d(o,"bindDeviceToken",function(){return Xt}),r.d(o,"unbindDeviceToken",function(){return $t}),r.d(o,"fileForward",function(){return Zt}),r.d(o,"asyncFileUpload",function(){return Qt}),r.d(o,"fileUploadAvatarUrl",function(){return er}),r.d(o,"fileUploadGroupAvatarUrl",function(){return tr}),r.d(o,"fileUploadChatFileUrl",function(){return rr}),r.d(o,"fileDownloadChatFileUrl",function(){return nr}),r.d(o,"qrcode",function(){return or}),r.d(o,"qrlogin",function(){return ir}),r.d(o,"qrcodeGroupsign",function(){return sr}),r.d(o,"qrcodeGroupinvite",function(){return ar}),r.d(o,"wxbind",function(){return ur}),r.d(o,"wxlogin",function(){return cr}),r.d(o,"getStaticContact",function(){return pr}),r.d(o,"wechatUnbind",function(){return fr}),r.d(o,"wechatIsbind",function(){return dr}),r.d(o,"wechatBind",function(){return lr});var i={};r.r(i),r.d(i,"decode",function(){return Wr}),r.d(i,"encode",function(){return zr});var s={};r.r(s),r.d(s,"decode",function(){return an}),r.d(s,"encode",function(){return un});var a={};r.r(a),r.d(a,"decode",function(){return ln}),r.d(a,"encode",function(){return hn});var u=r(66),c=r.n(u),p=r(13),f=r.n(p),i=()=>{},d={error:i,log:i,info:i,warn:i,dir:i,req:i},s=r(4),l=r.n(s);const h={XSYNC_V1:0,XSYNC_V2:1},y={UNREAD:0,SYNC:1,NOTICE:2,PROVISION:3},g={NONE:0,ZLIB:1},m={UNKNOWN:0,OK:1,FAIL:2,UNKNOWN_COMMAND:3,PB_PARSER_ERROR:4,DECRYPT_FAILURE:5,PUBLIC_KEY_CHANGED:6,INVALID_TOKEN:7,INVALID_PARAMETER:8,UNAUTHORIZED:9,USER_FROZEN:10,USER_BANNED:11,WORD_CENSORED:12,TOO_MANY_DEVICES:13,ENCRYPT_METHOD_UNSUPPORTED:14,DEVICE_GUID_CONFLICT:15,CHECK_SUM_FAILURE:16,INVALID_LICENSE:17,LICENSE_LIMIT:18,APP_FROZEN:19},v={UNKNOWN:0,IOS:1,ANDR:2,WIN:3,OSX:4,LINUX:5,WEB:6},b={ENCRYPT_NONE:0,AES_CBC_128:1,AES_CBC_256:2,CUSTOM:3},_={UNKNOWN:0,MESSAGE:1,GROUP_NOTICE:2,ROSTER_NOTICE:3,USER_NOTICE:4,INFO:5,CONVERSATION:6},E={NORMAL:0,OPER:1,CHAT:2,GROUPCHAT:3},w={UNKNOWN:0,READ_ACK:1,READ_ALL:2,READ_CANCEL:3,DELIVER_ACK:4,RECALL:5,DELETE:6},A={TEXT:0,IMAGE:1,AUDIO:2,VIDEO:3,FILE:4,LOCATION:5,COMMAND:6,FORWARD:7},C={AT_LEAST_ONCE:0,AT_MOST_ONCE:1,EXACTLY_ONCE:2},N={UNKNOWN:0,PRESENCE:1,ABSENCE:2,CREATED:3,DESTROYED:4,JOINED:5,LEAVED:6,APPLYED:7,APPLY_ACCEPTED:8,APPLY_DECLINED:9,INVITED:10,INVITE_ACCEPTED:11,INVITE_DECLINED:12,KICKED:13,BLOCKED:14,UNBLOCKED:15,OWNER_ASSIGNED:16,ADMIN_GRANTED:17,ADMIN_REVOKED:18,MUTED:19,UNMUTED:20,BANNED:21,UNBANNED:22,INFO_UPDATED:23,ANNOUNCEMENT_UPDATED:24,MESSAGE_SETTING:25,FILE_UPLOADED:26,FILE_DELETED:27,FILE_UPDATED:28},k={WIRE:0,WIFI:1,NET_2G:2,NET_3G:3,NET_4G:4,NET_5G:5,UNKNOWN:6},O={UNKNOWN:0,ADDED:1,REMOVED:2,ACCEPTED:3,DECLINED:4,BLOCKED:5,UNBLOCKED:6,APPLIED:7,INFO_UPDATED:8,MUTED:9,UNMUTED:10},S={UNKNOWN:0,PASSWORD_CHANGED:1,FROZEN:2,REMOVED:3,KICK_BY_SAME_DEVICE:4,KICKED_BY_OTHER_DEVICE:5,INFO_UPDATED:6,DEVICE_LOGIN:7,DEVICE_LOGOUT:8,DEVICE_ADDED:9,DEVICE_REMOVED:10,CLUSTER_CHANGED:11},R={UNKNOWN:0,OPER:1},T={UNKNOWN:0,DELETE:1,DELETE_EVERYWHERE:2},I={UNREAD:0,DELIVERED:1,READ:2},x=t=>{if(t instanceof l.a)return t.toString();const{low:r,high:e,unsigned:n=!0}=t;if(void 0!==r&&void 0!==e)return new l.a(r,e,n).toString();var o=typeof t;if("boolean"==o||"string"==o||"number"==o)return t;if(Array.isArray(t)){const r=[];return t.forEach(e=>{void 0!==e&&r.push(x(e))}),r}const i={};return Object.keys(t).forEach(e=>{void 0!==t[e]&&(i[e]=x(t[e]))}),i},D=t=>{const{low:r,high:e,unsigned:n}=t;if(void 0!==r&&void 0!==e)return new l.a(r,e,n);var o=typeof t;if("boolean"==o||"string"==o||"number"==o)return t;if(Array.isArray(t)){const r=[];return t.forEach(e=>{r.push(D(e))}),r}const i={};return Object.keys(t).forEach(e=>{i[e]=D(t[e])}),i},U=(e=0)=>{if("string"==typeof e)return+e;if("number"==typeof e)return e;var{low:t,high:r,unsigned:e=!0}=e;return void 0!==t&&"undefined"!==r?new l.a(t,r,e).toNumber():void 0},M=e=>{if("string"==typeof e)return l.a.fromString(e);var{low:t,high:r,unsigned:n=!0}=e;return void 0!==t&&"undefined"!==r?new l.a(t,r,n):"number"==typeof e?l.a.fromNumber(e):new l.a},B=e=>void 0===e?"":"string"==typeof e?e:"number"==typeof e?e+"":(void 0!==e.low&&void 0!==e.high?new l.a(e.low,e.high,!0):new l.a(e)).toString(),P=e=>{if(!e.payload)return e;var{payload:t,from:r={},to:n={},id:o={},status:i,timestamp:s}=e,{content:a="",attachment:u="",ctype:c=0,ext:p,config:f,type:d}=t;let l=null,h=null;try{l=JSON.parse(u)}catch(e){}try{h=JSON.parse(f)}catch(e){}let y=i||t.status,g={id:B(o),from:B(r.uid),to:B(n.uid),content:a,type:Object.keys(A)[c].toLowerCase(),ext:p,status:y||I.UNREAD,timestamp:B(s||0),toType:2==d?"roster":"group"};return l&&(g.attach=l),h&&(g.config=h),g},j=()=>{var e=window.localStorage.getItem("key_user_id");if(e)return+e},L=(e,t,r=!0,n=0)=>{if(void 0!==t&&void 0!==e){var o=e;if(r&&(o=j()+"_"+e),0<n&&(o=o+"_"+n%31),"string"!=typeof t){n=Array.isArray(t)?{data:t}:t;try{const e=JSON.stringify(n);e&&window.localStorage.setItem(o,e)}catch(e){}}else window.localStorage.setItem(o,t)}else d.error("localstorage save error:",e,t)},F=(t,e=!0,r=0)=>{if(void 0!==t){var n=t;e&&(n=j()+"_"+t),0<r&&(n=n+"_"+r%31);n=window.localStorage.getItem(n);if(n){let e=n;try{e=JSON.parse(n)}catch(t){}return e=D(e),e.data||e}}else d.error("localstorage get error:",t)},G=(e,t=!0,r=-1)=>{let n=e;t&&(n=j()+"_"+e),0<=r&&(n=n+"_"+r%31),window.localStorage.removeItem(n)},q=(e,t=!0)=>{for(var r=0;r<31;r++)G(e,t,r)},J={saveJoinedGroups:e=>{if(e){const t=(e=!Array.isArray(e)?[e]:e).map(e=>e.group_id||e),r=F("key_group_lists")||[],n=Array.from(new Set(t.concat(r)));L("key_group_lists",n)}},removeGroup:t=>{const e=F("key_group_lists")||[],r=e.findIndex(e=>e===t);0<=r&&(e.splice(r,1),L("key_group_lists",e))},getJoinedGroups:()=>F("key_group_lists"),saveGroupInfo:e=>{Array.isArray(e)||(e=[e]);const n=F("key_group_infos")||{};e.forEach(t=>{const r={},e=t["group_id"];Object.keys(t).forEach(e=>{void 0!==t[e]&&(r[e]=t[e])}),n[e]=n[e]||{},Object.assign(n[e],r)}),L("key_group_infos",n)},getGroupInfo:e=>{var t=F("key_group_infos")[e]||{};return Object.assign(t,{group_id:e})},getGroupInfoList:()=>{const e=J.getJoinedGroups()||[],r=J.getAllGroupInfos()||{},n=[];return e.forEach(e=>{var t=r[e]||{};n.push(Object.assign({},t,{group_id:e}))}),n},getAllGroupInfos:()=>F("key_group_infos")||{},saveGroupMembers:(e,t,r)=>{Array.isArray(t)||(t=[t]);const n=F("key_group_members")||{},o=n[e]||[];if(r)return n[e]=t,void L("key_group_members",n);t.forEach(t=>{o.findIndex(e=>e===t)<0&&o.push(t)}),n[e]=o},removeGroupMembers:(e,t)=>{const r=(F("key_group_members")||{})[e]||[];t.forEach(t=>{var e=r.findIndex(e=>e===t);0<=e&&r.splice(e,1)}),L("key_group_members",r)},getGroupMembers:e=>(F("key_group_members")||{})[e]||[],clear:()=>{G("key_group_infos"),G("key_group_members"),G("key_group_lists")}};var Y=J;const K=()=>{var e=F("key_user_id",!1);if(e)return+e},V=()=>{G("key_user_id")},H=()=>{G("key_user_token")},W=()=>{G("key_user_aes_key")},z=()=>{G("key_user_device_sn")};var X={saveToken:e=>L("key_user_token",e),getToken:()=>F("key_user_token"),deleteToken:H,getAesKey:()=>F("key_user_aes_key"),saveAesKey:e=>L("key_user_aes_key",e),deleteAesKey:W,saveDeviceSN:e=>L("key_user_device_sn",e),getDeviceSN:()=>{let e=F("key_user_device_sn");return e=e||999999999+Math.floor(214e4*Math.random())+"",+e},deleteDeviceSN:z,saveUid:e=>{if(!e)throw new Error("uid is error ...");L("key_user_id",e+"",!1)},getUid:K,removeUid:V,getDeviceGuid:()=>{if(!K())return"";let e=F("key_user_device_guid");return e||(e=K()+"_"+Math.floor(2147483648*Math.random()),L("key_user_device_guid",e)),e},saveProfile:e=>L("key_user_profile",e),getProfile:()=>F("key_user_profile"),clear:()=>{z(),W(),H(),V()},saveAppid:e=>{if(!e)throw new Error("Invalid appid ...");L("key_app_id",e+"",!1)},getAppid:()=>F("key_app_id",!1)};const $={},Z=e=>(void 0===$[e]&&($[e]=[]),$[e]),Q=(e,t)=>{var r=Z(e).findIndex(e=>e.toString()===t.toString());-1<r&&Z(e).splice(r,1),Z(e).push(t)},ee=(e,t)=>{var r=Z(e).findIndex(e=>e.toString()===t.toString());0<=r&&$[e].splice(r,1)},te=(e,t)=>{Z(e).forEach(e=>{e(t)})},re={saveRecent:r=>{if(!(()=>{var e=r["ext"];let t={};try{t=JSON.parse(e)}catch(e){}return void 0!==t.input_status&&(t.input_status,!0)})()){const{from:o,to:i,type:s,toType:a,attach:t,ext:u,timestamp:c}=r;let e=r.content;if(e||t){"text"!=s&&(e=s);let t=U(i);var n=X.getUid();t===n&&(t=U(o));const p=F("key_recent_store")||[],f=p.findIndex(e=>e.type===a&&e.id===t);-1<f&&p.splice(f,1),p.unshift({type:a,id:t,content:e,ext:u,timestamp:c}),L("key_recent_store",p),te("recentlistUpdate")}else u&&u.typing&&te("onInputStatusMessage",{from:o,to:i,ext:u})}},saveUnreadRecent:(e,s)=>{e.forEach(t=>{const r=s,e=F("key_recent_store")||[];let n="",o="";var i=e.findIndex(e=>e.type===r&&e.id===t);-1<i&&(n=e[i].content,o=e[i].timestamp,e.splice(i,1)),e.unshift({type:r,id:t,content:n,timestamp:o}),L("key_recent_store",e)}),te("recentlistUpdate")},getRecents:()=>{const e=F("key_recent_store")||[],t=e.filter(e=>"roster"==e.type).map(e=>e.id);return te("imGetRecent",t),e},getRecentById:t=>{const e=F("key_recent_store")||[],r=e.findIndex(e=>e.id+""==t+"");if(r<0)return{idx:r};var n=e[r].type;return{idx:r,id:t,type:n}},deleteRecentById(e){var e=re.getRecentById(e)["idx"];if(!(e<0)){const t=F("key_recent_store")||[];t.splice(e,1),L("key_recent_store",t)}},clear:()=>{G("key_recent_store")}};var ne=re;const oe=e=>{var t=e["payload"];if(!t)return!1;var{type:e,operation:t={}}=t;if(!t||e!==E.OPER)return!1;var t=t["type"];return t===w.READ_ACK||t==w.READ_ALL},ie=(r,n)=>{const o=M(n.id);if(0===r.length)r.push(n);else{var e=r[0],t=r[r.length-1];if(-1===o.comp(M(e.id)))r.unshift(n);else if(1===o.comp(M(t.id)))r.push(n);else{let e=0,t=0;for(;e<r.length;){const n=r[e],i=o.comp(M(n.id));if(0===i&&(t=1),1!==i)break;e++}r.splice(e,t,n)}}return r},se={saveSendingRosterMessage:e=>{const t=F("key_roster_sending_message")||[];t.push(e);var r=t.length;100<r&&t.splice(0,r-100),L("key_roster_sending_message",t);var{to:r,id:e}=e;te("onSendingMessageStatusChanged",{status:"sending",uid:r.uid,mid:e})},dealSendedRosterMessage:e=>{const{client_mid:t,server_mid:r}=e,n=F("key_roster_sending_message")||[];if(r){var o=n.findIndex(e=>U(e.id)===U(t));if(-1<o){const e=n[o];e.id=r;const i=P(e);i.status=I.UNREAD,se.saveRosterMessage(i),i.toType="roster",ne.saveRecent(i),n.splice(o,1),L("key_roster_sending_message",n),te("onRosterMessage",i),oe(i)||te("onSendingMessageStatusChanged",{status:"sent",mid:U(t)})}}else{d.log("failed to send message due to: ",e.status.reason);const r=n.findIndex(e=>U(e.id)===U(t));-1<r&&(F("key_roster_sending_message")||[]).splice(r,1)}},saveRosterMessage:e=>{var{from:t,to:r,type:n}=e;if("command"!=n&&"forward"!=n){n=U(t),t=U(X.getUid()),r=U(r),n=n===t?r:n;const o=F("key_roster_message_store",!0,n)||{},i=o[n]||[];ie(i,e),100<i.length?o[n]=i.slice(i.length-100):o[n]=i,L("key_roster_message_store",o,!0,n)}},getRosterMessage:e=>(F("key_roster_message_store",!0,e)||{})[e]||[],saveFormatedRosterMessage:(e,t=[])=>{const r=F("key_roster_message_store",!0,e)||{};r[e]=t,L("key_roster_message_store",r,!0,e)},getRosterUnreadMessageIdsByRosterid:e=>{const t=(F("key_roster_message_store",!0,e)||{})[e]||[],r=[];return t.forEach(e=>{var{status:t=I.READ,id:e}=e;t==I.UNREAD&&r.push(e)}),r},deleteRosterMessageByRosterId:e=>{const t=F("key_roster_message_store",!0,e)||{};t[e]&&delete t[e],L("key_roster_message_store",t,!0,e)},deleteSingleRosterMessage:(e,t)=>{const r=F("key_roster_message_store",!0,e)||{},n=B(t),o=r[e]||[],i=o.findIndex(e=>B(e.id)===n);-1<i&&(o.splice(i,1),r[e]=o,L("key_roster_message_store",r,!0,e))},saveSendingGroupMessage:e=>{const t=F("key_group_sending_message")||[];t.push(e);var r=t.length;100<r&&t.splice(0,r-100),L("key_group_sending_message",t);var{to:r,id:e}=e;te("onSendingMessageStatusChanged",{status:"sending",uid:r.uid,mid:e})},dealSendedGroupMessage:e=>{const{client_mid:t,server_mid:r}=e,n=F("key_group_sending_message")||[],o=n.findIndex(e=>U(e.id)===U(t));if(-1<o){const e=n[o];e.id=r;const i=P(e);i.status=I.UNREAD,se.saveGroupMessage(i),i.toType="group",ne.saveRecent(i),n.splice(o,1),L("key_group_sending_message",n),te("onGroupMessage",i),oe(i)||te("onSendingMessageStatusChanged",{status:"sent",mid:U(t)})}},saveGroupMessage:e=>{var{to:t,type:r}=e;if("command"!=r&&"forward"!=r){const n=U(t),o=F("key_group_message_store",!0,n)||{},i=o[n]||[];ie(i,e),100<i.length?o[n]=i.slice(i.length-100):o[n]=i,L("key_group_message_store",o,!0,n)}},getGroupMessage:e=>(F("key_group_message_store",!0,e)||{})[e]||[],saveFormatedGroupMessage:(e,t=[])=>{const r=F("key_group_message_store",!0,e)||{};r[e]=t,L("key_group_message_store",r,!0,e)},getGroupUnreadMessageIdsByGid:e=>{const t=(F("key_group_message_store",!0,e)||{})[e]||[],r=[];return t.forEach(e=>{var{r:t=!1,id:e}=e;t||r.push(e)}),r},deleteGroupMessageByGid:e=>{const t=F("key_group_message_store",!0,e)||{};t[e]&&delete t[e],L("key_group_message_store",t,!0,e)},deleteSingleGroupMessage:(e,t)=>{const r=F("key_group_message_store",!0,e)||{};t=B(t);const n=r[e]||[],o=n.findIndex(e=>B(e.id)===t);-1<o&&(n.splice(o,1),r[e]=n,L("key_group_message_store",r,!0,e))},getUnreadByRosterId:e=>{const t=se.getRosterMessage(e)||[];let r=0;const n=X.getUid();return t.forEach(e=>{var{from:t,status:e}=e,t=U(t);0<t&&t!==n&&e!==I.READ&&r++}),r},getUnreadByGroupId:e=>{const t=se.getGroupMessage(e)||[];let r=0;const n=X.getUid();return t.forEach(e=>{var{from:t,status:e}=e,t=U(t);0<t&&t!==n&&e!==I.READ&&r++}),r},getRosterMessageById:(e,t)=>{const r=F("key_roster_message_store",!0,e)||{};for(var n in r){const e=r[n];if(e&&e.length){const r=e.find(e=>e.id==t);if(r)return r}}},getGroupMessageById:(e,t)=>{const r=F("key_group_message_store",!0,e)||{};for(var n in r){const e=r[n];if(e&&e.length){const r=e.find(e=>e.id==t);if(r)return r}}},clear:(e,t)=>{"group"==t?se.deleteGroupMessageByGid(e):se.deleteRosterMessageByRosterId(e)},clearAll:()=>{q("key_roster_message_store"),q("key_group_message_store")}};var ae=se,ue=e=>{const t=F("key_notice_store")||[];t.push(e);e=t.length;50<e&&t.splice(0,e-50),L("key_notice_store",t)},u=()=>F("key_notice_store")||[];const ce={saveRosterList:(e=[])=>{const t=(e=!Array.isArray(e)?[e]:e).map(e=>e.roster_user_id||e.user_id||e),r=ce.getRosterList()||[];var n=Array.isArray(r)?Array.from(new Set(r.concat(t))):t;L("key_roster_lists",n),ce.saveRosterInfo(e)},getRosterList:()=>F("key_roster_lists"),getRosterInfoList:()=>{const e=ce.getRosterList()||[],r=ce.getAllRosterInfos()||{},n=[];return e.forEach(e=>{var t=r[e]||{};n.push(Object.assign({},t,{user_id:e}))}),n},removeRoster:e=>{const t=ce.getRosterList(),r=t.indexOf(e);0<=r&&t.splice(r,1),L("key_roster_lists",t)},removeRosterList:()=>G("key_roster_lists"),saveRosterInfo:(e=[])=>{Array.isArray(e)||(e=[e]);const t=ce.getAllRosterInfos()||{};e.forEach(r=>{const e=r["user_id"],n={};Object.keys(r).forEach(e=>{var t=r[e];void 0!==t&&(n[e]=t)}),e&&(t[e]=t[e]||{},Object.assign(t[e],n))}),L("key_roster_infos",t)},getRosterInfo:e=>{var t=(F("key_roster_infos")||{})[e]||{user_id:e};return t&&Object.assign(t,{user_id:e})},getAllRosterInfos:()=>F("key_roster_infos"),clear:()=>{G("key_roster_infos"),G("key_roster_lists")}};var pe=ce,p=r(19),fe=r.n(p);let de={errTimer:null,errCount:0};Q("refresh_ratel",e=>{e&&(f.a.defaults.baseURL=e)});const le=["app_dns","app/captcha/image","app/captcha/sms","app/captcha/sms_web","app/user/info_pwd","app/wechat_login","mobile_bind_with_sign","qr_code","qr_login","token/id","token/user","user/register"];f.a.defaults.timeout=2e4,f.a.interceptors.request.use(e=>{var t=X.getToken(),r=X.getAppid();if(r&&(e.headers.common.app_id=r),t&&(e.headers.common["access-token"]=t),(t=>{let r=!0;return le.forEach(e=>{-1<t.indexOf(e)&&(r=!1)}),r})(e.url)&&!t)throw new Error("you should login  ...");return e},e=>Promise.reject(e));function he(e={}){this.uid=e.uid||0,e=void 0===e.deviceSN?X.getDeviceSN():e.deviceSN,this.deviceSN=e}const ye=(n,e="get",t={},r=[],o=!1,i={})=>{const s=((r={},e=[])=>{let n=[];return e.forEach(e=>{if("string"==typeof e&&void 0===r[e]&&n.push(e+" can not be null.."),Array.isArray(e)){let t=!1;e.forEach(e=>{void 0!==r[e]&&(t=!0)}),t||n.push(e.join("、")+" can not be all null")}}),n})(t,r);if(s.length){const n=s.join(",");return Promise.reject(new Error(n))}let a={};e=e.toLowerCase();return"get"===e||"post"===e&&o?(0<n.indexOf("?")?n+="&":n+="?",n+=fe.a.stringify(t)):((t=t).group_id&&(t.group_id=+t.group_id),t.user_id&&(t.user_id=+t.user_id),t.new_owner&&(t.new_owner=+t.new_owner),t.apply_approval&&(t.apply_approval=+t.apply_approval),t.duration&&(t.duration=+t.duration),t.limit&&(t.limit=+t.limit),t.version&&(t.version=+t.version),t.announcement_id&&(t.announcement_id=+t.announcement_id),t.user_list&&Array.isArray(t.user_list)&&(t.user_list=t.user_list.map(e=>+e)),t.user_list&&Array.isArray(t.user_list)&&(t.user_list=t.user_list.map(e=>+e)),t.file_list&&Array.isArray(t.file_list)&&(t.file_list=t.file_list.map(e=>+e)),a=t),f.a[e](n,a,i).then(e=>{de.errTimer&&clearTimeout(de.errTimer),de.errTimer=null,de.errCount=0;var{data:t={}}=e;if(0!==Object.keys(i).length)return"boolean"==typeof t.data&&t.data||"string"==typeof t.Status&&"OK"===t.Status?void 0:Promise.reject({config:i,url:n});var{data:r,code:e,message:t}=t;return 200===e?r:(402===e&&te("flooNotice",{category:"action",desc:"relogin"}),Promise.reject({url:n,code:e,message:t}))}).catch(e=>(de.errTimer&&clearTimeout(de.errTimer),de.errTimer=null,de.errCount=de.errCount+1,5<=de.errCount?(de.errCount=0,te("ratelError")):de.errTimer=setTimeout(()=>{de.errCount=0},18e5),Promise.reject(e)))},ge=(e,t)=>ye(e,"get",t,["app_id"],!0),me=e=>ye("/token/user","post",e,[["mobile","name"],"password"]),ve=e=>ye("/token/id","post",e,["user_id","password"]),be=e=>ye("/user/register/v2","post",e,["username","password"]),_e=e=>ye("/app/user/mobile_bind","post",e,["captcha","mobile"]),Ee=e=>ye("/app/user/mobile_update","post",e,["mobile"]),we=e=>ye("/app/captcha/sms","get",e,["mobile"],!0),Ae=e=>ye("/app/user/name_check","get",e,["username"],!0),Ce=e=>ye("/app/user/mobile_bind","post",e,["captcha","mobile"]),Ne=e=>ye("/app/user/mobile_bind_with_sign","post",e,["sign","mobile"]),ke=e=>ye("/app/user/info_pwd","get",e,["captcha","mobile"],!0),Oe=e=>ye("/app/captcha/image","post",e,[]),Se=e=>ye("/app/captcha/sms_web","get",e,["captcha","image_id","mobile"],!0),Re=e=>ye("/roster/accept","post",e,["user_id"],!0),Te=e=>ye("/roster/apply","post",e,["user_id","alias"]),Ie=e=>ye("/roster/decline","post",e,["user_id"]),xe=e=>ye("/roster/delete","post",e,["user_id"],!0),De=e=>ye("/roster/ext","post",e,["user_id","ext"]),Ue=e=>ye("/roster/id","get",e,["user_id"]),Me=e=>ye("/roster/list","get",e,[]),Be=e=>ye("/roster/list","post",e,["list"]),Pe=e=>ye("/roster/name","get",e,["username"]),je=e=>ye("/roster/apply/list","get",e,["cursor"],!0),Le=e=>ye("/roster/blocked_list","get",e,[""],!0),Fe=e=>ye("/roster/block","post",e,["user_id"],!0),Ge=e=>ye("/roster/unblock","post",e,["user_id"],!0),qe=e=>ye("/group/admin/add","post",e,["group_id","user_list"]),Je=e=>ye("/group/admin_list","get",e,["group_id"],!0),Ye=e=>ye("/group/admin/remove","post",e,["group_id","user_list"]),Ke=e=>ye("/group/announcement","get",e,["announcement_id","group_id"]),Ve=e=>ye("/group/announcement/delete","post",e,["announcement_id","group_id"],!0),He=e=>ye("/group/announcement/edit","post",e,["group_id","content","title"]),We=e=>ye("/group/announcement/list","get",e,["group_id"],!0),ze=e=>ye("/group/create","post",e,["name"]),Xe=e=>ye("/group/destroy","post",e,["group_id"],!0),$e=e=>ye("/group/info","get",e,["group_id"]),Ze=e=>ye("/group/info/avatar","post",e,["group_id","value"]),Qe=e=>ye("/group/info/description","post",e,["group_id","value"]),et=e=>ye("/group/info/ext","post",e,["group_id","value"]),tt=e=>ye("/group/info/name","post",e,["group_id","value"]),rt=e=>ye("/group/member_list","get",e,["group_id"]),nt=e=>ye("/group/msg/mute_mode","post",e,["group_id","msg_mute_mode"]),ot=e=>ye("/group/msg/not_disturb","post",e,["group_id","value"]),it=()=>ye("/group/public_list","get",{},[]),st=e=>ye("/group/banned_list","get",e,["group_id"]),at=e=>ye("/group/ban","post",e,["group_id","duration","user_list"]),ut=e=>ye("/group/unban","post",e,["group_id","user_list"]),ct=e=>ye("/group/settings","get",e,["group_id"]),pt=e=>ye("/group/settings/allow_member_invitation","post",e,["group_id","value"]),ft=e=>ye("/group/settings/allow_member_modify","post",e,["group_id","value"]),dt=e=>ye("/group/settings/enable_read_ack","post",e,["group_id","value"]),lt=e=>ye("/group/settings/history_visible","post",e,["group_id","value"]),ht=e=>ye("/group/settings/require_admin_approval","post",e,["group_id","apply_approval"]),yt=e=>ye("/group/settings/ban_all","post",e,["group_id","duration"]),gt=e=>ye("/group/settings/unban_all","post",e,["group_id"]),mt=e=>ye("/group/transfer","post",e,["group_id","new_owner"]),vt=e=>ye("/group/user_joined","get",e),bt=e=>ye("/group/apply","post",e,["group_id"]),_t=e=>ye("/group/apply/handle","post",e,["approval","group_id","user_id"]),Et=e=>ye("/group/blocked_list","get",e,["group_id"]),wt=e=>ye("/group/block","post",e,["user_list","group_id"]),At=e=>ye("/group/unblock","post",e,["user_list","group_id"]),Ct=e=>ye("/group/kick","post",e,["user_list","group_id"]),Nt=e=>ye("/group/invite","post",e,["user_list","group_id"]),kt=e=>ye("/group/invite/handle","post",e,["approval","user_id","group_id"]),Ot=e=>ye("/group/info/batch","post",e,["group_list"]),St=e=>ye("/group/members/display_name","post",e,["group_id","user_list"]),Rt=e=>ye("/group/leave","post",e,["group_id"],!0),Tt=e=>ye("/group/display_name","post",e,["group_id","value"]),It=e=>ye("/group/application_list","post",e,["group_list"]),xt=()=>ye("/group/invitation_list","get",{},[]),Dt=e=>ye("/group/file/list","get",e,["group_id"],!0),Ut=e=>ye("/group/file/delete","post",e,["file_list","group_id"]),Mt=e=>ye("/group/file/upload","post",e,["name","size","url","group_id"]),Bt=e=>ye("/user/authmode","post",e,["value"],!0),Pt=e=>ye("/user/avatar","post",e,["avatar"]),jt=e=>ye("/user/mobile","post",e,["mobile"],!0),Lt=e=>ye("/user/nickname","post",e,["nick_name"],!0),Ft=()=>ye("/user/profile","get",{},[]),Gt=e=>ye("/user/profile","post",e,[]),qt=e=>ye("/user/push","post",e,["value"]),Jt=e=>ye("/user/push/detail","post",e,["value"]),Yt=e=>ye("/user/push/limit","post",e,["no_push_end_hour","no_push_start_hour"]),Kt=e=>ye("/user/push/nickname","post",e,["value"]),Vt=()=>ye("/user/settings","get",{},[]),Ht=e=>ye("/user/settings","post",e,["user_id"]),Wt=e=>ye("/user/sounds","post",e,["value"]),zt=e=>ye("/user/vibratory","post",e,["value"]),Xt=e=>ye("/user/token/bind","post",e,["device_sn","device_token","notifier_name"]),$t=e=>ye("/user/token/unbind","post",e,[],!0),Zt=e=>ye("/file/upload/forward","get",e,["file_sign","access-token","to_id","to_type"],!0),Qt=(e,t,r)=>ye(e,"post",t,[],!1,r),er=e=>ye("/file/upload/avatar/user","get",e,[],!0),tr=e=>ye("/file/upload/avatar/group","get",e,["group_id"],!0),rr=e=>ye("/file/upload/chat","get",e,["file_type","to_id","to_type"],!0),nr=(e,t,r)=>ye(e,"get",t,[],!0,r),or=e=>ye("/app/qr_code","get",e,[]),ir=e=>ye("/app/qr_login","get",e,["qr_code"]),sr=e=>ye("/app/qrcode/group_sign","get",e,["group_id"],!0),ar=e=>ye("/app/qrcode/group_invite","get",e,["qr_info"],!0),ur=e=>ye("/user/bind_openid","get",e,["open_id"],!0),cr=e=>ye("/app/wechat_login","get",e,["code"],!0),pr=e=>ye("/app/support_staff","get",e,[],!0),fr=()=>ye("/app/wechat/unbind","post"),dr=()=>ye("/app/wechat/is_bind","get"),lr=e=>ye("/app/wechat/bind","post",e,["open_id","type"]);he.prototype.setUid=function(e){this.uid=e},he.prototype.setDeviceSN=function(e){this.deviceSN=e};var hr=he;function yr(e){var{operation:t={type:w.UNKNOWN,mid:0}}=e;void 0!==(e=Object.assign({},{type:E.NORMAL,ctype:A.TEXT,content:"",operation:t},e)).type&&(this.type=e.type),void 0!==e.from&&(this.from=e.from),void 0!==e.to&&(this.to=e.to),void 0!==e.content&&(this.content=e.content),void 0!==e.ctype&&(this.ctype=e.ctype),void 0!==e.operation&&(this.operation=e.operation),void 0!==e.config&&(this.config=e.config),void 0!==e.attachment&&(this.attachment=e.attachment),void 0!==e.ext&&(this.ext=e.ext),void 0!==e.qos&&(this.qos=e.qos),void 0!==e.sender_name&&(this.sender_name=e.sender_name),void 0!==e.is_system&&(this.is_system=e.is_system),void 0!==e.priority&&(this.priority=e.priority)}yr.prototype={setType:function(e){this.type=e},setFrom:function(e){this.from=e},setTo:function(e){this.to=e},setContent:function(e){this.content=e},setCtype:function(e){this.ctype=e},setOperation:function(e){this.operation=e},setConfig:function(e){this.config=e},setAttachment:function(e){this.attachment=e},setExt:function(e){this.ext=e},setQos:function(e){this.qos=e},setSendername:function(e){this.sender_name=e},setIssystem:function(e){this.is_system=e},setPriority:function(e){this.priority=e}};var gr=yr;function mr(e){void 0!==(e=Object.assign({},{vsn:h.XSYNC_V1,compress_method:g.NONE},e)).vsn&&(this.vsn=e.vsn),void 0!==e.compress_method&&(this.compress_method=e.compress_method),void 0!==e.command&&(this.command=e.command),void 0!==e.payload&&(this.payload=e.payload),void 0!==e.encrypt_method&&(this.encrypt_method=e.encrypt_method),void 0!==e.encrypt_key&&(this.encrypt_key=e.encrypt_key),void 0!==e.check_sum&&(this.check_sum=e.check_sum),void 0!==e.tag&&(this.tag=e.tag)}mr.prototype={setVsn:function(e){this.vsn=e},setCompressmethod:function(e){this.compress_method=e},setCommond:function(e){this.command=e},setPayload:function(e){this.payload=e},setEncryptmethod:function(e){this.encrypt_method=e},setEncryptkey:function(e){this.encrypt_key=e},setChecksum:function(e){this.check_sum=e},setTag:function(e){this.tag=e}};var vr=mr;function br(e){void 0!==(e=Object.assign({},{encrypt_method:b.ENCRYPT_NONE,os_type:v.WEB},e)).status&&(this.status=e.status),void 0!==e.xid&&(this.xid=e.xid),void 0!==e.encrypt_method&&(this.encrypt_method=e.encrypt_method),void 0!==e.encrypt_key&&(this.encrypt_key=e.encrypt_key),void 0!==e.password&&(this.password=e.password),void 0!==e.token&&(this.token=e.token),void 0!==e.os_type&&(this.os_type=e.os_type),void 0!==e.sdk_vsn&&(this.sdk_vsn=e.sdk_vsn),void 0!==e.is_manual_login&&(this.is_manual_login=e.is_manual_login),void 0!==e.device_guid&&(this.device_guid=e.device_guid),void 0!==e.device_notifier&&(this.device_notifier=e.device_notifier),void 0!==e.device_token&&(this.device_token=e.device_token),void 0!==e.device_info&&(this.device_info=e.device_info),void 0!==e.last_login_time&&(this.last_login_time=e.last_login_time)}br.prototype={setStatus:function(e){this.status=e},setXid:function(e){this.xid=e},setEncryptmethod:function(e){this.encrypt_method=e},setEncryptkey:function(e){this.encrypt_key=e},setPassword:function(e){this.password=e},setToken:function(e){this.token=e},setOstype:function(e){this.os_type=e},setSdkvsn:function(e){this.sdk_vsn=e},setIsmanuallogin:function(e){this.is_manual_login=e},setDeviceguid:function(e){this.device_guid=e},setDevicenotifier:function(e){this.device_notifier=e},setDevicetoken:function(e){this.device_token=e},setDeviceinfo:function(e){this.device_info=e},setLastlogintime:function(e){this.last_login_time=e}};var _r=br;function Er(e){void 0!==(e=Object.assign({},e)).xid&&(this.xid=e.xid),void 0!==e.key&&(this.key=e.key),void 0!==e.meta&&(this.meta=e.meta),void 0!==e.is_full_sync&&(this.is_full_sync=e.is_full_sync),void 0!==e.full_sync_num&&(this.full_sync_num=e.full_sync_num)}Er.prototype={setXid:function(e){this.xid=e},setKey:function(e){this.key=e},setMeta:function(e){this.meta=e},setIsfullsync:function(e){this.is_full_sync=e},setFullsyncnum:function(e){this.full_sync_num=e}};var wr=Er;function Ar(e){void 0!==(e=Object.assign({},e)).id&&(this.id=e.id),void 0!==e.from&&(this.from=e.from),void 0!==e.to&&(this.to=e.to),void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.ns&&(this.ns=e.ns),void 0!==e.payload&&(this.payload=e.payload)}Ar.prototype={setId:function(e){this.id=e},setFrom:function(e){this.from=e},setTo:function(e){this.to=e},setTimestamp:function(e){this.timestamp=e},setNs:function(e){this.ns=e},setPayload:function(e){this.payload=e}};var Cr=Ar;function Nr(e){void 0!==e.type&&(this.type=e.type),void 0!==e.operation&&(this.operation=e.operation)}Nr.prototype={setType:function(e){this.type=e},setOperation:function(e){this.operation=e}};var kr=Nr;let Or=X.getDeviceSN(),Sr=X.getDeviceGuid();Q("userKicked",()=>{Or=0,Sr=999999999+Math.floor(214e4*Math.random())+""}),Q("temporary_deviceSN",e=>{Or=e});const Rr=e=>{const t=new vr;t.setCommond(y.SYNC);const r=new wr;return e.xid&&r.setXid(e.xid),e.next_key&&r.setKey(e.next_key),t.setPayload(r),t},Tr=e=>{const{gid:t,content:r,type:n="text",attachment:o,ext:i,priority:s}=e;e=Object.keys(A).indexOf(n.toUpperCase());const a=new hr({uid:+X.getUid(),deviceSN:Or}),u=new hr({uid:t,deviceSN:0}),c=new vr;c.setCommond(y.SYNC);const p=new wr,f=new gr({from:a,to:u,content:r,ctype:e,type:E.GROUPCHAT,ext:i});0<s&&(f.priority=s),0<e&&o&&(f.attachment=JSON.stringify(o));e=new Cr({id:(new Date).getTime(),from:a,to:u,payload:f,ns:_.MESSAGE,timestamp:(new Date).getTime()});return p.setMeta(e),c.setPayload(p),c},Ir=e=>{const{uid:t,content:r,type:n="text",ext:o,attachment:i}=e;te("imSendRosterMessage",e);e=Object.keys(A).indexOf(n.toUpperCase());const s=new hr({uid:+X.getUid(),deviceSN:Or}),a=new hr({uid:+t,deviceSN:0}),u=new vr;u.setCommond(y.SYNC);const c=new wr,p=new gr({from:s,to:a,content:r,ctype:e,type:E.CHAT,ext:o});0<e&&i&&(p.attachment=JSON.stringify(i));e=new Cr({id:(new Date).getTime(),from:s,to:a,payload:p,ns:_.MESSAGE,timestamp:(new Date).getTime()});return c.setMeta(e),u.setPayload(c),u},xr=(e,t)=>{t=M(t);const r=new vr;r.setCommond(y.SYNC);const n=new hr({uid:X.getUid(),deviceSN:Or}),o=new hr({uid:U(e),deviceSN:0}),i=new wr,s=new gr({from:n,to:o,ctype:A.COMMAND,type:E.OPER,operation:{type:w.READ_ACK,mid:t}}),a=new Cr({id:(new Date).getTime()+Math.floor(256*Math.random()),from:n,to:o,payload:s,ns:_.MESSAGE});return i.setMeta(a),r.setPayload(i),r},Dr=(e,t)=>{t=M(t);const r=new vr;r.setCommond(y.SYNC);const n=new hr({uid:X.getUid(),deviceSN:Or}),o=new hr({uid:U(e),deviceSN:0}),i=new wr,s=new gr({ctype:A.COMMAND,type:E.OPER,operation:{type:w.RECALL,mid:t,xid:o}}),a=new Cr({id:parseInt((new Date).getTime()+""+Math.floor(256*Math.random())),from:n,to:o,payload:s,ns:_.MESSAGE});return i.setMeta(a),r.setPayload(i),r},Ur=(e,t)=>{const r=new vr;r.setCommond(y.SYNC);const n=new hr({uid:X.getUid(),deviceSN:Or}),o=new hr({uid:U(e),deviceSN:0}),i=new wr,s=new gr({from:n,to:n,ctype:A.COMMAND,type:E.OPER,operation:{type:w.READ_ALL,xid:o,mid:t}}),a=new Cr({id:parseInt((new Date).getTime()+""+Math.floor(256*Math.random())),from:n,to:n,payload:s,ns:_.MESSAGE});return i.setMeta(a),r.setPayload(i),r},Mr=(e,t,r)=>{var{content:n,attach:o,type:r}=r;return e?Ir({uid:e,content:n,type:r,attachment:o}):Tr({gid:t,content:n,type:r,attachment:o})},Br={};let Pr=!1;const jr=e=>{var{status:t={}}=e,{code:r,reason:n}=t;if(r===m.OK)return!0;if(void 0===t.code)return!0;r!==m.INVALID_TOKEN&&r!==m.UNAUTHORIZED||te("flooNotice",{category:"action",desc:"relogin"}),r!==m.USER_FROZEN&&r!==m.INVALID_LICENSE&&r!==m.LICENSE_LIMIT&&r!==m.APP_FROZEN||te("flooNotice",{category:"action",desc:"relogin_manually"}),r===m.USER_BANNED?te("flooError",{category:"USER_BANNED",desc:"用户被禁言"}):r===m.USER_FROZEN?te("flooError",{category:"USER_FROZEN",desc:"用户被冻结，请联系App管理员。"}):r===m.APP_FROZEN?te("flooError",{category:"APP_FROZEN",desc:"APP 被冻结，请登陆美信拓扑控制台查看详情。"}):r===m.INVALID_LICENSE?te("flooError",{category:"LICENSE",desc:"无效 LICENSE，请确认服务已按时付费。"}):r===m.LICENSE_LIMIT?te("flooError",{category:"LICENSE",desc:"超出 LICENSE 用户数限制，请购买更高规格服务。"}):te("flooError",{category:r,desc:n});var e=e["client_mid"];return e&&te("onSendingMessageStatusChanged",{status:"failed",mid:U(e)}),!1},Lr=e=>{const t=e["xid"],{uid:r=0}=t;Br[r+""]?setTimeout(()=>{Br[r]=!1,Lr(e)},3e3):(Br[r+""]=!0,te("sendMessage",(e=>{e.uid=e.uid||0;const t=new vr;t.setCommond(y.SYNC);const r=new wr;return r.setXid(e),t.setPayload(r),t})(t)))},Fr=(e=[])=>{e.forEach(e=>{var t=e["ns"];t===_.UNKNOWN&&d.log("received unknown message ...",e),t===_.MESSAGE&&qr(e),t===_.GROUP_NOTICE&&Jr(e),t===_.ROSTER_NOTICE&&Yr(e),t===_.USER_NOTICE&&Kr(e),t===_.CONVERSATION&&Gr(e)})},Gr=e=>{var{payload:t={}}=e,{type:e,operation:t}=t;if(e===R.OPER&&(t.op_type==T.DELETE||t.op_type==T.DELETE_EVERYWHERE)){const r=t["xid"];te("deleteConveration",{id:r.uid,source:"other_operation"})}},qr=e=>{var{payload:t={}}=e,{type:r,operation:t}=t;r===E.NORMAL&&te("messageNormal",e),r===E.CHAT&&te("imRosterMessage",e),r===E.GROUPCHAT&&te("imGroupMessage",e),r===E.OPER&&(t.type===w.UNKNOWN&&d.log("received unknown operation: ",e),e.isReceived=!0,te("onActionMessage",e))},Jr=e=>{var{payload:t={}}=e,t=t["type"];t===N.UNKNOWN&&d.log("received unknown groupnotice: ",e),t===N.PRESENCE&&te("imGroupPresence",e),t===N.ABSENCE&&te("imGroupAbesence",e),t===N.CREATED&&te("imGroupCreated",e),t===N.DESTROYED&&te("imGroupDestoryed",e),t===N.JOINED&&te("imGroupJoined",e),t===N.APPLYED&&te("imGroupApplyed",e),t===N.APPLY_ACCEPTED&&te("imGroupApplyAccepted",e),t===N.APPLY_DECLINED&&te("imGroupApplyDeclined",e),t===N.INVITED&&te("imGroupInvited",e),t===N.INVITE_ACCEPTED&&te("imGroupInvitedAccepted",e),t===N.INVITE_DECLINED&&te("imGroupInvitedDeclined",e),t===N.KICKED&&te("imGroupKicked",e),t===N.BANNED&&te("imGroupBaned",e),t===N.UNBANNED&&te("imGroupUnbaned",e),t===N.OWNER_ASSIGNED&&te("imGroupOwnerAssigned",e),t===N.ADMIN_GRANTED&&te("imGroupAdminGranted",e),t===N.ADMIN_REVOKED&&te("imGroupAdminRevoked",e),t===N.BLOCKED&&te("imGroupBlocked",e),t===N.UNBLOCKED&&te("imGroupUnblocked",e),t===N.MUTED&&te("imGroupMuted",e),t===N.UNMUTED&&te("imGroupUnmuted",e),t===N.INFO_UPDATED&&te("imGroupInfoUpdated",e),t===N.ANNOUNCEMENT_UPDATED&&te("imGroupAnnouncementUpdated",e)},Yr=e=>{var{payload:t={}}=e,t=t["type"];t===O.UNKNOWN&&d.log("received unknown rosterNotice: ",e),t===O.ADDED&&te("imRosterAdded",e),t===O.REMOVED&&te("imRosterRemoved",e),t===O.ACCEPTED&&te("imRosterAccepted",e),t===O.DECLINED&&te("imRosterDeclined",e),t===O.BANNED&&te("imRosterBaned",e),t===O.UNBANNED&&te("imRosterUnbaned",e),t===O.INFO_UPDATED&&te("imRosterInfoUpdated",e)},Kr=e=>{var{payload:t={}}=e,t=t["type"];t!==S.UNKNOWN&&t!==S.PASSWORD_CHANGED&&t!==S.FROZEN&&t!==S.REMOVED&&t!==S.KICKED_BY_OTHER_DEVICE&&t!==S.DEVICE_REMOVED&&t!==S.CLUSTER_CHANGED||(X.deleteToken(),X.deleteDeviceSN(),te("flooNotice",{category:"action",desc:"relogin_manually"})),t===S.UNKNOWN&&d.log("received unknown userNotice: ",e),t===S.KICK_BY_SAME_DEVICE&&(Pr=!0,te("userKicked")),te("flooNotice",{category:"userNotice",desc:Object.keys(S)[t]})};var Vr=e=>{var{command:t=0,payload:e}=e;t===y.UNREAD&&(e=>{const{unread:t=[]}=e;te("imReceivedUnread",t),t.forEach(e=>{var{xid:t,n:e}=e;0<e&&te("sendMessage",Rr({xid:t,next_key:0}))})})(e),t===y.SYNC&&(e=>{if(jr(e)){var{metas:t=[],xid:r,is_full_sync:n,client_mid:o}=e;if(!n&&o&&M(o).gt(0))return te("receivedSendMessage",o),setTimeout(()=>{ae.dealSendedRosterMessage(e),ae.dealSendedGroupMessage(e)},20);var{next_key:o=0}=e;if(0===o||M(o).eq(0)){const{uid:e=0}=r;delete Br[e+""]}n?(t&&t.length&&Fr(t),te("onReceiveHistoryMsg",{next:o})):(t.length&&Fr(t),0===o||M(o).eq(0)||te("sendMessage",Rr({xid:r,next_key:o})))}})(e),t===y.NOTICE&&Lr(e),t===y.PROVISION&&(e=>{if(!jr(e))return te("flooNotice",{category:"loginMessage",desc:"login socket failure ......"}),te("loginFail","socket_failure");var{xid:e={}}=e,e=e["deviceSN"];te("temporary_deviceSN",e),Pr||e&&X.saveDeviceSN(e),te("flooNotice",{category:"loginMessage",desc:"login socket success....."}),te("loginSuccess",{}),te("sendMessage",{vsn:0,compress_method:0,command:0})})(e)},i=r(0),s=r.n(i),p=r(2),i=r.n(p);const Hr=s.a.Root.fromJSON(i.a).lookupType("im.floo.protobuf.Provision"),Wr=e=>Hr.decode(e),zr=e=>Hr.encode(e).finish(),Xr=s.a.Root.fromJSON(i.a).lookupType("im.floo.protobuf.XID"),$r=e=>Xr.encode(e).finish();p=r(67),p=r.n(p);const Zr=s.a.Root.fromJSON(p.a).lookupType("im.floo.protobuf.MessageBody");p=r(68),p=r.n(p);const Qr=s.a.Root.fromJSON(p.a).lookupType("im.floo.protobuf.GroupNotice");p=r(69),p=r.n(p);const en=s.a.Root.fromJSON(p.a).lookupType("im.floo.protobuf.RosterNotice");p=r(70),p=r.n(p);const tn=s.a.Root.fromJSON(p.a).lookupType("im.floo.protobuf.UserNotice");p=r(71),p=r.n(p);const rn=s.a.Root.fromJSON(p.a).lookupType("im.floo.protobuf.Info");p=r(72),p=r.n(p);const nn=s.a.Root.fromJSON(p.a).lookupType("im.floo.protobuf.Conversation"),on=s.a.Root.fromJSON(i.a).lookupType("im.floo.protobuf.Meta"),sn=s.a.Root.fromJSON(i.a).lookupType("im.floo.protobuf.SyncUL"),an=e=>sn.decode(e),un=e=>(e.meta&&(e.meta=(e=>{var t,r,{ns:n,payload:o}=e;return n===_.MESSAGE&&(e.payload=(r=o,Zr.encode(r).finish())),n===_.GROUP_NOTICE&&(e.payload=(e=>{e.from=$r(e.from);const t=[];return(e.to||[]).forEach(e=>{t.push($r(e))}),e.to=t,Qr.encode(e).finish()})(o)),n===_.ROSTER_NOTICE&&(e.payload=(r=o,en.encode(r).finish())),n===_.USER_NOTICE&&(e.payload=(t=o,tn.encode(t).finish())),n===_.INFO&&(e.payload=(t=o,rn.encode(t).finish())),n===_.CONVERSATION&&(e.payload=(o=o,nn.encode(o).finish())),on.create(e)})(e.meta)),sn.encode(e).finish()),cn=s.a.Root.fromJSON(i.a).lookupType("im.floo.protobuf.UnreadDL"),pn=s.a.Root.fromJSON(i.a).lookupType("im.floo.protobuf.SyncDL"),fn=s.a.Root.fromJSON(i.a).lookupType("im.floo.protobuf.Notice"),dn=s.a.Root.fromJSON(i.a).lookupType("im.floo.protobuf.Frame"),ln=e=>{e=new Uint8Array(e);const t=dn.decode(e),{command:r,payload:n}=t;return r===y.UNREAD?t.payload=(e=n,cn.decode(e)):r===y.SYNC?t.payload=(e=>{const t=pn.decode(e),{metas:r=[]}=t,s=[];return r.forEach(e=>{var t,r,n,{ns:o,payload:i}=e;o===_.MESSAGE&&(e.payload=(n=i,Zr.decode(n))),o===_.GROUP_NOTICE&&(e.payload=(r=i,Qr.decode(r))),o===_.ROSTER_NOTICE&&(e.payload=(r=i,en.decode(r))),o===_.USER_NOTICE&&(e.payload=(t=i,tn.decode(t))),o===_.INFO&&(e.payload=(t=i,rn.decode(t))),o===_.CONVERSATION&&(e.payload=(i=i,nn.decode(i))),s.push(e)}),t.metas=s,t})(n):r===y.NOTICE?t.payload={xid:(e=>Xr.decode(e))(n)}:r===y.PROVISION&&(t.payload=Wr(n)),t},hn=e=>{var t,{payload:r,command:n}=e;return r&&(n===y.UNREAD?e.payload=(t=r,cn.encode(t).finish()):n===y.SYNC?e.payload=un(r):n===y.NOTICE?e.payload=(t=r,fn.encode(t).finish()):n===y.PROVISION&&(e.payload=zr(r))),dn.encode(e).finish()};s.a.util.Long=l.a,s.a.configure();const{encode:yn,decode:gn}=a;let mn={},vn=0,bn=null,_n="normal",En=null;Q("refresh_fireplace",e=>{mn=Object.assign({fireplace:e},mn)}),Q("loginSuccess",()=>{vn=0,bn&&clearInterval(bn),bn=setInterval(()=>{Nn({vsn:0,compress_method:0,command:0})},5e4)}),Q("sendMessage",e=>{Nn(e)}),Q("userKicked",()=>{_n="kick"}),Q("reconnect",({})=>{"normal"===_n&&An()});const wn=()=>{En&&En.destroy();var e=mn["fireplace"];te("flooNotice",{category:"loginMessage",desc:"socket connecting..."}),En=c()(e,{timeout:1e4+2e4*vn,transports:["websocket"]}),En.on("connect",()=>{te("flooNotice",{category:"loginMessage",desc:"socket connect success..."}),te("flooNotice",{category:"loginMessage",desc:"logining socket service..."}),te("sendMessage",(e=>{const t=new hr({uid:+e.uid,deviceSN:Or}),r=new _r;Sr=Sr||X.getDeviceGuid(),r.setXid(t),r.setToken(e.token),r.setDeviceguid(Sr),r.setSdkvsn("2.0.0"),r.setEncryptmethod(b.AES_CBC_128),r.setEncryptkey(X.getAesKey()),r.setDeviceinfo("Web");const n=new vr;return n.setCommond(y.PROVISION),n.setPayload(r),n})({token:X.getToken(),uid:X.getUid()}))}),En.on("frame",e=>{(e=>{const t=(e=>gn(e))(e);d.info("RECV :"+JSON.stringify(x(t))),Vr(t)})(e)}),En.on("disconnect",e=>{te("reconnect",{reason:e})}),En.on("error",e=>{te("reconnect",{reason:"SocketError"})}),En.on("reconnect_attempt",e=>{En.io.opts.transports=["polling","websocket"]})},An=()=>{5<=vn?(vn=0,te("fireplaceError")):vn++,Cn()},Cn=()=>{var e=Math.floor(9e3*Math.random())+1e3;setTimeout(()=>{En.connect()},e)},Nn=e=>{d.info("SEND :"+JSON.stringify(x(e)));const t=yn(e),r=new ArrayBuffer(t.length),n=new Uint8Array(r);t.forEach((e,t)=>{n[t]=e}),En.emit("frame",r)};var kn=Object.assign(o,{connect:function(e){mn=e,vn=0,_n="normal",wn()},sendMessage:Nn,disConnect:()=>{_n="logout",En&&En.disconnect()}}),On={asyncGetRosterIdList:e=>e?kn.rosterList({}).then(e=>(pe.saveRosterList(e),e.map(e=>e.user_id||e))):Promise.resolve(pe.getRosterList()),asyncGetRosterInfo:(t,e)=>{var r=pe.getRosterInfo(t);return r&&r.username&&!e?Promise.resolve(r):kn.rosterListPost({list:[t]}).then(e=>(pe.saveRosterInfo(e),te("onRosterInfoUpdate",[t]),e.length&&e[0]||{}))},asyncRegester:e=>kn.userRegister(e),asnycGetRosterListDetailByIds:e=>{if(!e||!e.length)return Promise.resolve({});const r=pe.getAllRosterInfos(),n=[];e.forEach(e=>{var t=r[e];t&&t.username||n.push(e)});const t=Array.from(new Set(n));return t.length?kn.rosterListPost({list:t}).then(e=>(pe.saveRosterInfo(e),te("onRosterInfoUpdate",t),e)):Promise.resolve()},asyncGetUserProfile:e=>{var t=X.getProfile();return t&&(t.name||t.mobile)&&!e?Promise.resolve(t):kn.userProfile().then(e=>(X.saveProfile(e),e))},getRosterMessageByRid:e=>ae.getRosterMessage(e),readRosterMessage:(e,t)=>{te("imReadRosterMessage",{roster_id:e,mid:t})},asyncDeleteRoster:t=>kn.rosterDelete(t).then(e=>(pe.removeRoster(t.user_id),ne.deleteRecentById(t.user_id),te("onRosterListUpdate"),e)),getAllRosterDetail:()=>pe.getAllRosterInfos(),recallMessage:(e,t)=>{t=Dr(e,t);te("swapSendMessage",x(t)),te("sendMessage",t)},deleteMessage:(e,t)=>{t=((e,t)=>{t=M(t);const r=new vr;r.setCommond(y.SYNC);const n=new hr({uid:X.getUid(),deviceSN:Or}),o=new hr({uid:U(e),deviceSN:0}),i=new wr,s=new gr({ctype:A.COMMAND,type:E.OPER,operation:{type:w.DELETE,mid:t,xid:o}}),a=new Cr({id:parseInt((new Date).getTime()+""+Math.floor(256*Math.random())),from:n,to:n,payload:s,ns:_.MESSAGE});return i.setMeta(a),r.setPayload(i),r})(e,t);te("swapSendMessage",x(t)),te("sendMessage",t)},getUnreadCount:e=>ae.getUnreadByRosterId(e),unreadMessage:(e,t)=>{t=((e,t)=>{t=M(t);const r=new vr;r.setCommond(y.SYNC);const n=new hr({uid:X.getUid(),deviceSN:Or}),o=new hr({uid:U(e),deviceSN:0}),i=new wr,s=new gr({ctype:A.COMMAND,type:E.OPER,operation:{type:w.READ_CANCEL,mid:t,xid:o}}),a=new Cr({id:parseInt((new Date).getTime()+""+Math.floor(256*Math.random())),from:n,to:n,payload:s,ns:_.MESSAGE});return i.setMeta(a),r.setPayload(i),r})(e,t);te("swapSendMessage",x(t)),te("sendMessage",t)},getRosterInfo:e=>pe.getRosterInfo(e),asyncGetApplyList:kn.rosterApplylist,asyncGetBlockedlist:kn.rosterBlockedlist,asyncBlockeAdd:kn.rosterBlockedAdd,asyncBlockeRemove:kn.rosterBlockeRemove,asyncApply:kn.rosterApply,asyncAccept:kn.rosterAccept,asyncDecline:kn.rosterDecline,asyncUpdateRosterExt:kn.rosterExt,asyncSearchRosterByName:kn.rosterName,asyncSearchRosterById:kn.rosterId};Q("imRostersGroupslistReady",e=>{var e=e["rosters"];pe.saveRosterList([].concat(e)),In(e)});const Sn={},Rn=e=>(new Date).getTime()-(Sn[e]||0)<1e3,Tn=e=>{var t=(new Date).getTime();Sn[e]=t},In=(e=[])=>{Array.isArray(e)||(e=[e]);const o=pe.getAllRosterInfos()||{},i=[];e.forEach(e=>{var t,r,n;0<(e=e.user_id||e)&&({avatar:t,nick_name:r,username:n}=o[e]||{},t||r||n||e&&!Rn(e)&&i.push(e)&&Tn(e))}),i.length&&Un(i)},xn=(e=[],t=!1)=>{if(Array.isArray(e)||(e=[e]),t)Mn(e);else{const n=Y.getAllGroupInfos()||{},o=[];e.forEach(e=>{var t=e.group_id||e;if(0<e){const e=n[t]||{},r=e["name"];r||o.push(t)}}),o.length&&Mn(o)}},Dn=[],Un=(e=[])=>{let t=e.filter(e=>Dn.indexOf(e)<0);t.length&&Be({list:t}).then(e=>{t.forEach(t=>{e.findIndex(e=>e.user_id==t)<0&&Dn.push(t)}),pe.saveRosterInfo(e),te("onRosterListUpdate")})},Mn=(e=[])=>{e.length&&Ot({group_list:e}).then(e=>{Y.saveGroupInfo(e),te("onGroupListUpdate")})},Bn=(o,e,t,i)=>{if(t){const e=Y.getGroupMembers(o);if(!e||!e.length)return}void 0!==e&&(Array.isArray(e)||(e=[e]),St({group_id:o,user_list:e}).then(r=>{if(r&&r.length){const t=[],n=pe.getAllRosterInfos();r.forEach(e=>{n[e.user_id]&&n[e.user_id].username?(e.display_name=e.display_name||n[e.user_id].username,e.avatar=n[e.user_id].avatar):t.push(e.user_id)}),t.length?Be({list:t}).then(e=>{pe.saveRosterInfo(e);const t=pe.getAllRosterInfos();r=r.map(e=>(e.display_name||(e.display_name=e.display_name||t[e.user_id].username),e.avatar=t[e.user_id].avatar,e)),Y.saveGroupMembers(o,r,i),te("onGroupMemberChanged",o)}):(Y.saveGroupMembers(o,r,i),te("onGroupMemberChanged",o))}}))},Pn=(e,t)=>{const r=Y.getGroupMembers(e);var n;!r||0===r.length||0<=(n=r.findIndex(e=>e.user_id===t))&&(r.splice(n,1),Y.saveGroupMembers(e,r,!0),te("onGroupMemberChanged",e))};Q("imRostersGroupslistReady",e=>{var e=e["groups"];Y.saveJoinedGroups([].concat(e)),xn(e)}),Q("imRosterMessage",e=>{const t=P(e),{ext:r="",from:n,to:o}=t;let i={};try{i=JSON.parse(r)}catch(e){}if(void 0!==i.input_status&&n!=X.getUid())te("onInputStatusMessage",{ext:r,from:n,to:o});else{ae.saveRosterMessage(t),t.toType="roster",ne.saveRecent(t);const e=X.getUid()==n?o:n;In(e),te("onUnreadChange",e)}te("onRosterMessage",t)}),Q("imSendRosterMessage",e=>{In(e.uid)}),Q("imGetRecent",e=>{In(e)}),Q("imGroupMessage",e=>{const t=P(e);ae.saveGroupMessage(t),t.toType="group",ne.saveRecent(t);const r=X.getUid(),n=t["config"];n&&n.mentionList&&0<=n.mentionList.indexOf(r)&&te("onMentionMessage",t),te("onGroupMessage",t)}),Q("imReceivedUnread",e=>{var t=e.filter(e=>1===e.type).map(e=>U(e.xid.uid)),e=e.filter(e=>2===e.type).map(e=>U(e.xid.uid));jn(t),In(t),Ln(e),xn(e)});const jn=t=>{const o=pe.getAllRosterInfos()||{},i=[];t.forEach(e=>{var{avatar:t,nick_name:r,username:n}=o[e]||{};t||r||n||e&&!Rn(e)&&i.push(e)&&Tn(e)}),i.length?Be({list:i}).then(e=>{pe.saveRosterInfo(e),ne.saveUnreadRecent(t,"roster")}):ne.saveUnreadRecent(t,"roster")},Ln=t=>{const r=Y.getAllGroupInfos()||{},n=[];t.forEach(e=>{var t=(r[e]||{})["name"];t||e&&n.push(e)}),n.length?Ot({group_list:n}).then(e=>{Y.saveGroupInfo(e),te("onGroupListUpdate"),ne.saveUnreadRecent(t,"group")}):ne.saveUnreadRecent(t,"group")};Q("imRosterAdded",e=>{var t=e["payload"],{to:r=[],from:n}=t,t=X.getUid();1===r.length&&U(r[0].uid)===t&&(In([U(n.uid)]),pe.saveRosterList(U(n.uid)),te("onRosterListUpdate",e))}),Q("imRosterRemoved",e=>{const t=e["payload"],{from:r,to:n=[]}=t,o=X.getUid();if(U(r.uid)===o&&1===n.length){const t=U(n[0].uid);pe.removeRoster(t),ue(e),ne.deleteRecentById(t),ae.deleteRosterMessageByRosterId(t),te("onRosterRemoved",e)}}),Q("imRosterAccepted",e=>{const t=e["payload"],{from:r,to:n=[]}=t,o=X.getUid(),i=U(r.uid);if(1===n.length){const t=U(n[0].uid);i===o?(pe.saveRosterList(t),In(t)):t===o&&(pe.saveRosterList(i),In(i)),te("onRosterAccepted",e)}}),Q("imRosterDeclined",e=>{const t=e["payload"],{from:r,to:n=[]}=t,o=X.getUid(),i=U(r.uid);if(1===n.length){const t=U(n[0].uid);i!==o&&t!==o||ue(e),te("onRosterDeclined",e)}}),Q("imRrosterBaned",e=>{te("onRosterNotice",e)}),Q("imRosterUnbaned",e=>{te("onRosterNotice",e)}),Q("imRosterInfoUpdated",e=>{var t=e["payload"],{from:r,content:t="{}"}=t,r=U(r.uid);let n={};try{n=JSON.parse(t)}catch(e){}Object.keys(n).length&&(r=Object.assign({},pe.getRosterInfo(r),n),pe.saveRosterInfo([r]),te("onRosterInfoUpdate"),te("onRosterListUpdate"))}),Q("imGroupCreated",e=>{var t=e["payload"],{gid:r,from:n}=t,t=X.getUid(),r=U(r.uid),n=U(n.uid);Y.saveJoinedGroups(r),n!==t&&In(n),xn(r),te("onGroupListUpdate",e),te("onGroupCreated",e)}),Q("imGroupDestoryed",e=>{var t=e["payload"],{gid:r,from:n}=t,o=X.getUid(),t=U(r.uid),n=U(n.uid);n!==o&&In(n),Y.removeGroup(t),ue(e),ne.deleteRecentById(r),ae.deleteGroupMessageByGid(r),te("onGroupListUpdate"),te("onGroupDestoryed",e)}),Q("imGroupJoined",e=>{const t=e["payload"],{gid:r,from:n,to:o=[]}=t,i=U(n.uid),s=X.getUid(),a=U(r.uid),u=[];o.forEach(e=>{u.push(U(e.uid))}),i===s?(Y.saveJoinedGroups(a),xn(a),te("onGroupListUpdate")):(Bn(a,i,!0),In(i),te("onGroupMemberChanged",a)),te("onGroupJoined",e)}),Q("imGroupApplyed",e=>{var t=e["payload"],t=t["from"],t=U(t.uid);t!==X.getUid()&&(In([t]),ue(e))}),Q("imGroupApplyAccepted",e=>{const t=e["payload"],{gid:r,from:n,to:o=[]}=t,i=U(n.uid),s=X.getUid(),a=U(r.uid),u=[];o.forEach(e=>{u.push(U(e.uid))}),i===s?(In(u),Bn(a,u,!0),te("onGroupMemberChanged",a)):(Y.saveJoinedGroups(a),xn(a),In(i),te("onGroupListUpdate")),te("onGroupApplyAccepted",e)}),Q("imGroupApplyDeclined",e=>{const t=e["payload"],{from:r,to:n}=t,o=U(r.uid),i=X.getUid(),s=[];n.forEach(e=>{s.push(U(e.uid))}),o===i?In(s):ue(e),te("onGroupApplyDeclined",e)}),Q("imGroupInvited",e=>{const t=e["payload"],{gid:r,from:n,to:o=[]}=t,i=U(n.uid),s=X.getUid(),a=U(r.uid),u=[];o.forEach(e=>{u.push(U(e.uid))}),i!==s&&-1<u.findIndex(e=>e===s)?(In(i),xn(a),ue(e)):In(u),te("onGroupNotice",e)}),Q("imGroupInvitedAccepted",e=>{const t=e["payload"],{gid:r,from:n,to:o=[]}=t,i=U(n.uid),s=X.getUid(),a=U(r.uid),u=[];o.forEach(e=>{u.push(U(e.uid))}),i===s?(Y.saveJoinedGroups(a),xn(a),te("onGroupListUpdate")):(Bn(a,i,!0),In(i),te("onGroupMemberChanged",a)),te("onGroupInvitedAccepted",e)}),Q("imGroupInvitedDeclined",e=>{var t=e["payload"],{gid:r,from:n}=t,t=U(n.uid),n=X.getUid(),r=U(r.uid);t===n?(ue(e),xn(r)):In(t),te("onGroupInvitedDeclined",e)}),Q("imGroupKicked",e=>{const t=(e=Object.assign({},e))["payload"],{gid:r,to:n=[]}=t,o=X.getUid(),i=U(r.uid),s=[];n.forEach(e=>{s.push(U(e.uid))}),-1<s.findIndex(e=>e===o)?(Y.removeGroup(i),ue(e),ne.deleteRecentById(r),ae.deleteGroupMessageByGid(r),te("onGroupListUpdate")):Pn(i,s)}),Q("imGroupBlocked",e=>{const t=e["payload"],{gid:r,to:n=[]}=t,o=X.getUid(),i=U(r.uid),s=[];n.forEach(e=>{s.push(U(e.uid))}),-1<s.findIndex(e=>e===o)?(Y.removeGroup(i),ue(e),ne.deleteRecentById(r),ae.deleteGroupMessageByGid(r),te("onGroupListUpdate")):(In(s),Pn(i,s))}),Q("imGroupUnblocked",e=>{const t=e["payload"],{to:r=[]}=t,n=[];r.forEach(e=>{n.push(U(e.uid))}),In(n)}),Q("imGroupOwnerAssigned",e=>{const t=e["payload"],{from:r,to:n=[]}=t,o=U(r.uid),i=X.getUid(),s=[];n.forEach(e=>{s.push(U(e.uid))}),o!==i&&s.push(o),In(s),te("onGroupOwnerAssigned",e)}),Q("imGroupAdminGranted",e=>{const t=e["payload"],{from:r,to:n=[]}=t,o=U(r.uid),i=X.getUid(),s=[];n.forEach(e=>{s.push(U(e.uid))}),o!==i&&s.push(o),In(s),te("onGroupAdminGranted",e)}),Q("imGroupAdminRevoked",e=>{const t=e["payload"],{from:r,to:n=[]}=t,o=U(r.uid),i=X.getUid(),s=[];n.forEach(e=>{s.push(U(e.uid))}),o!==i&&s.push(o),In(s),te("onGroupAdminRevoked",e)}),Q("imGroupMuted",e=>{te("onGroupMuted",e)}),Q("imGroupUnblocked",e=>{te("onGroupUnblocked",e)}),Q("imGroupBaned",e=>{te("onGroupBaned",e)}),Q("imGroupUnbaned",e=>{te("onGroupUnbaned",e)}),Q("imGroupInfoUpdated",e=>{var t=e["payload"],{gid:r,content:t="{}"}=t,r=U(r.uid);let n={};try{n=JSON.parse(t)}catch(e){}Object.keys(n).length&&(r=Object.assign({},Y.getGroupInfo(r),n),Y.saveGroupInfo([r]),te("onGroupListUpdate"))}),Q("imGroupAnnouncementUpdated",e=>{var t=e["payload"],t=t["gid"],t=U(t.uid);xn(t,!0),te("onGroupAnnouncementUpdated",e)}),Q("imReadRosterMessage",e=>{const{roster_id:r,mid:n,isReceived:o}=e;let i=!1;if(n){const e=ae.getRosterMessageById(r,n);if(Fn(e)&&!o){i=!0;const e=xr(r,n);te("sendMessage",e)}}else{let t;if(ae.getRosterMessage(r).forEach(e=>{if(Fn(e)&&!o){i=!0;const t=xr(r,e.id);te("sendMessage",t)}t=e.id}),!o&&i){const n=Ur(r,t);te("sendMessage",n)}}i&&te("onUnreadChange",r)});const Fn=e=>{let t=!1;const r=Gn(e,I.READ);if(e&&r){const r=X.getUid(),n=U(e.from);0<n&&n!=r&&(t=!0)}return t},Gn=(e,t)=>{let r=!1;if(e&&e.status!=t){const n=e;n.status=t,ae.saveRosterMessage(P(n)),r=!0}return r};Q("imReadGroupMessage",e=>{const{group_id:t,mid:r,isReceived:n}=e;let o=!1;if(r){const e=ae.getGroupMessageById(t,r);if(qn(e)&&!n){o=!0;const t=B(e.from),n=xr(t,r);te("sendMessage",n)}}else{const e=ae.getGroupMessage(t);let r;if(e.forEach(e=>{if(qn(e)&&!n){o=!0;const t=B(e.from),r=xr(t,e.id);te("sendMessage",r)}r=e.id}),ae.saveFormatedGroupMessage(t,e),!n&&o){const e=Ur(t,r);te("sendMessage",e)}}o&&te("onUnreadChange",t)});const qn=e=>{let t=!1;const r=Jn(e,I.READ);if(e&&r){const r=X.getUid(),n=U(e.from);0<n&&n!=r&&e.config&&e.config.groupMemberList&&(t=!0)}return t},Jn=(e,t)=>{let r=!1;if(e&&e.status!=t){const n=e;n.status=t,ae.saveGroupMessage(P(n)),r=!0}return r},Yn=(e,t)=>{var r=[];0<(r=t?ae.getGroupMessage(e):ae.getRosterMessage(e)).length&&ne.saveRecent(r[r.length-1])};Q("onActionMessage",e=>{var{payload:t,from:r,to:n,isReceived:o}=e,{type:i,operation:s={}}=t,e=X.getUid()+"",t=n?B(n.uid):0,n=B(r.uid),r=e==n+""?t:n,e=-1!=Y.getJoinedGroups().indexOf(+t);i===E.OPER&&({type:n,mid:t,xid:i}=s,s=e?ae.getGroupMessageById(r,t):ae.getRosterMessageById(r,t),n===w.READ_ACK?(e||Fn(s),e&&qn(s)):n===w.DELIVER_ACK?(e||Gn(s,I.DELIVERED),e&&Jn(s,I.DELIVERED)):n===w.RECALL?(e||ae.deleteSingleRosterMessage(r,t),e&&ae.deleteSingleGroupMessage(r,t),Yn(r,e),te("onMessageRecalled",{uid:r,mid:t})):n===w.DELETE?(e||ae.deleteSingleRosterMessage(i.uid,t),e&&ae.deleteSingleGroupMessage(i.uid,t),Yn(i.uid,e),te("onMessageDeleted",{uid:i.uid,mid:t})):n===w.READ_CANCEL?(e||Gn(s,I.UNREAD),e&&Jn(s,I.UNREAD),te("onMessageCanceled",{uid:r,mid:t})):n===w.READ_ALL&&(e?te("imReadGroupMessage",{group_id:i.uid,mid:t,isReceived:o}):te("imReadRosterMessage",{roster_id:i.uid,mid:t,isReceived:o})),r=B(i&&i.uid?i.uid:r),te("onMessageStatusChanged",{uid:r,mid:B(t)}),te("onUnreadChange",r))});const Kn={};Q("swapSendMessage",e=>{var t=e["payload"],t=t["meta"],t=t["id"];Kn[B(t)]=e}),Q("receivedSendMessage",e=>{e=B(e);e=Kn[e];if(e){const t=e.payload,r=t["meta"],n=r["payload"],o=n["type"];o===E.OPER&&te("onActionMessage",r)}}),Q("deleteConversation",({id:e,source:t})=>{te("flooNotice",{category:"conversation_deleted",desc:{id:e,source:t}});var{idx:r,type:t}=ne.getRecentById(e);r<0||("group"==t?ae.deleteGroupMessageByGid(e):ae.deleteRosterMessageByRosterId(e),ne.deleteRecentById(e))});var Vn=Bn,Hn={asyncGetGroupInfo:(e,t)=>{var r=Y.getGroupInfo(e-=0)||{};return r.name&&!t?Promise.resolve(r):kn.groupInfo({group_id:e}).then(e=>(Y.saveGroupInfo([e]),e))},asyncGetJoinedGroups:e=>e?kn.groupUserjoined({}).then(e=>Array.isArray(e)?e:Y.getGroupInfoList()):Promise.resolve(Y.getGroupInfoList()),openGroup:t=>{kn.groupMemberlist({group_id:t}).then(e=>{Y.saveGroupMembers(t,e);e=e.map(e=>e.user_id);e.length&&Vn(t,e,!1,!0),te("onGroupMemberChanged",t)})},getAllGroupDetail:()=>Y.getAllGroupInfos(),asyncGetGroupMembers:t=>kn.groupMemberlist({group_id:t}).then(e=>{Y.saveGroupMembers(t,e);e=e.map(e=>e.user_id);return e.length&&Vn(t,e,!1,!0),e}),getGroupMembers:e=>Y.getGroupMembers(e)||[],asyncGetGroupListDetail:e=>e&&e.length?kn.groupInfoBatch({group_list:e}).then(e=>(Y.saveGroupInfo(e),e)):Promise.resolve({}),getGruopMessage:e=>ae.getGroupMessage(e),readGroupMessage:(e,t)=>{te("imReadGroupMessage",{group_id:e,mid:t})},recallMessage:(e,t)=>{t=Dr(e,t);te("sendMessage",t),te("swapSendMessage",t)},getUnreadCount:e=>ae.getUnreadByGroupId(e),asyncGetAdminList:kn.groupAdminList,asyncAdminAdd:kn.groupAdminAdd,asyncAdminRemove:kn.groupAdminRemove,asyncGetAnouncementById:kn.groupAnnouncement,asyncAnouncementDelete:kn.groupAnnouncementDelete,asyncAnnouncementEdit:kn.groupAnnouncementEdit,asyncGetAnnouncementList:kn.groupAnnouncementList,asyncCreate:kn.groupCreate,asyncDestroy:kn.groupDestroy,asyncGetInfo:e=>(e.group_id||(e={group_id:e}),kn.groupInfo(e)),asyncUpdateAvatar:kn.groupInfoAvatar,asyncUpdateDescription:kn.groupInfoDdscription,asyncUpdateExt:kn.groupInfoExt,asyncUpdateName:kn.groupInfoName,asyncGetMemberList:e=>(e.group_id||(e={group_id:e}),kn.groupMemberlist(e)),asyncGroupMsgMutemode:kn.groupMsgMutemode,asyncGetPublicList:kn.groupPubliclist,asyncUpdateMsgNotDisturb:kn.groupMsgNotdisturb,asyncGroupBannedList:kn.groupBannedList,asyncGroupBab:kn.groupBab,asyncGroupUnban:kn.groupUnban,asyncGetSettings:kn.groupSettings,asyncUpdateAllowMemberInvitation:kn.groupSettingsAllowmemberinvitation,asyncUpdateAllowMemberModify:kn.groupSettingsAllowmembermodify,asyncUpdateEnableReadack:kn.groupSettingsEnablereadack,asyncUpdateHistoryVisible:kn.groupSettingsHistoryvisible,asyncUpdateRequireadminapproval:kn.groupSettingsRequireadminapproval,asyncBanAll:kn.groupSettingsBanAll,asyncUnBanAll:kn.groupSettingsUnBanAll,asyncOwnerTransfer:kn.groupTransfer,asyncGetUserJoined:kn.groupUserjoined,asyncApply:kn.groupApply,asyncApplyHandle:kn.groupApplyHandle,asyncGroupBockedlist:kn.groupBockedlist,asyncGroupBlock:kn.groupBlock,asyncGroupUnblock:kn.groupUnblock,asyncKick:kn.groupKick,asyncGetInvitationList:kn.groupInvitationlist,asyncInvite:kn.groupInvite,asyncInviteHandle:kn.groupInviteHandle,asyncGetMemberDisplayName:kn.groupMembersDidpayname,asyncLeave:kn.groupLeave,asyncUpdateDisplayName:kn.groupDisplayname,asncGetApplicationList:kn.groupApplicationlist,asyncGetFileList:kn.groupFilelist,asyncFileDelete:kn.groupFiledelete,asyncFileUpload:kn.groupFileupload},o={getToken:()=>X.getToken(),getUid:()=>X.getUid(),getAppid:()=>X.getAppid(),getConversationList:()=>ne.getRecents(),deleteToken:X.deleteToken,getDeviceSN:()=>X.getDeviceSN(),asyncBindDeviceToken:kn.bindDeviceToken,asyncUnbindDeviceToken:kn.unbindDeviceToken,asyncTokenUser:kn.tokenUser,asyncTokenId:kn.tokenId,asyncRegister:kn.userRegister,asyncUserBindMobile:kn.userBindMobile,asyncUserUpdateMobile:kn.userUpdateMobile,asyncUserSendSms:kn.userSendSms,asyncCaptchaSms:kn.captchaSms,asyncUserNameCheck:kn.userNameCheck,asyncUserMobileBind:kn.userMobileBind,asyncUserMobileBindSign:kn.userMobileBindSign,asyncUserMobileLogin:kn.userMobileLogin,asyncCaptchaImagePost:kn.captchaImagePost,asyncUpdateAuthmode:kn.userAuthmode,asyncUpdateAvatar:kn.userAvatar,asyncUpdateMobile:kn.userMobile,asyncUpdateNickName:kn.userNickname,asyncGetProfile:kn.userProfile,asyncUpdateProfile:kn.userProfilePost,asyncGetSettings:kn.userSettings,asyncUpdateSettings:kn.userSettingsPost};const Wn=(e,t)=>t&&e?e+"_"+t:"",zn=e=>{if(!e)return{};var t=Qn("ws"),{clusters:r,clusterIndex:n,ratelIndex:o,fireIndex:e}=$n(e);if(!r||!r.length)return{};n=r[n],o=n.ratel[o],e=(n.webim||n.ws)[e];if(!o||!e)return{};return{ratel:o.protocol+"://"+o.host,fireplace:(t?"https"===e.protocol?"wss":"ws":e.protocol)+"://"+e.host}};Q("ratelError",()=>{var e=Qn("app_id");(e=>{var{clusters:t,clusterIndex:r,ratelIndex:n,fireIndex:o}=$n(e);t[r].ratel.length>n+1?(n++,Zn(e,{clusters:t,clusterIndex:r,ratelIndex:n,fireIndex:o})):Xn(e)})(e);var e=(zn(e)||{})["ratel"];te("refresh_ratel",e)}),Q("fireplaceError",()=>{var e=Qn("app_id");(e=>{var{clusters:t,clusterIndex:r,ratelIndex:n,fireIndex:o}=$n(e),i=t[r];(i.webim||i.ws).length>o+1?(o++,Zn(e,{clusters:t,clusterIndex:r,ratelIndex:n,fireIndex:o})):Xn(e)})(e);var e=(zn(e)||{})["fireplace"];te("refresh_fireplace",e)});const Xn=e=>{const t=$n(e);let{clusters:r,clusterIndex:n}=t;for(;r.length>n+1;){n++;const t=r[n];if(0<=(t.webim||t.ws).length)return void Zn(e,{clusters:r,clusterIndex:n,ratelIndex:0,fireIndex:0})}te("retrieve_dns")},$n=e=>F(Wn("key_dns_infos",e),!1)||{},Zn=(e,t)=>{L(Wn("key_dns_infos",e),t,!1)},Qn=e=>e?F(Wn("key_dns_config",e),!1):"",eo=(e,t)=>{e&&t&&L(Wn("key_dns_config",e),t,!1)};Q("retrieve_dns",()=>{var e=Qn("dns_server"),t=Qn("app_id"),r=Qn("ws");to(e,t,r)});const to=(e,t,r)=>{eo("dns_server",e),eo("app_id",t),eo("ws",r);r=zn(t);return r.ratel?Promise.resolve(r):ge(e,{app_id:t}).then(o=>((e=>{if(!e)return;const t=o["dns_list"],r=t.findIndex(e=>0==e.group_level);if(r<0)return;var n={clusters:t[r].clusters,clusterIndex:0,ratelIndex:0,fireIndex:0};Zn(e,n)})(t),zn(t)))};var ro={asyncGetDns:to,getServers:zn};const no=({url:e="",params:t={}})=>{if(!e)return"";var r=X.getToken(),n=X.getAppid();return t=Object.assign(t,{"access-token":r,app_id:n}),0<e.indexOf("?")?e+="&":e+="?",e+fe.a.stringify(t)};u={getStaticVars:()=>n,sendRosterMessage:e=>{var t=Ir(e),e=t.payload.meta;ae.saveSendingRosterMessage(e),kn.sendMessage(t);var e=e["id"];return e},sendGroupMessage:e=>{var t=Tr(e),e=t.payload.meta;ae.saveSendingGroupMessage(e),kn.sendMessage(t);var e=e["id"];return e},sendMentionMessage:l=>{var e=(()=>{var{gid:e,txt:t,mentionAll:r,mentionList:n,mentionedMessage:o,pushMessage:i,senderNickname:s}=l,a=A.TEXT;const u=new hr({uid:+X.getUid(),deviceSN:Or}),c=new hr({uid:e,deviceSN:0}),p=new vr;p.setCommond(y.SYNC);const f=new wr,d=new gr({from:u,to:c,content:t,ctype:a,type:E.GROUPCHAT});d.config=JSON.stringify({mentionAll:r,mentionList:n,mentionedMessage:o,pushMessage:i,senderNickname:s});s=new Cr({id:(new Date).getTime(),from:u,to:c,payload:d,ns:_.MESSAGE});return f.setMeta(s),p.setPayload(f),p})(),t=e.payload.meta;ae.saveSendingGroupMessage(t),kn.sendMessage(e)},sendInputStatusMessage:(e,t)=>{t=((e,t)=>{var r=A.TEXT;const n=new hr({uid:+X.getUid(),deviceSN:Or}),o=new hr({uid:+e,deviceSN:0}),i=new vr;i.setCommond(y.SYNC);const s=new wr,a=new gr({from:n,to:o,ctype:r,type:E.CHAT,ext:JSON.stringify({input_status:t}),qos:C.AT_MOST_ONCE}),u=new Cr({id:(new Date).getTime(),from:n,to:o,payload:a,ns:_.MESSAGE});return s.setMeta(u),i.setPayload(s),i})(e,t);kn.sendMessage(t)},sendMessage:kn.sendMessage,getNoticeMessage:u(),getMessageStatus:(e,t,r=!1)=>{var n=r?ae.getGroupMessageById(e,t):ae.getRosterMessageById(e,t);const o=Object.keys(I)[n.status];return o?o.toLowerCase():void 0},forwardMessage:function(e){const{uid:r,mid:t,gid:n}=e;let o=void 0;o=r?ae.getRosterMessageById(r,t):ae.getGroupMessageById(n,t);const i=o.attach;if(i&&i.url){e=i.url.split("sign=")[1];const t=X.getToken();kn.fileForward({file_sign:e,"access-token":t,to_id:+(r||n),to_type:r?1:2}).then(e=>{o.attach.url=e;var t=Mr(r,n,o),e=t.payload.meta;r?ae.saveSendingRosterMessage(e):ae.saveSendingGroupMessage(e),kn.sendMessage(t)})}else{const s=Mr(r,n,o),t=s.payload.meta;r?ae.saveSendingRosterMessage(t):ae.saveSendingGroupMessage(t),kn.sendMessage(s)}},asyncFileUpload:f=>new Promise((r,t)=>{const{group_id:e,to_id:n,toType:o,file:i,fileType:s,chatType:a}=f;var u="rosterAvatar"===o?"fileUploadAvatarUrl":"chat"==o?"fileUploadChatFileUrl":"fileUploadGroupAvatarUrl";const c={},p=X.getToken();"groupAvatar"===o&&(c["access-token"]=p),s&&(c.file_type=["file","audio","image","video","audio-mp3"].indexOf(s)+100),c<100&&(c.file_type=["shareFile","shareAudio","shareImage","shareVideo"].indexOf(s)+200),e&&(c.group_id=e),"group"==a&&(c.to_type=2),"roster"==a&&(c.to_type=1),n&&(c.to_id=n),kn[u](c).then(e=>{let t=new FormData;e.oss_body_param&&e.oss_body_param.key&&(t.append("OSSAccessKeyId",e.oss_body_param.OSSAccessKeyId),t.append("policy",e.oss_body_param.policy),t.append("signature",e.oss_body_param.signature),t.append("callback",e.oss_body_param.callback),t.append("key",e.oss_body_param.key)),t.append("file",i),kn.asyncFileUpload(e.upload_url,t,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{r({url:e.download_url})}).catch(e=>{})}).catch(e=>{t(e)})}),requireHistoryMessage:(e,t,r)=>{r=((e,t,r)=>{t=M(t);const n=new vr;n.setCommond(y.SYNC);const o=new hr({uid:U(e),deviceSN:0}),i=new wr;return i.setXid(o),i.setKey(U(t)),i.setFullsyncnum(r),i.setIsfullsync(!0),n.setPayload(i),n})(e,t,r);kn.sendMessage(r)},makeSearch:a=>{const u=[],s=[];return(pe.getRosterInfoList()||[]).forEach(e=>{let n=!1;const{user_id:o,username:i,avatar:s}=e;(ae.getRosterMessage(o)||[]).forEach(e=>{if(n)return;const{payload:t={}}=e,{content:r=""}=t;0<=r.indexOf(a)&&(n=!0,u.push({user_id:o,username:i,avatar:s,content:r}))}),n||0<=i.indexOf(a)&&u.push({user_id:o,username:i,avatar:s})}),Y.getGroupInfoList().forEach(e=>{let n=!1;const{group_id:o,name:i}=e;(ae.getGroupMessage(o)||[]).forEach(e=>{if(n)return;const{payload:t={}}=e,{content:r=""}=t;0<=r.indexOf(a)&&(n=!0,s.push({group_id:o,name:i,content:r}))}),n||0<=i.indexOf(a)&&s.push({group_id:o,name:i})}),{rosterArr:u,groupArr:s}},asyncGetUserAvatarUploadUrl:kn.fileUploadAvatarUrl,asyncGetGroupAvatarUploadUrl:kn.fileUploadGroupAvatarUrl,asyncGetFileUploadChatFileUrl:kn.fileUploadChatFileUrl,asyncQrcode:kn.qrcode,asyncQrlogin:kn.qrlogin,asyncQrcodeGroupsign:kn.qrcodeGroupsign,asyncQrcodeGroupinvite:kn.qrcodeGroupinvite,asyncWxlogin:kn.wxlogin,asyncWxbind:kn.wxbind,asyncGetStaticContact:kn.getStaticContact,getImage:({avatar:e="",type:t="roster",thumbnail:r=!0,sdefault:n=""})=>{if(/^\//.test(e))return e;if(!e)return"roster"===t?n||"/image/roster.png":n||"/image/group.png";let o=e,i={};if(0!==e.indexOf("http")){const t=X.getAppid();var n=(ro.getServers(t)||{})["ratel"];!/\/$/.test(n)&&5<n.length&&(o=n+"/file/download/avatar"),i=Object.assign(i,{object_name:e})}return r&&(i=Object.assign(i,{image_type:2})),no({url:o,type:"image",params:i})},getAudio:({url:e,type:t="audio"})=>no({url:e,type:t,params:{format:"mp3"}}),getChatFile:no,downloadAudio:({url:e="",type:t="audio"})=>(({url:e="",type:t="",params:r={}})=>(console.log("Download chat file: ",t," ",e),e?kn.fileDownloadChatFileUrl(e,r,{operation:"download_file"}):""))({url:e,type:t,params:{format:"mp3"}}),getServers:ro.getServers,asyncWechatUnbind:kn.wechatUnbind,asyncWechatIsbind:kn.wechatIsbind,asyncWechatBind:kn.wechatBind,deleteConversation:function(e,t=!0){te("deleteConversation",{id:e,other_devices:t,source:"user_operation"});t=((e,t=!0)=>{let r=T.DELETE;t&&(r=T.DELETE_EVERYWHERE);const n=new hr({uid:+X.getUid(),deviceSN:Or}),o=new hr({uid:e}),i=new kr({type:R.OPER,operation:{xid:o,type:r}}),s=new Cr({id:(new Date).getTime(),from:n,payload:i,ns:_.CONVERSATION}),a=new wr;a.setMeta(s);const u=new vr;return u.setCommond(y.SYNC),u.setPayload(a),u})(e,t);kn.sendMessage(t)}};let oo={},io=null,so=!1,ao=!1;function uo({autoLogin:r=!0,dnsServer:n="https://dns.maximtop.com/v2/app_dns",appid:o="welovemaxim",ws:e=!1}){X.saveAppid(o),ro.asyncGetDns(n,o,e).then(e=>{var{ratel:t,fireplace:e}=e;if(t&&e){if(function(e){const{ratel:t,fireplace:r}=ro.getServers(e)||{};te("refresh_ratel",t),te("refresh_fireplace",r)}(o),oo={appid:o,baseUrl:t,autoLogin:r,fireplace:e},uo.baseUrl=oo.baseUrl,so=!0,io){const r=io["type"];return"login"==r&&uo.login(io.opt),"qrlogin"==r&&uo.qrlogin(io.opt),void("tokenLogin"==r&&uo.tokenLogin(io.user_id,io.token))}if(oo.autoLogin){ao=!0;const r=X.getUid(),n=X.getToken();if(r&&n){const r=On.asyncGetRosterIdList(!0),n=Hn.asyncGetJoinedGroups(!0);Promise.all([r,n]).then(e=>{var t=e[0],e=e[1];te("imRostersGroupslistReady",{rosters:t,groups:e}),kn.connect(oo)}).catch(e=>{te("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})})}}}else te("flooError",{category:"DNS_FAILED",desc:n})}).catch(e=>{console.log("flooim init error, please retry later: ",e)})}uo.login=function(e){console.log("webim.login",e,"sdkOk:",so),so?(te("flooNotice",{category:"loginMessage",desc:"getting token..."}),kn.tokenUser(e).then(e=>{const{token:r,user_id:n,public_key:t}=e;X.saveUid(n),X.saveToken(r),X.saveAesKey(t);var o=On.asyncGetRosterIdList(!0),e=Hn.asyncGetJoinedGroups(!0);console.log("Get token success"),ao=!0,te("flooNotice",{category:"loginMessage",desc:"token sucecc, getting roster lists.."}),Promise.all([o,e]).then(e=>{var t=e[0],e=e[1];te("imRostersGroupslistReady",{rosters:t,groups:e}),oo=Object.assign({uid:n,token:r},oo),kn.connect(oo),io=null}).catch(e=>{te("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})})}).catch(e=>{te("loginFail","token failure:"+e.message)})):io={type:"login",opt:e}},uo.qrlogin=function(e){console.log("webim.qrlogin",e),so?(te("flooNotice",{category:"loginMessage",desc:"getting token..."}),kn.tokenId(e).then(e=>{const{token:r,user_id:n,public_key:t}=e;X.saveUid(n),X.saveToken(r),X.saveAesKey(t);var o=On.asyncGetRosterIdList(!0),e=Hn.asyncGetJoinedGroups(!0);te("flooNotice",{category:"loginMessage",desc:"token sucecc, getting roster lists.."}),ao=!0,Promise.all([o,e]).then(e=>{var t=e[0],e=e[1];te("imRostersGroupslistReady",{rosters:t,groups:e}),oo=Object.assign({uid:n,token:r},oo),kn.connect(oo),io=null}).catch(e=>{te("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})})}).catch(e=>{te("loginFail","token failure:"+e.message)})):io={type:"qrlogin",opt:e}},uo.tokenLogin=function(r,n,e){var t;console.log("webim.tokenLogin",r,n),so?(X.saveUid(r),X.saveToken(n),X.saveAesKey(e),t=On.asyncGetRosterIdList(!0),e=Hn.asyncGetJoinedGroups(!0),te("flooNotice",{category:"loginMessage",desc:"token sucecc, getting roster lists.."}),ao=!0,Promise.all([t,e]).then(e=>{var t=e[0],e=e[1];te("imRostersGroupslistReady",{rosters:t,groups:e}),oo=Object.assign({uid:r,token:n},oo),kn.connect(oo),io=null}).catch(e=>{te("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})})):io={type:"tokenLogin",user_id:r,token:n}},uo.idLogin=function(e){kn.tokenId(e).then(e=>{const{token:r,user_id:n,public_key:t}=e;X.saveUid(n),X.saveToken(r),X.saveAesKey(t);var o=On.asyncGetRosterIdList(!0),e=Hn.asyncGetJoinedGroups(!0);te("flooNotice",{category:"loginMessage",desc:"token success, getting roster lists.."}),ao=!0,Promise.all([o,e]).then(e=>{const t=e[0]||[];t.push(n);e=e[1];te("imRostersGroupslistReady",{rosters:t,groups:e}),oo=Object.assign({uid:n,token:r},oo),kn.connect(oo),io=null}).catch(e=>{te("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})})}).catch(e=>{te("loginFail","token failure:"+e.message)})},uo.wxlogin=function(){},uo.cleanup=function(){ne.clear(),pe.clear(),Y.clear(),X.clear(),ae.clearAll()},uo.isLogin=function(){return ao&&X.getUid()&&X.getToken()},uo.on=uo.listen=function(t,e){e?Q(t,e):Object.keys(t).forEach(e=>{Q(e,t[e])})},uo.off=function(t,e){e?ee(t,e):Object.keys(t).forEach(e=>{ee(e,t[e])})},uo.logout=function(){kn.disConnect(),uo.cleanup()},uo.isReady=function(){return so},uo.disConnect=kn.disConnect;var co=uo;function po(e){return new co(e),co}co.rosterManage=On,co.groupManage=Hn,co.userManage=o,co.sysManage=u,t.default=po,window.flooIM=e=>po(e)}],n={},o.m=m,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=134);function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return m[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var m,n},module.exports=l()}(floo2_0_0);var flooim=getDefaultExportFromCjs(floo2_0_0.exports);function createChatroom(e){var t=this;return this.groupManage.asyncCreate({name:e,type:2}).then(function(e){return t.groupManage.asyncUpdateRequireadminapproval({group_id:e.group_id,apply_approval:0})})}function joinChatroom(e){return this.groupManage.asyncApply({group_id:e})}function leaveChatroom(e){return this.groupManage.asyncLeave({group_id:e})}function destroyChatroom(e){return this.groupManage.asyncDestroy({group_id:e})}function init(e){e=flooim(__assign({ws:!1,autoLogin:!0},e));return e.chatroomManage={create:createChatroom.bind(e),join:joinChatroom.bind(e),leave:leaveChatroom.bind(e),destroy:destroyChatroom.bind(e)},e}exports.init=init,exports.version=version,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=qnweb-im.umd.js.map
